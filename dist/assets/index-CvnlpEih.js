(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function bl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fu={exports:{}},js={},mu={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=Symbol.for("react.element"),kf=Symbol.for("react.portal"),jf=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),Cf=Symbol.for("react.provider"),Tf=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),Mf=Symbol.for("react.suspense"),If=Symbol.for("react.memo"),Pf=Symbol.for("react.lazy"),zi=Symbol.iterator;function Rf(e){return e===null||typeof e!="object"?null:(e=zi&&e[zi]||e["@@iterator"],typeof e=="function"?e:null)}var pu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xu=Object.assign,gu={};function wr(e,t,n){this.props=e,this.context=t,this.refs=gu,this.updater=n||pu}wr.prototype.isReactComponent={};wr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bu(){}bu.prototype=wr.prototype;function vl(e,t,n){this.props=e,this.context=t,this.refs=gu,this.updater=n||pu}var yl=vl.prototype=new bu;yl.constructor=vl;xu(yl,wr.prototype);yl.isPureReactComponent=!0;var Fi=Array.isArray,vu=Object.prototype.hasOwnProperty,wl={current:null},yu={key:!0,ref:!0,__self:!0,__source:!0};function wu(e,t,n){var r,s={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)vu.call(t,r)&&!yu.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var i=Array(c),d=0;d<c;d++)i[d]=arguments[d+2];s.children=i}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:fo,type:e,key:a,ref:l,props:s,_owner:wl.current}}function Df(e,t){return{$$typeof:fo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kl(e){return typeof e=="object"&&e!==null&&e.$$typeof===fo}function Lf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hi=/\/+/g;function Vs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lf(""+e.key):t.toString(36)}function zo(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case fo:case kf:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+Vs(l,0):r,Fi(s)?(n="",e!=null&&(n=e.replace(Hi,"$&/")+"/"),zo(s,t,n,"",function(d){return d})):s!=null&&(kl(s)&&(s=Df(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Hi,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Fi(e))for(var c=0;c<e.length;c++){a=e[c];var i=r+Vs(a,c);l+=zo(a,t,n,i,s)}else if(i=Rf(e),typeof i=="function")for(e=i.call(e),c=0;!(a=e.next()).done;)a=a.value,i=r+Vs(a,c++),l+=zo(a,t,n,i,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function vo(e,t,n){if(e==null)return e;var r=[],s=0;return zo(e,r,"","",function(a){return t.call(n,a,s++)}),r}function _f(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qe={current:null},Fo={transition:null},Of={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Fo,ReactCurrentOwner:wl};function ku(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:vo,forEach:function(e,t,n){vo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return vo(e,function(){t++}),t},toArray:function(e){return vo(e,function(t){return t})||[]},only:function(e){if(!kl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=wr;re.Fragment=jf;re.Profiler=Sf;re.PureComponent=vl;re.StrictMode=Nf;re.Suspense=Mf;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Of;re.act=ku;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=xu({},e.props),s=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=wl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(i in t)vu.call(t,i)&&!yu.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&c!==void 0?c[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){c=Array(i);for(var d=0;d<i;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:fo,type:e.type,key:s,ref:a,props:r,_owner:l}};re.createContext=function(e){return e={$$typeof:Tf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cf,_context:e},e.Consumer=e};re.createElement=wu;re.createFactory=function(e){var t=wu.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:Ef,render:e}};re.isValidElement=kl;re.lazy=function(e){return{$$typeof:Pf,_payload:{_status:-1,_result:e},_init:_f}};re.memo=function(e,t){return{$$typeof:If,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=Fo.transition;Fo.transition={};try{e()}finally{Fo.transition=t}};re.unstable_act=ku;re.useCallback=function(e,t){return Qe.current.useCallback(e,t)};re.useContext=function(e){return Qe.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return Qe.current.useDeferredValue(e)};re.useEffect=function(e,t){return Qe.current.useEffect(e,t)};re.useId=function(){return Qe.current.useId()};re.useImperativeHandle=function(e,t,n){return Qe.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return Qe.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return Qe.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return Qe.current.useMemo(e,t)};re.useReducer=function(e,t,n){return Qe.current.useReducer(e,t,n)};re.useRef=function(e){return Qe.current.useRef(e)};re.useState=function(e){return Qe.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return Qe.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return Qe.current.useTransition()};re.version="18.3.1";mu.exports=re;var E=mu.exports;const jl=bl(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=E,Af=Symbol.for("react.element"),Wf=Symbol.for("react.fragment"),zf=Object.prototype.hasOwnProperty,Ff=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hf={key:!0,ref:!0,__self:!0,__source:!0};function ju(e,t,n){var r,s={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)zf.call(t,r)&&!Hf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Af,type:e,key:a,ref:l,props:s,_owner:Ff.current}}js.Fragment=Wf;js.jsx=ju;js.jsxs=ju;fu.exports=js;var o=fu.exports,ka={},Nu={exports:{}},dt={},Su={exports:{}},Cu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,R){var W=M.length;M.push(R);e:for(;0<W;){var Q=W-1>>>1,X=M[Q];if(0<s(X,R))M[Q]=R,M[W]=X,W=Q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var R=M[0],W=M.pop();if(W!==R){M[0]=W;e:for(var Q=0,X=M.length,H=X>>>1;Q<H;){var te=2*(Q+1)-1,me=M[te],ye=te+1,ft=M[ye];if(0>s(me,W))ye<X&&0>s(ft,me)?(M[Q]=ft,M[ye]=W,Q=ye):(M[Q]=me,M[te]=W,Q=te);else if(ye<X&&0>s(ft,W))M[Q]=ft,M[ye]=W,Q=ye;else break e}}return R}function s(M,R){var W=M.sortIndex-R.sortIndex;return W!==0?W:M.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var i=[],d=[],h=1,g=null,x=3,b=!1,y=!1,j=!1,C=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(M){for(var R=n(d);R!==null;){if(R.callback===null)r(d);else if(R.startTime<=M)r(d),R.sortIndex=R.expirationTime,t(i,R);else break;R=n(d)}}function v(M){if(j=!1,p(M),!y)if(n(i)!==null)y=!0,ee(N);else{var R=n(d);R!==null&&F(v,R.startTime-M)}}function N(M,R){y=!1,j&&(j=!1,f(S),S=-1),b=!0;var W=x;try{for(p(R),g=n(i);g!==null&&(!(g.expirationTime>R)||M&&!D());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,x=g.priorityLevel;var X=Q(g.expirationTime<=R);R=e.unstable_now(),typeof X=="function"?g.callback=X:g===n(i)&&r(i),p(R)}else r(i);g=n(i)}if(g!==null)var H=!0;else{var te=n(d);te!==null&&F(v,te.startTime-R),H=!1}return H}finally{g=null,x=W,b=!1}}var m=!1,w=null,S=-1,T=5,k=-1;function D(){return!(e.unstable_now()-k<T)}function A(){if(w!==null){var M=e.unstable_now();k=M;var R=!0;try{R=w(!0,M)}finally{R?V():(m=!1,w=null)}}else m=!1}var V;if(typeof u=="function")V=function(){u(A)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,oe=Z.port2;Z.port1.onmessage=A,V=function(){oe.postMessage(null)}}else V=function(){C(A,0)};function ee(M){w=M,m||(m=!0,V())}function F(M,R){S=C(function(){M(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,ee(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(M){switch(x){case 1:case 2:case 3:var R=3;break;default:R=x}var W=x;x=R;try{return M()}finally{x=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,R){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var W=x;x=M;try{return R()}finally{x=W}},e.unstable_scheduleCallback=function(M,R,W){var Q=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,M){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=W+X,M={id:h++,callback:R,priorityLevel:M,startTime:W,expirationTime:X,sortIndex:-1},W>Q?(M.sortIndex=W,t(d,M),n(i)===null&&M===n(d)&&(j?(f(S),S=-1):j=!0,F(v,W-Q))):(M.sortIndex=X,t(i,M),y||b||(y=!0,ee(N))),M},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(M){var R=x;return function(){var W=x;x=R;try{return M.apply(this,arguments)}finally{x=W}}}})(Cu);Su.exports=Cu;var Bf=Su.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=E,ut=Bf;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tu=new Set,Kr={};function Wn(e,t){hr(e,t),hr(e+"Capture",t)}function hr(e,t){for(Kr[e]=t,e=0;e<t.length;e++)Tu.add(t[e])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,Vf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bi={},Ui={};function Gf(e){return ja.call(Ui,e)?!0:ja.call(Bi,e)?!1:Vf.test(e)?Ui[e]=!0:(Bi[e]=!0,!1)}function Yf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xf(e,t,n,r){if(t===null||typeof t>"u"||Yf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Je(e,t,n,r,s,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new Je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new Je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new Je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new Je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new Je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new Je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new Je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new Je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new Je(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nl=/[\-:]([a-z])/g;function Sl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nl,Sl);$e[t]=new Je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nl,Sl);$e[t]=new Je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nl,Sl);$e[t]=new Je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new Je(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new Je(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cl(e,t,n,r){var s=$e.hasOwnProperty(t)?$e[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xf(t,n,s,r)&&(n=null),r||s===null?Gf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qt=Uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yo=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),Gn=Symbol.for("react.fragment"),Tl=Symbol.for("react.strict_mode"),Na=Symbol.for("react.profiler"),Eu=Symbol.for("react.provider"),Mu=Symbol.for("react.context"),El=Symbol.for("react.forward_ref"),Sa=Symbol.for("react.suspense"),Ca=Symbol.for("react.suspense_list"),Ml=Symbol.for("react.memo"),rn=Symbol.for("react.lazy"),Iu=Symbol.for("react.offscreen"),Vi=Symbol.iterator;function Sr(e){return e===null||typeof e!="object"?null:(e=Vi&&e[Vi]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,Gs;function Or(e){if(Gs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gs=t&&t[1]||""}return`
`+Gs+e}var Ys=!1;function Xs(e,t){if(!e||Ys)return"";Ys=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),l=s.length-1,c=a.length-1;1<=l&&0<=c&&s[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==a[c]){var i=`
`+s[l].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=l&&0<=c);break}}}finally{Ys=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Or(e):""}function Kf(e){switch(e.tag){case 5:return Or(e.type);case 16:return Or("Lazy");case 13:return Or("Suspense");case 19:return Or("SuspenseList");case 0:case 2:case 15:return e=Xs(e.type,!1),e;case 11:return e=Xs(e.type.render,!1),e;case 1:return e=Xs(e.type,!0),e;default:return""}}function Ta(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gn:return"Fragment";case Vn:return"Portal";case Na:return"Profiler";case Tl:return"StrictMode";case Sa:return"Suspense";case Ca:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mu:return(e.displayName||"Context")+".Consumer";case Eu:return(e._context.displayName||"Context")+".Provider";case El:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ml:return t=e.displayName||null,t!==null?t:Ta(e.type)||"Memo";case rn:t=e._payload,e=e._init;try{return Ta(e(t))}catch{}}return null}function Qf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ta(t);case 8:return t===Tl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jf(e){var t=Pu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wo(e){e._valueTracker||(e._valueTracker=Jf(e))}function Ru(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Zo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var n=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gi(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=bn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Du(e,t){t=t.checked,t!=null&&Cl(e,"checked",t,!1)}function Ma(e,t){Du(e,t);var n=bn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ia(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ia(e,t.type,bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yi(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ia(e,t,n){(t!=="number"||Zo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var $r=Array.isArray;function ar(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+bn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xi(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if($r(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:bn(n)}}function Lu(e,t){var n=bn(t.value),r=bn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ki(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _u(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_u(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ko,Ou=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ko=ko||document.createElement("div"),ko.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ko.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Qr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zf=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(e){Zf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zr[t]=zr[e]})});function $u(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zr.hasOwnProperty(e)&&zr[e]?(""+t).trim():t+"px"}function Au(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$u(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var qf=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Da(e,t){if(t){if(qf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function La(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _a=null;function Il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oa=null,lr=null,ir=null;function Qi(e){if(e=xo(e)){if(typeof Oa!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Es(t),Oa(e.stateNode,e.type,t))}}function Wu(e){lr?ir?ir.push(e):ir=[e]:lr=e}function zu(){if(lr){var e=lr,t=ir;if(ir=lr=null,Qi(e),t)for(e=0;e<t.length;e++)Qi(t[e])}}function Fu(e,t){return e(t)}function Hu(){}var Ks=!1;function Bu(e,t,n){if(Ks)return e(t,n);Ks=!0;try{return Fu(e,t,n)}finally{Ks=!1,(lr!==null||ir!==null)&&(Hu(),zu())}}function Jr(e,t){var n=e.stateNode;if(n===null)return null;var r=Es(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var $a=!1;if(Gt)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){$a=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{$a=!1}function em(e,t,n,r,s,a,l,c,i){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var Fr=!1,qo=null,es=!1,Aa=null,tm={onError:function(e){Fr=!0,qo=e}};function nm(e,t,n,r,s,a,l,c,i){Fr=!1,qo=null,em.apply(tm,arguments)}function rm(e,t,n,r,s,a,l,c,i){if(nm.apply(this,arguments),Fr){if(Fr){var d=qo;Fr=!1,qo=null}else throw Error(z(198));es||(es=!0,Aa=d)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Uu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ji(e){if(zn(e)!==e)throw Error(z(188))}function om(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ji(s),e;if(a===r)return Ji(s),t;a=a.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=a;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,r=a;break}if(c===r){l=!0,r=s,n=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===n){l=!0,n=a,r=s;break}if(c===r){l=!0,r=a,n=s;break}c=c.sibling}if(!l)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function Vu(e){return e=om(e),e!==null?Gu(e):null}function Gu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gu(e);if(t!==null)return t;e=e.sibling}return null}var Yu=ut.unstable_scheduleCallback,Zi=ut.unstable_cancelCallback,sm=ut.unstable_shouldYield,am=ut.unstable_requestPaint,Ne=ut.unstable_now,lm=ut.unstable_getCurrentPriorityLevel,Pl=ut.unstable_ImmediatePriority,Xu=ut.unstable_UserBlockingPriority,ts=ut.unstable_NormalPriority,im=ut.unstable_LowPriority,Ku=ut.unstable_IdlePriority,Ns=null,_t=null;function cm(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ns,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:hm,um=Math.log,dm=Math.LN2;function hm(e){return e>>>=0,e===0?32:31-(um(e)/dm|0)|0}var jo=64,No=4194304;function Ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ns(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?r=Ar(c):(a&=l,a!==0&&(r=Ar(a)))}else l=n&~s,l!==0?r=Ar(l):a!==0&&(r=Ar(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Et(t),s=1<<n,r|=e[n],t&=~s;return r}function fm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Et(a),c=1<<l,i=s[l];i===-1?(!(c&n)||c&r)&&(s[l]=fm(c,t)):i<=t&&(e.expiredLanes|=c),a&=~c}}function Wa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qu(){var e=jo;return jo<<=1,!(jo&4194240)&&(jo=64),e}function Qs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=n}function pm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Et(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function Rl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Et(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ce=0;function Ju(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zu,Dl,qu,ed,td,za=!1,So=[],un=null,dn=null,hn=null,Zr=new Map,qr=new Map,sn=[],xm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qi(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":hn=null;break;case"pointerover":case"pointerout":Zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(t.pointerId)}}function Tr(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=xo(t),t!==null&&Dl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function gm(e,t,n,r,s){switch(t){case"focusin":return un=Tr(un,e,t,n,r,s),!0;case"dragenter":return dn=Tr(dn,e,t,n,r,s),!0;case"mouseover":return hn=Tr(hn,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Zr.set(a,Tr(Zr.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,qr.set(a,Tr(qr.get(a)||null,e,t,n,r,s)),!0}return!1}function nd(e){var t=Mn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=Uu(n),t!==null){e.blockedOn=t,td(e.priority,function(){qu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ho(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_a=r,n.target.dispatchEvent(r),_a=null}else return t=xo(n),t!==null&&Dl(t),e.blockedOn=n,!1;t.shift()}return!0}function ec(e,t,n){Ho(e)&&n.delete(t)}function bm(){za=!1,un!==null&&Ho(un)&&(un=null),dn!==null&&Ho(dn)&&(dn=null),hn!==null&&Ho(hn)&&(hn=null),Zr.forEach(ec),qr.forEach(ec)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,za||(za=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,bm)))}function eo(e){function t(s){return Er(s,e)}if(0<So.length){Er(So[0],e);for(var n=1;n<So.length;n++){var r=So[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Er(un,e),dn!==null&&Er(dn,e),hn!==null&&Er(hn,e),Zr.forEach(t),qr.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)nd(n),n.blockedOn===null&&sn.shift()}var cr=Qt.ReactCurrentBatchConfig,rs=!0;function vm(e,t,n,r){var s=ce,a=cr.transition;cr.transition=null;try{ce=1,Ll(e,t,n,r)}finally{ce=s,cr.transition=a}}function ym(e,t,n,r){var s=ce,a=cr.transition;cr.transition=null;try{ce=4,Ll(e,t,n,r)}finally{ce=s,cr.transition=a}}function Ll(e,t,n,r){if(rs){var s=Fa(e,t,n,r);if(s===null)aa(e,t,r,os,n),qi(e,r);else if(gm(s,e,t,n,r))r.stopPropagation();else if(qi(e,r),t&4&&-1<xm.indexOf(e)){for(;s!==null;){var a=xo(s);if(a!==null&&Zu(a),a=Fa(e,t,n,r),a===null&&aa(e,t,r,os,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else aa(e,t,r,null,n)}}var os=null;function Fa(e,t,n,r){if(os=null,e=Il(r),e=Mn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Uu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return os=e,null}function rd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lm()){case Pl:return 1;case Xu:return 4;case ts:case im:return 16;case Ku:return 536870912;default:return 16}default:return 16}}var ln=null,_l=null,Bo=null;function od(){if(Bo)return Bo;var e,t=_l,n=t.length,r,s="value"in ln?ln.value:ln.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[a-r];r++);return Bo=s.slice(e,1<r?1-r:void 0)}function Uo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Co(){return!0}function tc(){return!1}function ht(e){function t(n,r,s,a,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Co:tc,this.isPropagationStopped=tc,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Co)},persist:function(){},isPersistent:Co}),t}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=ht(kr),po=ge({},kr,{view:0,detail:0}),wm=ht(po),Js,Zs,Mr,Ss=ge({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mr&&(Mr&&e.type==="mousemove"?(Js=e.screenX-Mr.screenX,Zs=e.screenY-Mr.screenY):Zs=Js=0,Mr=e),Js)},movementY:function(e){return"movementY"in e?e.movementY:Zs}}),nc=ht(Ss),km=ge({},Ss,{dataTransfer:0}),jm=ht(km),Nm=ge({},po,{relatedTarget:0}),qs=ht(Nm),Sm=ge({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Cm=ht(Sm),Tm=ge({},kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Em=ht(Tm),Mm=ge({},kr,{data:0}),rc=ht(Mm),Im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rm[e])?!!t[e]:!1}function $l(){return Dm}var Lm=ge({},po,{key:function(e){if(e.key){var t=Im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(e){return e.type==="keypress"?Uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_m=ht(Lm),Om=ge({},Ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=ht(Om),$m=ge({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),Am=ht($m),Wm=ge({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),zm=ht(Wm),Fm=ge({},Ss,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hm=ht(Fm),Bm=[9,13,27,32],Al=Gt&&"CompositionEvent"in window,Hr=null;Gt&&"documentMode"in document&&(Hr=document.documentMode);var Um=Gt&&"TextEvent"in window&&!Hr,sd=Gt&&(!Al||Hr&&8<Hr&&11>=Hr),sc=" ",ac=!1;function ad(e,t){switch(e){case"keyup":return Bm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Vm(e,t){switch(e){case"compositionend":return ld(t);case"keypress":return t.which!==32?null:(ac=!0,sc);case"textInput":return e=t.data,e===sc&&ac?null:e;default:return null}}function Gm(e,t){if(Yn)return e==="compositionend"||!Al&&ad(e,t)?(e=od(),Bo=_l=ln=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sd&&t.locale!=="ko"?null:t.data;default:return null}}var Ym={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ym[e.type]:t==="textarea"}function id(e,t,n,r){Wu(r),t=ss(t,"onChange"),0<t.length&&(n=new Ol("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Br=null,to=null;function Xm(e){vd(e,0)}function Cs(e){var t=Qn(e);if(Ru(t))return e}function Km(e,t){if(e==="change")return t}var cd=!1;if(Gt){var ea;if(Gt){var ta="oninput"in document;if(!ta){var ic=document.createElement("div");ic.setAttribute("oninput","return;"),ta=typeof ic.oninput=="function"}ea=ta}else ea=!1;cd=ea&&(!document.documentMode||9<document.documentMode)}function cc(){Br&&(Br.detachEvent("onpropertychange",ud),to=Br=null)}function ud(e){if(e.propertyName==="value"&&Cs(to)){var t=[];id(t,to,e,Il(e)),Bu(Xm,t)}}function Qm(e,t,n){e==="focusin"?(cc(),Br=t,to=n,Br.attachEvent("onpropertychange",ud)):e==="focusout"&&cc()}function Jm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cs(to)}function Zm(e,t){if(e==="click")return Cs(t)}function qm(e,t){if(e==="input"||e==="change")return Cs(t)}function ep(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pt=typeof Object.is=="function"?Object.is:ep;function no(e,t){if(Pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ja.call(t,s)||!Pt(e[s],t[s]))return!1}return!0}function uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dc(e,t){var n=uc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uc(n)}}function dd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hd(){for(var e=window,t=Zo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zo(e.document)}return t}function Wl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tp(e){var t=hd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dd(n.ownerDocument.documentElement,n)){if(r!==null&&Wl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=dc(n,a);var l=dc(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var np=Gt&&"documentMode"in document&&11>=document.documentMode,Xn=null,Ha=null,Ur=null,Ba=!1;function hc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ba||Xn==null||Xn!==Zo(r)||(r=Xn,"selectionStart"in r&&Wl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&no(Ur,r)||(Ur=r,r=ss(Ha,"onSelect"),0<r.length&&(t=new Ol("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xn)))}function To(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kn={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},na={},fd={};Gt&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Ts(e){if(na[e])return na[e];if(!Kn[e])return e;var t=Kn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fd)return na[e]=t[n];return e}var md=Ts("animationend"),pd=Ts("animationiteration"),xd=Ts("animationstart"),gd=Ts("transitionend"),bd=new Map,fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kn(e,t){bd.set(e,t),Wn(t,[e])}for(var ra=0;ra<fc.length;ra++){var oa=fc[ra],rp=oa.toLowerCase(),op=oa[0].toUpperCase()+oa.slice(1);kn(rp,"on"+op)}kn(md,"onAnimationEnd");kn(pd,"onAnimationIteration");kn(xd,"onAnimationStart");kn("dblclick","onDoubleClick");kn("focusin","onFocus");kn("focusout","onBlur");kn(gd,"onTransitionEnd");hr("onMouseEnter",["mouseout","mouseover"]);hr("onMouseLeave",["mouseout","mouseover"]);hr("onPointerEnter",["pointerout","pointerover"]);hr("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function mc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,rm(r,t,void 0,e),e.currentTarget=null}function vd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],i=c.instance,d=c.currentTarget;if(c=c.listener,i!==a&&s.isPropagationStopped())break e;mc(s,c,d),a=i}else for(l=0;l<r.length;l++){if(c=r[l],i=c.instance,d=c.currentTarget,c=c.listener,i!==a&&s.isPropagationStopped())break e;mc(s,c,d),a=i}}}if(es)throw e=Aa,es=!1,Aa=null,e}function de(e,t){var n=t[Xa];n===void 0&&(n=t[Xa]=new Set);var r=e+"__bubble";n.has(r)||(yd(t,e,2,!1),n.add(r))}function sa(e,t,n){var r=0;t&&(r|=4),yd(n,e,r,t)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function ro(e){if(!e[Eo]){e[Eo]=!0,Tu.forEach(function(n){n!=="selectionchange"&&(sp.has(n)||sa(n,!1,e),sa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eo]||(t[Eo]=!0,sa("selectionchange",!1,t))}}function yd(e,t,n,r){switch(rd(t)){case 1:var s=vm;break;case 4:s=ym;break;default:s=Ll}n=s.bind(null,t,n,e),s=void 0,!$a||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function aa(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var i=l.tag;if((i===3||i===4)&&(i=l.stateNode.containerInfo,i===s||i.nodeType===8&&i.parentNode===s))return;l=l.return}for(;c!==null;){if(l=Mn(c),l===null)return;if(i=l.tag,i===5||i===6){r=a=l;continue e}c=c.parentNode}}r=r.return}Bu(function(){var d=a,h=Il(n),g=[];e:{var x=bd.get(e);if(x!==void 0){var b=Ol,y=e;switch(e){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":b=_m;break;case"focusin":y="focus",b=qs;break;case"focusout":y="blur",b=qs;break;case"beforeblur":case"afterblur":b=qs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=jm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Am;break;case md:case pd:case xd:b=Cm;break;case gd:b=zm;break;case"scroll":b=wm;break;case"wheel":b=Hm;break;case"copy":case"cut":case"paste":b=Em;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=oc}var j=(t&4)!==0,C=!j&&e==="scroll",f=j?x!==null?x+"Capture":null:x;j=[];for(var u=d,p;u!==null;){p=u;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,f!==null&&(v=Jr(u,f),v!=null&&j.push(oo(u,v,p)))),C)break;u=u.return}0<j.length&&(x=new b(x,y,null,n,h),g.push({event:x,listeners:j}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",x&&n!==_a&&(y=n.relatedTarget||n.fromElement)&&(Mn(y)||y[Yt]))break e;if((b||x)&&(x=h.window===h?h:(x=h.ownerDocument)?x.defaultView||x.parentWindow:window,b?(y=n.relatedTarget||n.toElement,b=d,y=y?Mn(y):null,y!==null&&(C=zn(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(b=null,y=d),b!==y)){if(j=nc,v="onMouseLeave",f="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(j=oc,v="onPointerLeave",f="onPointerEnter",u="pointer"),C=b==null?x:Qn(b),p=y==null?x:Qn(y),x=new j(v,u+"leave",b,n,h),x.target=C,x.relatedTarget=p,v=null,Mn(h)===d&&(j=new j(f,u+"enter",y,n,h),j.target=p,j.relatedTarget=C,v=j),C=v,b&&y)t:{for(j=b,f=y,u=0,p=j;p;p=Bn(p))u++;for(p=0,v=f;v;v=Bn(v))p++;for(;0<u-p;)j=Bn(j),u--;for(;0<p-u;)f=Bn(f),p--;for(;u--;){if(j===f||f!==null&&j===f.alternate)break t;j=Bn(j),f=Bn(f)}j=null}else j=null;b!==null&&pc(g,x,b,j,!1),y!==null&&C!==null&&pc(g,C,y,j,!0)}}e:{if(x=d?Qn(d):window,b=x.nodeName&&x.nodeName.toLowerCase(),b==="select"||b==="input"&&x.type==="file")var N=Km;else if(lc(x))if(cd)N=qm;else{N=Jm;var m=Qm}else(b=x.nodeName)&&b.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(N=Zm);if(N&&(N=N(e,d))){id(g,N,n,h);break e}m&&m(e,x,d),e==="focusout"&&(m=x._wrapperState)&&m.controlled&&x.type==="number"&&Ia(x,"number",x.value)}switch(m=d?Qn(d):window,e){case"focusin":(lc(m)||m.contentEditable==="true")&&(Xn=m,Ha=d,Ur=null);break;case"focusout":Ur=Ha=Xn=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,hc(g,n,h);break;case"selectionchange":if(np)break;case"keydown":case"keyup":hc(g,n,h)}var w;if(Al)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Yn?ad(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(sd&&n.locale!=="ko"&&(Yn||S!=="onCompositionStart"?S==="onCompositionEnd"&&Yn&&(w=od()):(ln=h,_l="value"in ln?ln.value:ln.textContent,Yn=!0)),m=ss(d,S),0<m.length&&(S=new rc(S,e,null,n,h),g.push({event:S,listeners:m}),w?S.data=w:(w=ld(n),w!==null&&(S.data=w)))),(w=Um?Vm(e,n):Gm(e,n))&&(d=ss(d,"onBeforeInput"),0<d.length&&(h=new rc("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:d}),h.data=w))}vd(g,t)})}function oo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ss(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Jr(e,n),a!=null&&r.unshift(oo(e,a,s)),a=Jr(e,t),a!=null&&r.push(oo(e,a,s))),e=e.return}return r}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pc(e,t,n,r,s){for(var a=t._reactName,l=[];n!==null&&n!==r;){var c=n,i=c.alternate,d=c.stateNode;if(i!==null&&i===r)break;c.tag===5&&d!==null&&(c=d,s?(i=Jr(n,a),i!=null&&l.unshift(oo(n,i,c))):s||(i=Jr(n,a),i!=null&&l.push(oo(n,i,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var ap=/\r\n?/g,lp=/\u0000|\uFFFD/g;function xc(e){return(typeof e=="string"?e:""+e).replace(ap,`
`).replace(lp,"")}function Mo(e,t,n){if(t=xc(t),xc(e)!==t&&n)throw Error(z(425))}function as(){}var Ua=null,Va=null;function Ga(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,ip=typeof clearTimeout=="function"?clearTimeout:void 0,gc=typeof Promise=="function"?Promise:void 0,cp=typeof queueMicrotask=="function"?queueMicrotask:typeof gc<"u"?function(e){return gc.resolve(null).then(e).catch(up)}:Ya;function up(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),eo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);eo(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var jr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+jr,so="__reactProps$"+jr,Yt="__reactContainer$"+jr,Xa="__reactEvents$"+jr,dp="__reactListeners$"+jr,hp="__reactHandles$"+jr;function Mn(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bc(e);e!==null;){if(n=e[Lt])return n;e=bc(e)}return t}e=n,n=e.parentNode}return null}function xo(e){return e=e[Lt]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Es(e){return e[so]||null}var Ka=[],Jn=-1;function jn(e){return{current:e}}function he(e){0>Jn||(e.current=Ka[Jn],Ka[Jn]=null,Jn--)}function ue(e,t){Jn++,Ka[Jn]=e.current,e.current=t}var vn={},Ue=jn(vn),tt=jn(!1),Ln=vn;function fr(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nt(e){return e=e.childContextTypes,e!=null}function ls(){he(tt),he(Ue)}function vc(e,t,n){if(Ue.current!==vn)throw Error(z(168));ue(Ue,t),ue(tt,n)}function wd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(z(108,Qf(e)||"Unknown",s));return ge({},n,r)}function is(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,Ln=Ue.current,ue(Ue,e),ue(tt,tt.current),!0}function yc(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=wd(e,t,Ln),r.__reactInternalMemoizedMergedChildContext=e,he(tt),he(Ue),ue(Ue,e)):he(tt),ue(tt,n)}var Ft=null,Ms=!1,ia=!1;function kd(e){Ft===null?Ft=[e]:Ft.push(e)}function fp(e){Ms=!0,kd(e)}function Nn(){if(!ia&&Ft!==null){ia=!0;var e=0,t=ce;try{var n=Ft;for(ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ft=null,Ms=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(e+1)),Yu(Pl,Nn),s}finally{ce=t,ia=!1}}return null}var Zn=[],qn=0,cs=null,us=0,pt=[],xt=0,_n=null,Ht=1,Bt="";function Cn(e,t){Zn[qn++]=us,Zn[qn++]=cs,cs=e,us=t}function jd(e,t,n){pt[xt++]=Ht,pt[xt++]=Bt,pt[xt++]=_n,_n=e;var r=Ht;e=Bt;var s=32-Et(r)-1;r&=~(1<<s),n+=1;var a=32-Et(t)+s;if(30<a){var l=s-s%5;a=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Ht=1<<32-Et(t)+s|n<<s|r,Bt=a+e}else Ht=1<<a|n<<s|r,Bt=e}function zl(e){e.return!==null&&(Cn(e,1),jd(e,1,0))}function Fl(e){for(;e===cs;)cs=Zn[--qn],Zn[qn]=null,us=Zn[--qn],Zn[qn]=null;for(;e===_n;)_n=pt[--xt],pt[xt]=null,Bt=pt[--xt],pt[xt]=null,Ht=pt[--xt],pt[xt]=null}var it=null,lt=null,fe=!1,Tt=null;function Nd(e,t){var n=gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function wc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,lt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_n!==null?{id:Ht,overflow:Bt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,lt=null,!0):!1;default:return!1}}function Qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ja(e){if(fe){var t=lt;if(t){var n=t;if(!wc(e,t)){if(Qa(e))throw Error(z(418));t=fn(n.nextSibling);var r=it;t&&wc(e,t)?Nd(r,n):(e.flags=e.flags&-4097|2,fe=!1,it=e)}}else{if(Qa(e))throw Error(z(418));e.flags=e.flags&-4097|2,fe=!1,it=e}}}function kc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function Io(e){if(e!==it)return!1;if(!fe)return kc(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ga(e.type,e.memoizedProps)),t&&(t=lt)){if(Qa(e))throw Sd(),Error(z(418));for(;t;)Nd(e,t),t=fn(t.nextSibling)}if(kc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){lt=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}lt=null}}else lt=it?fn(e.stateNode.nextSibling):null;return!0}function Sd(){for(var e=lt;e;)e=fn(e.nextSibling)}function mr(){lt=it=null,fe=!1}function Hl(e){Tt===null?Tt=[e]:Tt.push(e)}var mp=Qt.ReactCurrentBatchConfig;function Ir(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var c=s.refs;l===null?delete c[a]:c[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function Po(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jc(e){var t=e._init;return t(e._payload)}function Cd(e){function t(f,u){if(e){var p=f.deletions;p===null?(f.deletions=[u],f.flags|=16):p.push(u)}}function n(f,u){if(!e)return null;for(;u!==null;)t(f,u),u=u.sibling;return null}function r(f,u){for(f=new Map;u!==null;)u.key!==null?f.set(u.key,u):f.set(u.index,u),u=u.sibling;return f}function s(f,u){return f=gn(f,u),f.index=0,f.sibling=null,f}function a(f,u,p){return f.index=p,e?(p=f.alternate,p!==null?(p=p.index,p<u?(f.flags|=2,u):p):(f.flags|=2,u)):(f.flags|=1048576,u)}function l(f){return e&&f.alternate===null&&(f.flags|=2),f}function c(f,u,p,v){return u===null||u.tag!==6?(u=pa(p,f.mode,v),u.return=f,u):(u=s(u,p),u.return=f,u)}function i(f,u,p,v){var N=p.type;return N===Gn?h(f,u,p.props.children,v,p.key):u!==null&&(u.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===rn&&jc(N)===u.type)?(v=s(u,p.props),v.ref=Ir(f,u,p),v.return=f,v):(v=Jo(p.type,p.key,p.props,null,f.mode,v),v.ref=Ir(f,u,p),v.return=f,v)}function d(f,u,p,v){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=xa(p,f.mode,v),u.return=f,u):(u=s(u,p.children||[]),u.return=f,u)}function h(f,u,p,v,N){return u===null||u.tag!==7?(u=Dn(p,f.mode,v,N),u.return=f,u):(u=s(u,p),u.return=f,u)}function g(f,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=pa(""+u,f.mode,p),u.return=f,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case yo:return p=Jo(u.type,u.key,u.props,null,f.mode,p),p.ref=Ir(f,null,u),p.return=f,p;case Vn:return u=xa(u,f.mode,p),u.return=f,u;case rn:var v=u._init;return g(f,v(u._payload),p)}if($r(u)||Sr(u))return u=Dn(u,f.mode,p,null),u.return=f,u;Po(f,u)}return null}function x(f,u,p,v){var N=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return N!==null?null:c(f,u,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case yo:return p.key===N?i(f,u,p,v):null;case Vn:return p.key===N?d(f,u,p,v):null;case rn:return N=p._init,x(f,u,N(p._payload),v)}if($r(p)||Sr(p))return N!==null?null:h(f,u,p,v,null);Po(f,p)}return null}function b(f,u,p,v,N){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(p)||null,c(u,f,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yo:return f=f.get(v.key===null?p:v.key)||null,i(u,f,v,N);case Vn:return f=f.get(v.key===null?p:v.key)||null,d(u,f,v,N);case rn:var m=v._init;return b(f,u,p,m(v._payload),N)}if($r(v)||Sr(v))return f=f.get(p)||null,h(u,f,v,N,null);Po(u,v)}return null}function y(f,u,p,v){for(var N=null,m=null,w=u,S=u=0,T=null;w!==null&&S<p.length;S++){w.index>S?(T=w,w=null):T=w.sibling;var k=x(f,w,p[S],v);if(k===null){w===null&&(w=T);break}e&&w&&k.alternate===null&&t(f,w),u=a(k,u,S),m===null?N=k:m.sibling=k,m=k,w=T}if(S===p.length)return n(f,w),fe&&Cn(f,S),N;if(w===null){for(;S<p.length;S++)w=g(f,p[S],v),w!==null&&(u=a(w,u,S),m===null?N=w:m.sibling=w,m=w);return fe&&Cn(f,S),N}for(w=r(f,w);S<p.length;S++)T=b(w,f,S,p[S],v),T!==null&&(e&&T.alternate!==null&&w.delete(T.key===null?S:T.key),u=a(T,u,S),m===null?N=T:m.sibling=T,m=T);return e&&w.forEach(function(D){return t(f,D)}),fe&&Cn(f,S),N}function j(f,u,p,v){var N=Sr(p);if(typeof N!="function")throw Error(z(150));if(p=N.call(p),p==null)throw Error(z(151));for(var m=N=null,w=u,S=u=0,T=null,k=p.next();w!==null&&!k.done;S++,k=p.next()){w.index>S?(T=w,w=null):T=w.sibling;var D=x(f,w,k.value,v);if(D===null){w===null&&(w=T);break}e&&w&&D.alternate===null&&t(f,w),u=a(D,u,S),m===null?N=D:m.sibling=D,m=D,w=T}if(k.done)return n(f,w),fe&&Cn(f,S),N;if(w===null){for(;!k.done;S++,k=p.next())k=g(f,k.value,v),k!==null&&(u=a(k,u,S),m===null?N=k:m.sibling=k,m=k);return fe&&Cn(f,S),N}for(w=r(f,w);!k.done;S++,k=p.next())k=b(w,f,S,k.value,v),k!==null&&(e&&k.alternate!==null&&w.delete(k.key===null?S:k.key),u=a(k,u,S),m===null?N=k:m.sibling=k,m=k);return e&&w.forEach(function(A){return t(f,A)}),fe&&Cn(f,S),N}function C(f,u,p,v){if(typeof p=="object"&&p!==null&&p.type===Gn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case yo:e:{for(var N=p.key,m=u;m!==null;){if(m.key===N){if(N=p.type,N===Gn){if(m.tag===7){n(f,m.sibling),u=s(m,p.props.children),u.return=f,f=u;break e}}else if(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===rn&&jc(N)===m.type){n(f,m.sibling),u=s(m,p.props),u.ref=Ir(f,m,p),u.return=f,f=u;break e}n(f,m);break}else t(f,m);m=m.sibling}p.type===Gn?(u=Dn(p.props.children,f.mode,v,p.key),u.return=f,f=u):(v=Jo(p.type,p.key,p.props,null,f.mode,v),v.ref=Ir(f,u,p),v.return=f,f=v)}return l(f);case Vn:e:{for(m=p.key;u!==null;){if(u.key===m)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){n(f,u.sibling),u=s(u,p.children||[]),u.return=f,f=u;break e}else{n(f,u);break}else t(f,u);u=u.sibling}u=xa(p,f.mode,v),u.return=f,f=u}return l(f);case rn:return m=p._init,C(f,u,m(p._payload),v)}if($r(p))return y(f,u,p,v);if(Sr(p))return j(f,u,p,v);Po(f,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(n(f,u.sibling),u=s(u,p),u.return=f,f=u):(n(f,u),u=pa(p,f.mode,v),u.return=f,f=u),l(f)):n(f,u)}return C}var pr=Cd(!0),Td=Cd(!1),ds=jn(null),hs=null,er=null,Bl=null;function Ul(){Bl=er=hs=null}function Vl(e){var t=ds.current;he(ds),e._currentValue=t}function Za(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ur(e,t){hs=e,Bl=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(Bl!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(hs===null)throw Error(z(308));er=e,hs.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var In=null;function Gl(e){In===null?In=[e]:In.push(e)}function Ed(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Gl(t)):(n.next=s.next,s.next=n),t.interleaved=n,Xt(e,r)}function Xt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var on=!1;function Yl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Md(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Xt(e,n)}return s=r.interleaved,s===null?(t.next=t,Gl(r)):(t.next=s.next,s.next=t),r.interleaved=t,Xt(e,n)}function Vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rl(e,n)}}function Nc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fs(e,t,n,r){var s=e.updateQueue;on=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var i=c,d=i.next;i.next=null,l===null?a=d:l.next=d,l=i;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==l&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=i))}if(a!==null){var g=s.baseState;l=0,h=d=i=null,c=a;do{var x=c.lane,b=c.eventTime;if((r&x)===x){h!==null&&(h=h.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,j=c;switch(x=t,b=n,j.tag){case 1:if(y=j.payload,typeof y=="function"){g=y.call(b,g,x);break e}g=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=j.payload,x=typeof y=="function"?y.call(b,g,x):y,x==null)break e;g=ge({},g,x);break e;case 2:on=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[c]:x.push(c))}else b={eventTime:b,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=b,i=g):h=h.next=b,l|=x;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;x=c,c=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(h===null&&(i=g),s.baseState=i,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);$n|=l,e.lanes=l,e.memoizedState=g}}function Sc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var go={},Ot=jn(go),ao=jn(go),lo=jn(go);function Pn(e){if(e===go)throw Error(z(174));return e}function Xl(e,t){switch(ue(lo,t),ue(ao,e),ue(Ot,go),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ra(t,e)}he(Ot),ue(Ot,t)}function xr(){he(Ot),he(ao),he(lo)}function Id(e){Pn(lo.current);var t=Pn(Ot.current),n=Ra(t,e.type);t!==n&&(ue(ao,e),ue(Ot,n))}function Kl(e){ao.current===e&&(he(Ot),he(ao))}var pe=jn(0);function ms(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function Ql(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var Go=Qt.ReactCurrentDispatcher,ua=Qt.ReactCurrentBatchConfig,On=0,xe=null,Ee=null,Ie=null,ps=!1,Vr=!1,io=0,pp=0;function Ae(){throw Error(z(321))}function Jl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}function Zl(e,t,n,r,s,a){if(On=a,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Go.current=e===null||e.memoizedState===null?vp:yp,e=n(r,s),Vr){a=0;do{if(Vr=!1,io=0,25<=a)throw Error(z(301));a+=1,Ie=Ee=null,t.updateQueue=null,Go.current=wp,e=n(r,s)}while(Vr)}if(Go.current=xs,t=Ee!==null&&Ee.next!==null,On=0,Ie=Ee=xe=null,ps=!1,t)throw Error(z(300));return e}function ql(){var e=io!==0;return io=0,e}function Dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?xe.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function wt(){if(Ee===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Ie===null?xe.memoizedState:Ie.next;if(t!==null)Ie=t,Ee=e;else{if(e===null)throw Error(z(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ie===null?xe.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function co(e,t){return typeof t=="function"?t(e):t}function da(e){var t=wt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Ee,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=l=null,i=null,d=a;do{var h=d.lane;if((On&h)===h)i!==null&&(i=i.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};i===null?(c=i=g,l=r):i=i.next=g,xe.lanes|=h,$n|=h}d=d.next}while(d!==null&&d!==a);i===null?l=r:i.next=c,Pt(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,xe.lanes|=a,$n|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ha(e){var t=wt(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do a=e(a,l.action),l=l.next;while(l!==s);Pt(a,t.memoizedState)||(et=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Pd(){}function Rd(e,t){var n=xe,r=wt(),s=t(),a=!Pt(r.memoizedState,s);if(a&&(r.memoizedState=s,et=!0),r=r.queue,ei(_d.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,uo(9,Ld.bind(null,n,r,s,t),void 0,null),Pe===null)throw Error(z(349));On&30||Dd(n,t,s)}return s}function Dd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ld(e,t,n,r){t.value=n,t.getSnapshot=r,Od(t)&&$d(e)}function _d(e,t,n){return n(function(){Od(t)&&$d(e)})}function Od(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pt(e,n)}catch{return!0}}function $d(e){var t=Xt(e,1);t!==null&&Mt(t,e,1,-1)}function Cc(e){var t=Dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:e},t.queue=e,e=e.dispatch=bp.bind(null,xe,e),[t.memoizedState,e]}function uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ad(){return wt().memoizedState}function Yo(e,t,n,r){var s=Dt();xe.flags|=e,s.memoizedState=uo(1|t,n,void 0,r===void 0?null:r)}function Is(e,t,n,r){var s=wt();r=r===void 0?null:r;var a=void 0;if(Ee!==null){var l=Ee.memoizedState;if(a=l.destroy,r!==null&&Jl(r,l.deps)){s.memoizedState=uo(t,n,a,r);return}}xe.flags|=e,s.memoizedState=uo(1|t,n,a,r)}function Tc(e,t){return Yo(8390656,8,e,t)}function ei(e,t){return Is(2048,8,e,t)}function Wd(e,t){return Is(4,2,e,t)}function zd(e,t){return Is(4,4,e,t)}function Fd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hd(e,t,n){return n=n!=null?n.concat([e]):null,Is(4,4,Fd.bind(null,t,e),n)}function ti(){}function Bd(e,t){var n=wt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Jl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ud(e,t){var n=wt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Jl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vd(e,t,n){return On&21?(Pt(n,t)||(n=Qu(),xe.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function xp(e,t){var n=ce;ce=n!==0&&4>n?n:4,e(!0);var r=ua.transition;ua.transition={};try{e(!1),t()}finally{ce=n,ua.transition=r}}function Gd(){return wt().memoizedState}function gp(e,t,n){var r=xn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yd(e))Xd(t,n);else if(n=Ed(e,t,n,r),n!==null){var s=Ke();Mt(n,e,r,s),Kd(n,t,r)}}function bp(e,t,n){var r=xn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yd(e))Xd(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,c=a(l,n);if(s.hasEagerState=!0,s.eagerState=c,Pt(c,l)){var i=t.interleaved;i===null?(s.next=s,Gl(t)):(s.next=i.next,i.next=s),t.interleaved=s;return}}catch{}finally{}n=Ed(e,t,s,r),n!==null&&(s=Ke(),Mt(n,e,r,s),Kd(n,t,r))}}function Yd(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Xd(e,t){Vr=ps=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rl(e,n)}}var xs={readContext:yt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},vp={readContext:yt,useCallback:function(e,t){return Dt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:Tc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yo(4194308,4,Fd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yo(4,2,e,t)},useMemo:function(e,t){var n=Dt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gp.bind(null,xe,e),[r.memoizedState,e]},useRef:function(e){var t=Dt();return e={current:e},t.memoizedState=e},useState:Cc,useDebugValue:ti,useDeferredValue:function(e){return Dt().memoizedState=e},useTransition:function(){var e=Cc(!1),t=e[0];return e=xp.bind(null,e[1]),Dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xe,s=Dt();if(fe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),Pe===null)throw Error(z(349));On&30||Dd(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Tc(_d.bind(null,r,a,e),[e]),r.flags|=2048,uo(9,Ld.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Dt(),t=Pe.identifierPrefix;if(fe){var n=Bt,r=Ht;n=(r&~(1<<32-Et(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=io++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yp={readContext:yt,useCallback:Bd,useContext:yt,useEffect:ei,useImperativeHandle:Hd,useInsertionEffect:Wd,useLayoutEffect:zd,useMemo:Ud,useReducer:da,useRef:Ad,useState:function(){return da(co)},useDebugValue:ti,useDeferredValue:function(e){var t=wt();return Vd(t,Ee.memoizedState,e)},useTransition:function(){var e=da(co)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Pd,useSyncExternalStore:Rd,useId:Gd,unstable_isNewReconciler:!1},wp={readContext:yt,useCallback:Bd,useContext:yt,useEffect:ei,useImperativeHandle:Hd,useInsertionEffect:Wd,useLayoutEffect:zd,useMemo:Ud,useReducer:ha,useRef:Ad,useState:function(){return ha(co)},useDebugValue:ti,useDeferredValue:function(e){var t=wt();return Ee===null?t.memoizedState=e:Vd(t,Ee.memoizedState,e)},useTransition:function(){var e=ha(co)[0],t=wt().memoizedState;return[e,t]},useMutableSource:Pd,useSyncExternalStore:Rd,useId:Gd,unstable_isNewReconciler:!1};function St(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ps={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ke(),s=xn(e),a=Ut(r,s);a.payload=t,n!=null&&(a.callback=n),t=mn(e,a,s),t!==null&&(Mt(t,e,s,r),Vo(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ke(),s=xn(e),a=Ut(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=mn(e,a,s),t!==null&&(Mt(t,e,s,r),Vo(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ke(),r=xn(e),s=Ut(n,r);s.tag=2,t!=null&&(s.callback=t),t=mn(e,s,r),t!==null&&(Mt(t,e,r,n),Vo(t,e,r))}};function Ec(e,t,n,r,s,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!no(n,r)||!no(s,a):!0}function Qd(e,t,n){var r=!1,s=vn,a=t.contextType;return typeof a=="object"&&a!==null?a=yt(a):(s=nt(t)?Ln:Ue.current,r=t.contextTypes,a=(r=r!=null)?fr(e,s):vn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ps,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Mc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ps.enqueueReplaceState(t,t.state,null)}function el(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Yl(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=yt(a):(a=nt(t)?Ln:Ue.current,s.context=fr(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(qa(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ps.enqueueReplaceState(s,s.state,null),fs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function gr(e,t){try{var n="",r=t;do n+=Kf(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kp=typeof WeakMap=="function"?WeakMap:Map;function Jd(e,t,n){n=Ut(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bs||(bs=!0,dl=r),tl(e,t)},n}function Zd(e,t,n){n=Ut(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){tl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){tl(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Ic(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new kp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Op.bind(null,e,t,n),t.then(e,e))}function Pc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ut(-1,1),t.tag=2,mn(n,t,1))),n.lanes|=1),e)}var jp=Qt.ReactCurrentOwner,et=!1;function Xe(e,t,n,r){t.child=e===null?Td(t,null,n,r):pr(t,e.child,n,r)}function Dc(e,t,n,r,s){n=n.render;var a=t.ref;return ur(t,s),r=Zl(e,t,n,r,a,s),n=ql(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(fe&&n&&zl(t),t.flags|=1,Xe(e,t,r,s),t.child)}function Lc(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!ci(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,qd(e,t,a,r,s)):(e=Jo(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:no,n(l,r)&&e.ref===t.ref)return Kt(e,t,s)}return t.flags|=1,e=gn(a,r),e.ref=t.ref,e.return=t,t.child=e}function qd(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(no(a,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Kt(e,t,s)}return nl(e,t,n,r,s)}function eh(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(nr,at),at|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(nr,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ue(nr,at),at|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ue(nr,at),at|=r;return Xe(e,t,s,n),t.child}function th(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nl(e,t,n,r,s){var a=nt(n)?Ln:Ue.current;return a=fr(t,a),ur(t,s),n=Zl(e,t,n,r,a,s),r=ql(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(fe&&r&&zl(t),t.flags|=1,Xe(e,t,n,s),t.child)}function _c(e,t,n,r,s){if(nt(n)){var a=!0;is(t)}else a=!1;if(ur(t,s),t.stateNode===null)Xo(e,t),Qd(t,n,r),el(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var i=l.context,d=n.contextType;typeof d=="object"&&d!==null?d=yt(d):(d=nt(n)?Ln:Ue.current,d=fr(t,d));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||i!==d)&&Mc(t,l,r,d),on=!1;var x=t.memoizedState;l.state=x,fs(t,r,l,s),i=t.memoizedState,c!==r||x!==i||tt.current||on?(typeof h=="function"&&(qa(t,n,h,r),i=t.memoizedState),(c=on||Ec(t,n,c,r,x,i,d))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),l.props=r,l.state=i,l.context=d,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Md(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:St(t.type,c),l.props=d,g=t.pendingProps,x=l.context,i=n.contextType,typeof i=="object"&&i!==null?i=yt(i):(i=nt(n)?Ln:Ue.current,i=fr(t,i));var b=n.getDerivedStateFromProps;(h=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==g||x!==i)&&Mc(t,l,r,i),on=!1,x=t.memoizedState,l.state=x,fs(t,r,l,s);var y=t.memoizedState;c!==g||x!==y||tt.current||on?(typeof b=="function"&&(qa(t,n,b,r),y=t.memoizedState),(d=on||Ec(t,n,d,r,x,y,i)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,y,i),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,y,i)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),l.props=r,l.state=y,l.context=i,r=d):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return rl(e,t,n,r,a,s)}function rl(e,t,n,r,s,a){th(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&yc(t,n,!1),Kt(e,t,a);r=t.stateNode,jp.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=pr(t,e.child,null,a),t.child=pr(t,null,c,a)):Xe(e,t,c,a),t.memoizedState=r.state,s&&yc(t,n,!0),t.child}function nh(e){var t=e.stateNode;t.pendingContext?vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vc(e,t.context,!1),Xl(e,t.containerInfo)}function Oc(e,t,n,r,s){return mr(),Hl(s),t.flags|=256,Xe(e,t,n,r),t.child}var ol={dehydrated:null,treeContext:null,retryLane:0};function sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function rh(e,t,n){var r=t.pendingProps,s=pe.current,a=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ue(pe,s&1),e===null)return Ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ls(l,r,0,null),e=Dn(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=sl(n),t.memoizedState=ol,e):ni(t,l));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Np(e,t,l,r,c,s,n);if(a){a=r.fallback,l=t.mode,s=e.child,c=s.sibling;var i={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=gn(s,i),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=gn(c,a):(a=Dn(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?sl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ol,r}return a=e.child,e=a.sibling,r=gn(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ni(e,t){return t=Ls({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ro(e,t,n,r){return r!==null&&Hl(r),pr(t,e.child,null,n),e=ni(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Np(e,t,n,r,s,a,l){if(n)return t.flags&256?(t.flags&=-257,r=fa(Error(z(422))),Ro(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Ls({mode:"visible",children:r.children},s,0,null),a=Dn(a,s,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&pr(t,e.child,null,l),t.child.memoizedState=sl(l),t.memoizedState=ol,a);if(!(t.mode&1))return Ro(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(z(419)),r=fa(a,r,void 0),Ro(e,t,l,r)}if(c=(l&e.childLanes)!==0,et||c){if(r=Pe,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Xt(e,s),Mt(r,e,s,-1))}return ii(),r=fa(Error(z(421))),Ro(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=$p.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,lt=fn(s.nextSibling),it=t,fe=!0,Tt=null,e!==null&&(pt[xt++]=Ht,pt[xt++]=Bt,pt[xt++]=_n,Ht=e.id,Bt=e.overflow,_n=t),t=ni(t,r.children),t.flags|=4096,t)}function $c(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Za(e.return,t,n)}function ma(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function oh(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Xe(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$c(e,n,t);else if(e.tag===19)$c(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(pe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ms(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ma(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ms(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ma(t,!0,n,null,a);break;case"together":ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sp(e,t,n){switch(t.tag){case 3:nh(t),mr();break;case 5:Id(t);break;case 1:nt(t.type)&&is(t);break;case 4:Xl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ue(ds,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?rh(e,t,n):(ue(pe,pe.current&1),e=Kt(e,t,n),e!==null?e.sibling:null);ue(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return oh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,eh(e,t,n)}return Kt(e,t,n)}var sh,al,ah,lh;sh=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};al=function(){};ah=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Pn(Ot.current);var a=null;switch(n){case"input":s=Ea(e,s),r=Ea(e,r),a=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),a=[];break;case"textarea":s=Pa(e,s),r=Pa(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=as)}Da(n,r);var l;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Kr.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var i=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&i!==c&&(i!=null||c!=null))if(d==="style")if(c){for(l in c)!c.hasOwnProperty(l)||i&&i.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in i)i.hasOwnProperty(l)&&c[l]!==i[l]&&(n||(n={}),n[l]=i[l])}else n||(a||(a=[]),a.push(d,n)),n=i;else d==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,c=c?c.__html:void 0,i!=null&&c!==i&&(a=a||[]).push(d,i)):d==="children"?typeof i!="string"&&typeof i!="number"||(a=a||[]).push(d,""+i):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Kr.hasOwnProperty(d)?(i!=null&&d==="onScroll"&&de("scroll",e),a||c===i||(a=[])):(a=a||[]).push(d,i))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};lh=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pr(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cp(e,t,n){var r=t.pendingProps;switch(Fl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return nt(t.type)&&ls(),We(t),null;case 3:return r=t.stateNode,xr(),he(tt),he(Ue),Ql(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Io(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tt!==null&&(ml(Tt),Tt=null))),al(e,t),We(t),null;case 5:Kl(t);var s=Pn(lo.current);if(n=t.type,e!==null&&t.stateNode!=null)ah(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return We(t),null}if(e=Pn(Ot.current),Io(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Lt]=t,r[so]=a,e=(t.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(s=0;s<Wr.length;s++)de(Wr[s],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":Gi(r,a),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},de("invalid",r);break;case"textarea":Xi(r,a),de("invalid",r)}Da(n,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&Mo(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Mo(r.textContent,c,e),s=["children",""+c]):Kr.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&de("scroll",r)}switch(n){case"input":wo(r),Yi(r,a,!0);break;case"textarea":wo(r),Ki(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=as)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_u(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Lt]=t,e[so]=r,sh(e,t,!1,!1),t.stateNode=e;e:{switch(l=La(n,r),n){case"dialog":de("cancel",e),de("close",e),s=r;break;case"iframe":case"object":case"embed":de("load",e),s=r;break;case"video":case"audio":for(s=0;s<Wr.length;s++)de(Wr[s],e);s=r;break;case"source":de("error",e),s=r;break;case"img":case"image":case"link":de("error",e),de("load",e),s=r;break;case"details":de("toggle",e),s=r;break;case"input":Gi(e,r),s=Ea(e,r),de("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),de("invalid",e);break;case"textarea":Xi(e,r),s=Pa(e,r),de("invalid",e);break;default:s=r}Da(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var i=c[a];a==="style"?Au(e,i):a==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Ou(e,i)):a==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&Qr(e,i):typeof i=="number"&&Qr(e,""+i):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Kr.hasOwnProperty(a)?i!=null&&a==="onScroll"&&de("scroll",e):i!=null&&Cl(e,a,i,l))}switch(n){case"input":wo(e),Yi(e,r,!1);break;case"textarea":wo(e),Ki(e);break;case"option":r.value!=null&&e.setAttribute("value",""+bn(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ar(e,!!r.multiple,a,!1):r.defaultValue!=null&&ar(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=as)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return We(t),null;case 6:if(e&&t.stateNode!=null)lh(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=Pn(lo.current),Pn(Ot.current),Io(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lt]=t,(a=r.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:Mo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mo(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=t,t.stateNode=r}return We(t),null;case 13:if(he(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&lt!==null&&t.mode&1&&!(t.flags&128))Sd(),mr(),t.flags|=98560,a=!1;else if(a=Io(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(z(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Lt]=t}else mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;We(t),a=!1}else Tt!==null&&(ml(Tt),Tt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?Me===0&&(Me=3):ii())),t.updateQueue!==null&&(t.flags|=4),We(t),null);case 4:return xr(),al(e,t),e===null&&ro(t.stateNode.containerInfo),We(t),null;case 10:return Vl(t.type._context),We(t),null;case 17:return nt(t.type)&&ls(),We(t),null;case 19:if(he(pe),a=t.memoizedState,a===null)return We(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)Pr(a,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ms(e),l!==null){for(t.flags|=128,Pr(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(pe,pe.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ne()>br&&(t.flags|=128,r=!0,Pr(a,!1),t.lanes=4194304)}else{if(!r)if(e=ms(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!fe)return We(t),null}else 2*Ne()-a.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,r=!0,Pr(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ne(),t.sibling=null,n=pe.current,ue(pe,r?n&1|2:n&1),t):(We(t),null);case 22:case 23:return li(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?at&1073741824&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Tp(e,t){switch(Fl(t),t.tag){case 1:return nt(t.type)&&ls(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xr(),he(tt),he(Ue),Ql(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kl(t),null;case 13:if(he(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(pe),null;case 4:return xr(),null;case 10:return Vl(t.type._context),null;case 22:case 23:return li(),null;case 24:return null;default:return null}}var Do=!1,Be=!1,Ep=typeof WeakSet=="function"?WeakSet:Set,K=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(e,t,r)}else n.current=null}function ll(e,t,n){try{n()}catch(r){be(e,t,r)}}var Ac=!1;function Mp(e,t){if(Ua=rs,e=hd(),Wl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,c=-1,i=-1,d=0,h=0,g=e,x=null;t:for(;;){for(var b;g!==n||s!==0&&g.nodeType!==3||(c=l+s),g!==a||r!==0&&g.nodeType!==3||(i=l+r),g.nodeType===3&&(l+=g.nodeValue.length),(b=g.firstChild)!==null;)x=g,g=b;for(;;){if(g===e)break t;if(x===n&&++d===s&&(c=l),x===a&&++h===r&&(i=l),(b=g.nextSibling)!==null)break;g=x,x=g.parentNode}g=b}n=c===-1||i===-1?null:{start:c,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:e,selectionRange:n},rs=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var j=y.memoizedProps,C=y.memoizedState,f=t.stateNode,u=f.getSnapshotBeforeUpdate(t.elementType===t.type?j:St(t.type,j),C);f.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(v){be(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return y=Ac,Ac=!1,y}function Gr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&ll(t,n,a)}s=s.next}while(s!==r)}}function Rs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ih(e){var t=e.alternate;t!==null&&(e.alternate=null,ih(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[so],delete t[Xa],delete t[dp],delete t[hp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ch(e){return e.tag===5||e.tag===3||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ch(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=as));else if(r!==4&&(e=e.child,e!==null))for(cl(e,t,n),e=e.sibling;e!==null;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ul(e,t,n),e=e.sibling;e!==null;)ul(e,t,n),e=e.sibling}var _e=null,Ct=!1;function en(e,t,n){for(n=n.child;n!==null;)uh(e,t,n),n=n.sibling}function uh(e,t,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ns,n)}catch{}switch(n.tag){case 5:Be||tr(n,t);case 6:var r=_e,s=Ct;_e=null,en(e,t,n),_e=r,Ct=s,_e!==null&&(Ct?(e=_e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(Ct?(e=_e,n=n.stateNode,e.nodeType===8?la(e.parentNode,n):e.nodeType===1&&la(e,n),eo(e)):la(_e,n.stateNode));break;case 4:r=_e,s=Ct,_e=n.stateNode.containerInfo,Ct=!0,en(e,t,n),_e=r,Ct=s;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&ll(n,t,l),s=s.next}while(s!==r)}en(e,t,n);break;case 1:if(!Be&&(tr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){be(n,t,c)}en(e,t,n);break;case 21:en(e,t,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,en(e,t,n),Be=r):en(e,t,n);break;default:en(e,t,n)}}function zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ep),t.forEach(function(r){var s=Ap.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:_e=c.stateNode,Ct=!1;break e;case 3:_e=c.stateNode.containerInfo,Ct=!0;break e;case 4:_e=c.stateNode.containerInfo,Ct=!0;break e}c=c.return}if(_e===null)throw Error(z(160));uh(a,l,s),_e=null,Ct=!1;var i=s.alternate;i!==null&&(i.return=null),s.return=null}catch(d){be(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dh(t,e),t=t.sibling}function dh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jt(t,e),Rt(e),r&4){try{Gr(3,e,e.return),Rs(3,e)}catch(j){be(e,e.return,j)}try{Gr(5,e,e.return)}catch(j){be(e,e.return,j)}}break;case 1:jt(t,e),Rt(e),r&512&&n!==null&&tr(n,n.return);break;case 5:if(jt(t,e),Rt(e),r&512&&n!==null&&tr(n,n.return),e.flags&32){var s=e.stateNode;try{Qr(s,"")}catch(j){be(e,e.return,j)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,c=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Du(s,a),La(c,l);var d=La(c,a);for(l=0;l<i.length;l+=2){var h=i[l],g=i[l+1];h==="style"?Au(s,g):h==="dangerouslySetInnerHTML"?Ou(s,g):h==="children"?Qr(s,g):Cl(s,h,g,d)}switch(c){case"input":Ma(s,a);break;case"textarea":Lu(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?ar(s,!!a.multiple,b,!1):x!==!!a.multiple&&(a.defaultValue!=null?ar(s,!!a.multiple,a.defaultValue,!0):ar(s,!!a.multiple,a.multiple?[]:"",!1))}s[so]=a}catch(j){be(e,e.return,j)}}break;case 6:if(jt(t,e),Rt(e),r&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(j){be(e,e.return,j)}}break;case 3:if(jt(t,e),Rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{eo(t.containerInfo)}catch(j){be(e,e.return,j)}break;case 4:jt(t,e),Rt(e);break;case 13:jt(t,e),Rt(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(si=Ne())),r&4&&zc(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Be=(d=Be)||h,jt(t,e),Be=d):jt(t,e),Rt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(K=e,h=e.child;h!==null;){for(g=K=h;K!==null;){switch(x=K,b=x.child,x.tag){case 0:case 11:case 14:case 15:Gr(4,x,x.return);break;case 1:tr(x,x.return);var y=x.stateNode;if(typeof y.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(j){be(r,n,j)}}break;case 5:tr(x,x.return);break;case 22:if(x.memoizedState!==null){Hc(g);continue}}b!==null?(b.return=x,K=b):Hc(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=g.stateNode,i=g.memoizedProps.style,l=i!=null&&i.hasOwnProperty("display")?i.display:null,c.style.display=$u("display",l))}catch(j){be(e,e.return,j)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(j){be(e,e.return,j)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:jt(t,e),Rt(e),r&4&&zc(e);break;case 21:break;default:jt(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ch(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qr(s,""),r.flags&=-33);var a=Wc(e);ul(e,a,s);break;case 3:case 4:var l=r.stateNode.containerInfo,c=Wc(e);cl(e,c,l);break;default:throw Error(z(161))}}catch(i){be(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ip(e,t,n){K=e,hh(e)}function hh(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var s=K,a=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Do;if(!l){var c=s.alternate,i=c!==null&&c.memoizedState!==null||Be;c=Do;var d=Be;if(Do=l,(Be=i)&&!d)for(K=s;K!==null;)l=K,i=l.child,l.tag===22&&l.memoizedState!==null?Bc(s):i!==null?(i.return=l,K=i):Bc(s);for(;a!==null;)K=a,hh(a),a=a.sibling;K=s,Do=c,Be=d}Fc(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,K=a):Fc(e)}}function Fc(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Be||Rs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Be)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:St(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Sc(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Sc(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&eo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Be||t.flags&512&&il(t)}catch(x){be(t,t.return,x)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function Hc(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function Bc(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Rs(4,t)}catch(i){be(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(i){be(t,s,i)}}var a=t.return;try{il(t)}catch(i){be(t,a,i)}break;case 5:var l=t.return;try{il(t)}catch(i){be(t,l,i)}}}catch(i){be(t,t.return,i)}if(t===e){K=null;break}var c=t.sibling;if(c!==null){c.return=t.return,K=c;break}K=t.return}}var Pp=Math.ceil,gs=Qt.ReactCurrentDispatcher,ri=Qt.ReactCurrentOwner,bt=Qt.ReactCurrentBatchConfig,le=0,Pe=null,Te=null,Oe=0,at=0,nr=jn(0),Me=0,ho=null,$n=0,Ds=0,oi=0,Yr=null,qe=null,si=0,br=1/0,zt=null,bs=!1,dl=null,pn=null,Lo=!1,cn=null,vs=0,Xr=0,hl=null,Ko=-1,Qo=0;function Ke(){return le&6?Ne():Ko!==-1?Ko:Ko=Ne()}function xn(e){return e.mode&1?le&2&&Oe!==0?Oe&-Oe:mp.transition!==null?(Qo===0&&(Qo=Qu()),Qo):(e=ce,e!==0||(e=window.event,e=e===void 0?16:rd(e.type)),e):1}function Mt(e,t,n,r){if(50<Xr)throw Xr=0,hl=null,Error(z(185));mo(e,n,r),(!(le&2)||e!==Pe)&&(e===Pe&&(!(le&2)&&(Ds|=n),Me===4&&an(e,Oe)),rt(e,r),n===1&&le===0&&!(t.mode&1)&&(br=Ne()+500,Ms&&Nn()))}function rt(e,t){var n=e.callbackNode;mm(e,t);var r=ns(e,e===Pe?Oe:0);if(r===0)n!==null&&Zi(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zi(n),t===1)e.tag===0?fp(Uc.bind(null,e)):kd(Uc.bind(null,e)),cp(function(){!(le&6)&&Nn()}),n=null;else{switch(Ju(r)){case 1:n=Pl;break;case 4:n=Xu;break;case 16:n=ts;break;case 536870912:n=Ku;break;default:n=ts}n=yh(n,fh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function fh(e,t){if(Ko=-1,Qo=0,le&6)throw Error(z(327));var n=e.callbackNode;if(dr()&&e.callbackNode!==n)return null;var r=ns(e,e===Pe?Oe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ys(e,r);else{t=r;var s=le;le|=2;var a=ph();(Pe!==e||Oe!==t)&&(zt=null,br=Ne()+500,Rn(e,t));do try{Lp();break}catch(c){mh(e,c)}while(!0);Ul(),gs.current=a,le=s,Te!==null?t=0:(Pe=null,Oe=0,t=Me)}if(t!==0){if(t===2&&(s=Wa(e),s!==0&&(r=s,t=fl(e,s))),t===1)throw n=ho,Rn(e,0),an(e,r),rt(e,Ne()),n;if(t===6)an(e,r);else{if(s=e.current.alternate,!(r&30)&&!Rp(s)&&(t=ys(e,r),t===2&&(a=Wa(e),a!==0&&(r=a,t=fl(e,a))),t===1))throw n=ho,Rn(e,0),an(e,r),rt(e,Ne()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:Tn(e,qe,zt);break;case 3:if(an(e,r),(r&130023424)===r&&(t=si+500-Ne(),10<t)){if(ns(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ke(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ya(Tn.bind(null,e,qe,zt),t);break}Tn(e,qe,zt);break;case 4:if(an(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-Et(r);a=1<<l,l=t[l],l>s&&(s=l),r&=~a}if(r=s,r=Ne()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pp(r/1960))-r,10<r){e.timeoutHandle=Ya(Tn.bind(null,e,qe,zt),r);break}Tn(e,qe,zt);break;case 5:Tn(e,qe,zt);break;default:throw Error(z(329))}}}return rt(e,Ne()),e.callbackNode===n?fh.bind(null,e):null}function fl(e,t){var n=Yr;return e.current.memoizedState.isDehydrated&&(Rn(e,t).flags|=256),e=ys(e,t),e!==2&&(t=qe,qe=n,t!==null&&ml(t)),e}function ml(e){qe===null?qe=e:qe.push.apply(qe,e)}function Rp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Pt(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function an(e,t){for(t&=~oi,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Et(t),r=1<<n;e[n]=-1,t&=~r}}function Uc(e){if(le&6)throw Error(z(327));dr();var t=ns(e,0);if(!(t&1))return rt(e,Ne()),null;var n=ys(e,t);if(e.tag!==0&&n===2){var r=Wa(e);r!==0&&(t=r,n=fl(e,r))}if(n===1)throw n=ho,Rn(e,0),an(e,t),rt(e,Ne()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,qe,zt),rt(e,Ne()),null}function ai(e,t){var n=le;le|=1;try{return e(t)}finally{le=n,le===0&&(br=Ne()+500,Ms&&Nn())}}function An(e){cn!==null&&cn.tag===0&&!(le&6)&&dr();var t=le;le|=1;var n=bt.transition,r=ce;try{if(bt.transition=null,ce=1,e)return e()}finally{ce=r,bt.transition=n,le=t,!(le&6)&&Nn()}}function li(){at=nr.current,he(nr)}function Rn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ip(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Fl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ls();break;case 3:xr(),he(tt),he(Ue),Ql();break;case 5:Kl(r);break;case 4:xr();break;case 13:he(pe);break;case 19:he(pe);break;case 10:Vl(r.type._context);break;case 22:case 23:li()}n=n.return}if(Pe=e,Te=e=gn(e.current,null),Oe=at=t,Me=0,ho=null,oi=Ds=$n=0,qe=Yr=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=s,r.next=l}n.pending=r}In=null}return e}function mh(e,t){do{var n=Te;try{if(Ul(),Go.current=xs,ps){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ps=!1}if(On=0,Ie=Ee=xe=null,Vr=!1,io=0,ri.current=null,n===null||n.return===null){Me=1,ho=t,Te=null;break}e:{var a=e,l=n.return,c=n,i=t;if(t=Oe,c.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var d=i,h=c,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var x=h.alternate;x?(h.updateQueue=x.updateQueue,h.memoizedState=x.memoizedState,h.lanes=x.lanes):(h.updateQueue=null,h.memoizedState=null)}var b=Pc(l);if(b!==null){b.flags&=-257,Rc(b,l,c,a,t),b.mode&1&&Ic(a,d,t),t=b,i=d;var y=t.updateQueue;if(y===null){var j=new Set;j.add(i),t.updateQueue=j}else y.add(i);break e}else{if(!(t&1)){Ic(a,d,t),ii();break e}i=Error(z(426))}}else if(fe&&c.mode&1){var C=Pc(l);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Rc(C,l,c,a,t),Hl(gr(i,c));break e}}a=i=gr(i,c),Me!==4&&(Me=2),Yr===null?Yr=[a]:Yr.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var f=Jd(a,i,t);Nc(a,f);break e;case 1:c=i;var u=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(pn===null||!pn.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var v=Zd(a,c,t);Nc(a,v);break e}}a=a.return}while(a!==null)}gh(n)}catch(N){t=N,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function ph(){var e=gs.current;return gs.current=xs,e===null?xs:e}function ii(){(Me===0||Me===3||Me===2)&&(Me=4),Pe===null||!($n&268435455)&&!(Ds&268435455)||an(Pe,Oe)}function ys(e,t){var n=le;le|=2;var r=ph();(Pe!==e||Oe!==t)&&(zt=null,Rn(e,t));do try{Dp();break}catch(s){mh(e,s)}while(!0);if(Ul(),le=n,gs.current=r,Te!==null)throw Error(z(261));return Pe=null,Oe=0,Me}function Dp(){for(;Te!==null;)xh(Te)}function Lp(){for(;Te!==null&&!sm();)xh(Te)}function xh(e){var t=vh(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?gh(e):Te=t,ri.current=null}function gh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Tp(n,t),n!==null){n.flags&=32767,Te=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Te=null;return}}else if(n=Cp(n,t,at),n!==null){Te=n;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Me===0&&(Me=5)}function Tn(e,t,n){var r=ce,s=bt.transition;try{bt.transition=null,ce=1,_p(e,t,n,r)}finally{bt.transition=s,ce=r}return null}function _p(e,t,n,r){do dr();while(cn!==null);if(le&6)throw Error(z(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(pm(e,a),e===Pe&&(Te=Pe=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lo||(Lo=!0,yh(ts,function(){return dr(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=bt.transition,bt.transition=null;var l=ce;ce=1;var c=le;le|=4,ri.current=null,Mp(e,n),dh(n,e),tp(Va),rs=!!Ua,Va=Ua=null,e.current=n,Ip(n),am(),le=c,ce=l,bt.transition=a}else e.current=n;if(Lo&&(Lo=!1,cn=e,vs=s),a=e.pendingLanes,a===0&&(pn=null),cm(n.stateNode),rt(e,Ne()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bs)throw bs=!1,e=dl,dl=null,e;return vs&1&&e.tag!==0&&dr(),a=e.pendingLanes,a&1?e===hl?Xr++:(Xr=0,hl=e):Xr=0,Nn(),null}function dr(){if(cn!==null){var e=Ju(vs),t=bt.transition,n=ce;try{if(bt.transition=null,ce=16>e?16:e,cn===null)var r=!1;else{if(e=cn,cn=null,vs=0,le&6)throw Error(z(331));var s=le;for(le|=4,K=e.current;K!==null;){var a=K,l=a.child;if(K.flags&16){var c=a.deletions;if(c!==null){for(var i=0;i<c.length;i++){var d=c[i];for(K=d;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Gr(8,h,a)}var g=h.child;if(g!==null)g.return=h,K=g;else for(;K!==null;){h=K;var x=h.sibling,b=h.return;if(ih(h),h===d){K=null;break}if(x!==null){x.return=b,K=x;break}K=b}}}var y=a.alternate;if(y!==null){var j=y.child;if(j!==null){y.child=null;do{var C=j.sibling;j.sibling=null,j=C}while(j!==null)}}K=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,K=l;else e:for(;K!==null;){if(a=K,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gr(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,K=f;break e}K=a.return}}var u=e.current;for(K=u;K!==null;){l=K;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,K=p;else e:for(l=u;K!==null;){if(c=K,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Rs(9,c)}}catch(N){be(c,c.return,N)}if(c===l){K=null;break e}var v=c.sibling;if(v!==null){v.return=c.return,K=v;break e}K=c.return}}if(le=s,Nn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ns,e)}catch{}r=!0}return r}finally{ce=n,bt.transition=t}}return!1}function Vc(e,t,n){t=gr(n,t),t=Jd(e,t,1),e=mn(e,t,1),t=Ke(),e!==null&&(mo(e,1,t),rt(e,t))}function be(e,t,n){if(e.tag===3)Vc(e,e,n);else for(;t!==null;){if(t.tag===3){Vc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=gr(n,e),e=Zd(t,e,1),t=mn(t,e,1),e=Ke(),t!==null&&(mo(t,1,e),rt(t,e));break}}t=t.return}}function Op(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ke(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(Oe&n)===n&&(Me===4||Me===3&&(Oe&130023424)===Oe&&500>Ne()-si?Rn(e,0):oi|=n),rt(e,t)}function bh(e,t){t===0&&(e.mode&1?(t=No,No<<=1,!(No&130023424)&&(No=4194304)):t=1);var n=Ke();e=Xt(e,t),e!==null&&(mo(e,t,n),rt(e,n))}function $p(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bh(e,n)}function Ap(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),bh(e,n)}var vh;vh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Sp(e,t,n);et=!!(e.flags&131072)}else et=!1,fe&&t.flags&1048576&&jd(t,us,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xo(e,t),e=t.pendingProps;var s=fr(t,Ue.current);ur(t,n),s=Zl(null,t,r,e,s,n);var a=ql();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)?(a=!0,is(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yl(t),s.updater=Ps,t.stateNode=s,s._reactInternals=t,el(t,r,e,n),t=rl(null,t,r,!0,a,n)):(t.tag=0,fe&&a&&zl(t),Xe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=zp(r),e=St(r,e),s){case 0:t=nl(null,t,r,e,n);break e;case 1:t=_c(null,t,r,e,n);break e;case 11:t=Dc(null,t,r,e,n);break e;case 14:t=Lc(null,t,r,St(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),nl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),_c(e,t,r,s,n);case 3:e:{if(nh(t),e===null)throw Error(z(387));r=t.pendingProps,a=t.memoizedState,s=a.element,Md(e,t),fs(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=gr(Error(z(423)),t),t=Oc(e,t,r,n,s);break e}else if(r!==s){s=gr(Error(z(424)),t),t=Oc(e,t,r,n,s);break e}else for(lt=fn(t.stateNode.containerInfo.firstChild),it=t,fe=!0,Tt=null,n=Td(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mr(),r===s){t=Kt(e,t,n);break e}Xe(e,t,r,n)}t=t.child}return t;case 5:return Id(t),e===null&&Ja(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,l=s.children,Ga(r,s)?l=null:a!==null&&Ga(r,a)&&(t.flags|=32),th(e,t),Xe(e,t,l,n),t.child;case 6:return e===null&&Ja(t),null;case 13:return rh(e,t,n);case 4:return Xl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pr(t,null,r,n):Xe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Dc(e,t,r,s,n);case 7:return Xe(e,t,t.pendingProps,n),t.child;case 8:return Xe(e,t,t.pendingProps.children,n),t.child;case 12:return Xe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,l=s.value,ue(ds,r._currentValue),r._currentValue=l,a!==null)if(Pt(a.value,l)){if(a.children===s.children&&!tt.current){t=Kt(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var i=c.firstContext;i!==null;){if(i.context===r){if(a.tag===1){i=Ut(-1,n&-n),i.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?i.next=i:(i.next=h.next,h.next=i),d.pending=i}}a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Za(a.return,n,t),c.lanes|=n;break}i=i.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(z(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Za(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Xe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ur(t,n),s=yt(s),r=r(s),t.flags|=1,Xe(e,t,r,n),t.child;case 14:return r=t.type,s=St(r,t.pendingProps),s=St(r.type,s),Lc(e,t,r,s,n);case 15:return qd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:St(r,s),Xo(e,t),t.tag=1,nt(r)?(e=!0,is(t)):e=!1,ur(t,n),Qd(t,r,s),el(t,r,s,n),rl(null,t,r,!0,e,n);case 19:return oh(e,t,n);case 22:return eh(e,t,n)}throw Error(z(156,t.tag))};function yh(e,t){return Yu(e,t)}function Wp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,n,r){return new Wp(e,t,n,r)}function ci(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zp(e){if(typeof e=="function")return ci(e)?1:0;if(e!=null){if(e=e.$$typeof,e===El)return 11;if(e===Ml)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Jo(e,t,n,r,s,a){var l=2;if(r=e,typeof e=="function")ci(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Gn:return Dn(n.children,s,a,t);case Tl:l=8,s|=8;break;case Na:return e=gt(12,n,t,s|2),e.elementType=Na,e.lanes=a,e;case Sa:return e=gt(13,n,t,s),e.elementType=Sa,e.lanes=a,e;case Ca:return e=gt(19,n,t,s),e.elementType=Ca,e.lanes=a,e;case Iu:return Ls(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Eu:l=10;break e;case Mu:l=9;break e;case El:l=11;break e;case Ml:l=14;break e;case rn:l=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=gt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Dn(e,t,n,r){return e=gt(7,e,r,t),e.lanes=n,e}function Ls(e,t,n,r){return e=gt(22,e,r,t),e.elementType=Iu,e.lanes=n,e.stateNode={isHidden:!1},e}function pa(e,t,n){return e=gt(6,e,null,t),e.lanes=n,e}function xa(e,t,n){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qs(0),this.expirationTimes=Qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qs(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ui(e,t,n,r,s,a,l,c,i){return e=new Fp(e,t,n,c,i),t===1?(t=1,a===!0&&(t|=8)):t=0,a=gt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yl(a),e}function Hp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wh(e){if(!e)return vn;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(nt(n))return wd(e,n,t)}return t}function kh(e,t,n,r,s,a,l,c,i){return e=ui(n,r,!0,e,s,a,l,c,i),e.context=wh(null),n=e.current,r=Ke(),s=xn(n),a=Ut(r,s),a.callback=t??null,mn(n,a,s),e.current.lanes=s,mo(e,s,r),rt(e,r),e}function _s(e,t,n,r){var s=t.current,a=Ke(),l=xn(s);return n=wh(n),t.context===null?t.context=n:t.pendingContext=n,t=Ut(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mn(s,t,l),e!==null&&(Mt(e,s,l,a),Vo(e,s,l)),l}function ws(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function di(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}function Bp(){return null}var jh=typeof reportError=="function"?reportError:function(e){console.error(e)};function hi(e){this._internalRoot=e}Os.prototype.render=hi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));_s(e,t,null,null)};Os.prototype.unmount=hi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;An(function(){_s(null,e,null,null)}),t[Yt]=null}};function Os(e){this._internalRoot=e}Os.prototype.unstable_scheduleHydration=function(e){if(e){var t=ed();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&nd(e)}};function fi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yc(){}function Up(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=ws(l);a.call(d)}}var l=kh(t,r,e,0,null,!1,!1,"",Yc);return e._reactRootContainer=l,e[Yt]=l.current,ro(e.nodeType===8?e.parentNode:e),An(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=ws(i);c.call(d)}}var i=ui(e,0,!1,null,null,!1,!1,"",Yc);return e._reactRootContainer=i,e[Yt]=i.current,ro(e.nodeType===8?e.parentNode:e),An(function(){_s(t,i,n,r)}),i}function As(e,t,n,r,s){var a=n._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var c=s;s=function(){var i=ws(l);c.call(i)}}_s(t,l,e,s)}else l=Up(n,t,e,s,r);return ws(l)}Zu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ar(t.pendingLanes);n!==0&&(Rl(t,n|1),rt(t,Ne()),!(le&6)&&(br=Ne()+500,Nn()))}break;case 13:An(function(){var r=Xt(e,1);if(r!==null){var s=Ke();Mt(r,e,1,s)}}),di(e,1)}};Dl=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var n=Ke();Mt(t,e,134217728,n)}di(e,134217728)}};qu=function(e){if(e.tag===13){var t=xn(e),n=Xt(e,t);if(n!==null){var r=Ke();Mt(n,e,t,r)}di(e,t)}};ed=function(){return ce};td=function(e,t){var n=ce;try{return ce=e,t()}finally{ce=n}};Oa=function(e,t,n){switch(t){case"input":if(Ma(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Es(r);if(!s)throw Error(z(90));Ru(r),Ma(r,s)}}}break;case"textarea":Lu(e,n);break;case"select":t=n.value,t!=null&&ar(e,!!n.multiple,t,!1)}};Fu=ai;Hu=An;var Vp={usingClientEntryPoint:!1,Events:[xo,Qn,Es,Wu,zu,ai]},Rr={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gp={bundleType:Rr.bundleType,version:Rr.version,rendererPackageName:Rr.rendererPackageName,rendererConfig:Rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vu(e),e===null?null:e.stateNode},findFiberByHostInstance:Rr.findFiberByHostInstance||Bp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{Ns=_o.inject(Gp),_t=_o}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vp;dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fi(t))throw Error(z(200));return Hp(e,t,null,n)};dt.createRoot=function(e,t){if(!fi(e))throw Error(z(299));var n=!1,r="",s=jh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ui(e,1,!1,null,null,n,!1,r,s),e[Yt]=t.current,ro(e.nodeType===8?e.parentNode:e),new hi(t)};dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Vu(t),e=e===null?null:e.stateNode,e};dt.flushSync=function(e){return An(e)};dt.hydrate=function(e,t,n){if(!$s(t))throw Error(z(200));return As(null,e,t,!0,n)};dt.hydrateRoot=function(e,t,n){if(!fi(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",l=jh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=kh(t,null,e,1,n??null,s,!1,a,l),e[Yt]=t.current,ro(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Os(t)};dt.render=function(e,t,n){if(!$s(t))throw Error(z(200));return As(null,e,t,!1,n)};dt.unmountComponentAtNode=function(e){if(!$s(e))throw Error(z(40));return e._reactRootContainer?(An(function(){As(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1};dt.unstable_batchedUpdates=ai;dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$s(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return As(e,t,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function Nh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nh)}catch(e){console.error(e)}}Nh(),Nu.exports=dt;var Fn=Nu.exports,Xc=Fn;ka.createRoot=Xc.createRoot,ka.hydrateRoot=Xc.hydrateRoot;const Yp={},Kc=e=>{let t;const n=new Set,r=(h,g)=>{const x=typeof h=="function"?h(t):h;if(!Object.is(x,t)){const b=t;t=g??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(y=>y(t,b))}},s=()=>t,i={setState:r,getState:s,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Yp?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,s,i);return i},Xp=e=>e?Kc(e):Kc;var Sh={exports:{}},Ch={},Th={exports:{}},Eh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vr=E;function Kp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qp=typeof Object.is=="function"?Object.is:Kp,Jp=vr.useState,Zp=vr.useEffect,qp=vr.useLayoutEffect,ex=vr.useDebugValue;function tx(e,t){var n=t(),r=Jp({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return qp(function(){s.value=n,s.getSnapshot=t,ga(s)&&a({inst:s})},[e,n,t]),Zp(function(){return ga(s)&&a({inst:s}),e(function(){ga(s)&&a({inst:s})})},[e]),ex(n),n}function ga(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qp(e,n)}catch{return!0}}function nx(e,t){return t()}var rx=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nx:tx;Eh.useSyncExternalStore=vr.useSyncExternalStore!==void 0?vr.useSyncExternalStore:rx;Th.exports=Eh;var ox=Th.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ws=E,sx=ox;function ax(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lx=typeof Object.is=="function"?Object.is:ax,ix=sx.useSyncExternalStore,cx=Ws.useRef,ux=Ws.useEffect,dx=Ws.useMemo,hx=Ws.useDebugValue;Ch.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var a=cx(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=dx(function(){function i(b){if(!d){if(d=!0,h=b,b=r(b),s!==void 0&&l.hasValue){var y=l.value;if(s(y,b))return g=y}return g=b}if(y=g,lx(h,b))return y;var j=r(b);return s!==void 0&&s(y,j)?(h=b,y):(h=b,g=j)}var d=!1,h,g,x=n===void 0?null:n;return[function(){return i(t())},x===null?void 0:function(){return i(x())}]},[t,n,r,s]);var c=ix(e,a[0],a[1]);return ux(function(){l.hasValue=!0,l.value=c},[c]),hx(c),c};Sh.exports=Ch;var fx=Sh.exports;const mx=bl(fx),Mh={},{useDebugValue:px}=jl,{useSyncExternalStoreWithSelector:xx}=mx;let Qc=!1;const gx=e=>e;function bx(e,t=gx,n){(Mh?"production":void 0)!=="production"&&n&&!Qc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Qc=!0);const r=xx(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return px(r),r}const Jc=e=>{(Mh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Xp(e):e,n=(r,s)=>bx(t,r,s);return Object.assign(n,t),n},bo=e=>e?Jc(e):Jc;let Oo;const vx=new Uint8Array(16);function yx(){if(!Oo&&(Oo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oo(vx)}const Le=[];for(let e=0;e<256;++e)Le.push((e+256).toString(16).slice(1));function wx(e,t=0){return Le[e[t+0]]+Le[e[t+1]]+Le[e[t+2]]+Le[e[t+3]]+"-"+Le[e[t+4]]+Le[e[t+5]]+"-"+Le[e[t+6]]+Le[e[t+7]]+"-"+Le[e[t+8]]+Le[e[t+9]]+"-"+Le[e[t+10]]+Le[e[t+11]]+Le[e[t+12]]+Le[e[t+13]]+Le[e[t+14]]+Le[e[t+15]]}const kx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zc={randomUUID:kx};function He(e,t,n){if(Zc.randomUUID&&!e)return Zc.randomUUID();e=e||{};const r=e.random||(e.rng||yx)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,wx(r)}const jx=50,Nx=300,En=bo((e,t)=>({past:[],future:[],isUndoRedoing:!1,takeSnapshot:(n,r,s)=>{const a=t();if(a.isUndoRedoing)return;const l=Date.now(),c=a.past.filter(d=>d.characterId===n).pop();if(c&&l-c.timestamp<Nx)return;const i={characterId:n,character:JSON.parse(JSON.stringify(r)),actionDescription:s,timestamp:l};e(d=>{const h=[...d.past,i];return h.length>jx&&h.shift(),{past:h,future:d.future.filter(g=>g.characterId!==n)}})},undo:(n,r)=>{const a=t().past.filter(i=>i.characterId===n);if(a.length===0)return null;const l=a[a.length-1],c={characterId:n,character:JSON.parse(JSON.stringify(r)),actionDescription:"redo point",timestamp:Date.now()};return e(i=>({past:i.past.filter((d,h,g)=>!(d.characterId===n&&g.slice(h+1).filter(b=>b.characterId===n).length===0)),future:[...i.future,c]})),l.character},redo:(n,r)=>{const a=t().future.filter(i=>i.characterId===n);if(a.length===0)return null;const l=a[a.length-1],c={characterId:n,character:JSON.parse(JSON.stringify(r)),actionDescription:"undo point",timestamp:Date.now()};return e(i=>({past:[...i.past,c],future:i.future.filter((d,h,g)=>!(d.characterId===n&&g.slice(h+1).filter(b=>b.characterId===n).length===0))})),l.character},canUndo:n=>t().past.some(s=>s.characterId===n),canRedo:n=>t().future.some(s=>s.characterId===n),clearHistory:n=>{e(r=>({past:r.past.filter(s=>s.characterId!==n),future:r.future.filter(s=>s.characterId!==n)}))},clearAllHistory:()=>{e({past:[],future:[]})},setIsUndoRedoing:n=>{e({isUndoRedoing:n})}}));function Sn(e){const t=e.sheets.find(n=>n.id===e.activeSheetId);return(t==null?void 0:t.widgets)||[]}function ze(e,t){return{...e,sheets:e.sheets.map(n=>n.id===e.activeSheetId?{...n,widgets:t(n.widgets)}:n)}}function qc(e){var a;const t=new Map,n=new Map,r=new Map;e.sheets.forEach(l=>{t.set(l.id,He()),l.widgets.forEach(c=>{n.set(c.id,He()),c.groupId&&!r.has(c.groupId)&&r.set(c.groupId,He())})});const s=e.sheets.map(l=>({...l,id:t.get(l.id),widgets:l.widgets.map(c=>{var i;return{...c,id:n.get(c.id),groupId:c.groupId?r.get(c.groupId):void 0,attachedTo:(i=c.attachedTo)==null?void 0:i.map(d=>n.get(d)||d)}})}));return{sheets:s,activeSheetId:t.get(e.activeSheetId)||((a=s[0])==null?void 0:a.id)}}function Sx(e){if(e.sheets&&e.sheets.length>0)return e;const t={id:He(),name:"Main",widgets:e.widgets||[]};return{id:e.id,name:e.name,theme:e.theme,sheets:[t],activeSheetId:t.id}}const G=bo((e,t)=>{const n=(()=>{try{const c=localStorage.getItem("ucs:store");if(!c)return null;const i=JSON.parse(c);return{characters:i.characters.map(Sx),activeCharacterId:i.activeCharacterId,mode:i.mode}}catch(c){return console.error("Failed to load persisted store",c),null}})(),r=(n==null?void 0:n.characters)??[],s=(n==null?void 0:n.activeCharacterId)??null,a=(n==null?void 0:n.mode)??"play";return{characters:r,activeCharacterId:s,mode:a,editingWidgetId:null,selectedWidgetId:null,createCharacter:c=>e(i=>{const d={id:He(),name:"Main",widgets:[]},h={id:He(),name:c,sheets:[d],activeSheetId:d.id};return{characters:[...i.characters,h],activeCharacterId:h.id,mode:i.mode==="vertical"?"vertical":"play"}}),createCharacterFromPreset:(c,i)=>e(d=>{const{sheets:h,activeSheetId:g}=qc(c),x={id:He(),name:i||c.name,theme:c.theme,sheets:h,activeSheetId:g};return{characters:[...d.characters,x],activeCharacterId:x.id,mode:d.mode==="vertical"?"vertical":"play"}}),importCharacter:c=>e(i=>{const{sheets:d,activeSheetId:h}=qc(c),g={...c,id:He(),name:c.name,sheets:d,activeSheetId:h};return{characters:[...i.characters,g]}}),selectCharacter:c=>e(i=>({activeCharacterId:c,mode:i.mode==="vertical"?"vertical":"play"})),deleteCharacter:c=>e(i=>({characters:i.characters.filter(d=>d.id!==c),activeCharacterId:i.activeCharacterId===c?null:i.activeCharacterId})),updateCharacterName:(c,i)=>e(d=>({characters:d.characters.map(h=>h.id===c?{...h,name:i}:h)})),updateCharacterTheme:(c,i)=>e(d=>({characters:d.characters.map(h=>h.id===c?{...h,theme:i}:h)})),setMode:c=>e({mode:c,selectedWidgetId:null}),setEditingWidgetId:c=>e({editingWidgetId:c}),setSelectedWidgetId:c=>e({selectedWidgetId:c}),createSheet:c=>e(i=>{if(!i.activeCharacterId)return i;const d={id:He(),name:c,widgets:[]};return{characters:i.characters.map(h=>h.id===i.activeCharacterId?{...h,sheets:[...h.sheets,d],activeSheetId:d.id}:h)}}),selectSheet:c=>e(i=>i.activeCharacterId?{characters:i.characters.map(d=>d.id===i.activeCharacterId?{...d,activeSheetId:c}:d)}:i),deleteSheet:c=>{t()._takeSnapshot("Delete sheet"),e(i=>i.activeCharacterId?{characters:i.characters.map(d=>{if(d.id!==i.activeCharacterId||d.sheets.length<=1)return d;const h=d.sheets.filter(x=>x.id!==c),g=d.activeSheetId===c?h[0].id:d.activeSheetId;return{...d,sheets:h,activeSheetId:g}})}:i)},renameSheet:(c,i)=>e(d=>d.activeCharacterId?{characters:d.characters.map(h=>h.id!==d.activeCharacterId?h:{...h,sheets:h.sheets.map(g=>g.id===c?{...g,name:i}:g)})}:d),addWidget:(c,i,d)=>{t()._takeSnapshot("Add widget"),e(h=>{if(!h.activeCharacterId)return h;const g=h.characters.find(v=>v.id===h.activeCharacterId);if(!g)return h;const x=Sn(g);let b=i,y=d;const j=10,C=200,f=120,u=20;if(x.length===0)b=Math.round(400/j)*j,y=Math.round(300/j)*j;else{const v=Math.min(...x.map(S=>S.x)),N=Math.max(...x.map(S=>S.x+(S.w||C))),m=Math.min(...x.map(S=>S.y)),w=Math.max(...x.map(S=>S.y+(S.h||f)));b=Math.round((N+u)/j)*j,y=Math.round(m/j)*j,b>1500&&(b=Math.round(v/j)*j,y=Math.round((w+u)/j)*j)}const p={id:He(),type:c,x:b,y,w:C,h:f,data:{label:"New Widget",value:0,items:[],text:""}};return{characters:h.characters.map(v=>v.id===h.activeCharacterId?ze(v,N=>[...N,p]):v)}})},cloneWidget:c=>{t()._takeSnapshot("Clone widget"),e(i=>{if(!i.activeCharacterId)return i;const d=i.characters.find(y=>y.id===i.activeCharacterId);if(!d)return i;const g=Sn(d).find(y=>y.id===c);if(!g)return i;const x=30,b={id:He(),type:g.type,x:g.x+x,y:g.y+x,w:g.w,h:g.h,data:JSON.parse(JSON.stringify(g.data))};return{characters:i.characters.map(y=>y.id===i.activeCharacterId?ze(y,j=>[...j,b]):y)}})},addWidgetFromTemplate:c=>{t()._takeSnapshot("Add widget from template"),e(i=>{if(!i.activeCharacterId)return i;const d=i.characters.find(C=>C.id===i.activeCharacterId);if(!d)return i;const h=Sn(d);let g=100,x=100;const b=10,y=20;if(h.length===0)g=Math.round(400/b)*b,x=Math.round(300/b)*b;else{const C=Math.min(...h.map(v=>v.x)),f=Math.max(...h.map(v=>v.x+(v.w||200))),u=Math.min(...h.map(v=>v.y)),p=Math.max(...h.map(v=>v.y+(v.h||120)));g=Math.round((f+y)/b)*b,x=Math.round(u/b)*b,g>1500&&(g=Math.round(C/b)*b,x=Math.round((p+y)/b)*b)}const j={id:He(),type:c.type,x:g,y:x,w:c.w||200,h:c.h||120,data:JSON.parse(JSON.stringify(c.data))};return{characters:i.characters.map(C=>C.id===i.activeCharacterId?ze(C,f=>[...f,j]):C)}})},updateWidgetPosition:(c,i,d)=>{t()._takeSnapshot("Move widget"),e(h=>({characters:h.characters.map(g=>g.id===h.activeCharacterId?ze(g,x=>x.map(b=>b.id===c?{...b,x:i,y:d}:b)):g)}))},updateWidgetPositionNoSnapshot:(c,i,d)=>{e(h=>({characters:h.characters.map(g=>g.id===h.activeCharacterId?ze(g,x=>x.map(b=>b.id===c?{...b,x:i,y:d}:b)):g)}))},updateWidgetSize:(c,i,d)=>e(h=>({characters:h.characters.map(g=>g.id===h.activeCharacterId?ze(g,x=>x.map(b=>b.id===c?{...b,w:i,h:d}:b)):g)})),updateWidgetData:(c,i)=>{t()._takeSnapshot("Update widget"),e(d=>({characters:d.characters.map(h=>h.id===d.activeCharacterId?ze(h,g=>g.map(x=>x.id===c?{...x,data:{...x.data,...i}}:x)):h)}))},removeWidget:c=>{t()._takeSnapshot("Delete widget"),e(i=>({characters:i.characters.map(d=>d.id===i.activeCharacterId?ze(d,h=>h.filter(g=>g.id!==c)):d)}))},reorderWidget:(c,i)=>{t()._takeSnapshot("Reorder widget"),e(d=>d.activeCharacterId?{characters:d.characters.map(h=>h.id!==d.activeCharacterId?h:ze(h,g=>{const x=g.findIndex(j=>j.id===c);if(x===-1)return g;const b=[...g],[y]=b.splice(x,1);return b.splice(i,0,y),b}))}:d)},attachWidgets:(c,i)=>{t()._takeSnapshot("Attach widgets"),e(d=>d.activeCharacterId?{characters:d.characters.map(h=>{var j;if(h.id!==d.activeCharacterId)return h;const g=Sn(h),x=g.find(C=>C.id===c),b=g.find(C=>C.id===i);if(!x||!b||(j=x.attachedTo)!=null&&j.includes(i))return h;let y;if(x.groupId&&b.groupId&&x.groupId!==b.groupId){y=x.groupId;const C=b.groupId;return ze(h,f=>f.map(u=>u.groupId===C?{...u,groupId:y}:u.id===c?{...u,attachedTo:[...u.attachedTo||[],i]}:u.id===i?{...u,attachedTo:[...u.attachedTo||[],c]}:u))}else x.groupId?y=x.groupId:b.groupId?y=b.groupId:y=He();return ze(h,C=>C.map(f=>f.id===c?{...f,groupId:y,attachedTo:[...f.attachedTo||[],i]}:f.id===i?{...f,groupId:y,attachedTo:[...f.attachedTo||[],c]}:f))})}:d)},detachWidgets:(c,i)=>{t()._takeSnapshot("Detach widget"),e(d=>d.activeCharacterId?{characters:d.characters.map(h=>{var m;if(h.id!==d.activeCharacterId)return h;const g=Sn(h),x=g.find(w=>w.id===c);if(!x||!x.groupId)return h;const b=x.groupId,y=x.attachedTo||[];let j=g.map(w=>w.id===c?{...w,groupId:void 0,attachedTo:void 0}:y.includes(w.id)?{...w,attachedTo:(w.attachedTo||[]).filter(S=>S!==c)}:w);const C=j.filter(w=>w.groupId===b).map(w=>w.id);if(C.length===0)return ze(h,()=>j);const f=new Map;for(const w of C){const S=j.find(T=>T.id===w);f.set(w,((m=S==null?void 0:S.attachedTo)==null?void 0:m.filter(T=>C.includes(T)))||[])}const u=new Set,p=[];for(const w of C){if(u.has(w))continue;const S=[],T=[w];for(;T.length>0;){const k=T.shift();if(u.has(k))continue;u.add(k),S.push(k);const D=f.get(k)||[];for(const A of D)u.has(A)||T.push(A)}p.push(S)}const v=p.map((w,S)=>{if(!(w.length<=1))return S===0&&p.filter(T=>T.length>1).length<=1?b:He()}),N=new Map;return p.forEach((w,S)=>{for(const T of w)N.set(T,v[S])}),j=j.map(w=>{if(N.has(w.id)){const S=N.get(w.id);return S?{...w,groupId:S}:{...w,groupId:void 0,attachedTo:void 0}}return w}),ze(h,()=>j)})}:d)},getWidgetsInGroup:c=>{const i=G.getState(),d=i.characters.find(g=>g.id===i.activeCharacterId);return d?Sn(d).filter(g=>g.groupId===c):[]},moveWidgetGroup:(c,i,d)=>{t()._takeSnapshot("Move widget"),e(h=>{if(!h.activeCharacterId)return h;const g=h.characters.find(j=>j.id===h.activeCharacterId);if(!g)return h;const b=Sn(g).find(j=>j.id===c);if(!b||!b.groupId)return{characters:h.characters.map(j=>j.id===h.activeCharacterId?ze(j,C=>C.map(f=>f.id===c?{...f,x:f.x+i,y:f.y+d}:f)):j)};const y=b.groupId;return{characters:h.characters.map(j=>j.id===h.activeCharacterId?ze(j,C=>C.map(f=>f.groupId===y?{...f,x:f.x+i,y:f.y+d}:f)):j)}})},performRest:c=>{t()._takeSnapshot("Rest"),e(i=>{if(!i.activeCharacterId)return i;const{healAmount:d,clearConditions:h,resetSpellSlots:g,passTimeSeconds:x}=c;return{characters:i.characters.map(b=>b.id===i.activeCharacterId?ze(b,y=>y.map(j=>{if(j.type==="HEALTH_BAR"&&d!==void 0){const C=j.data.currentValue??0,f=j.data.maxValue??10;let u;return d==="full"?u=f:u=Math.min(f,C+d),{...j,data:{...j.data,currentValue:u}}}if(j.type==="TOGGLE_GROUP"&&h){const f=(j.data.toggleItems||[]).map(u=>({...u,active:!1}));return{...j,data:{...j.data,toggleItems:f}}}if(j.type==="SPELL_SLOT"&&g){const f=(j.data.spellLevels||[]).map(u=>({...u,used:0}));return{...j,data:{...j.data,spellLevels:f}}}if(j.type==="TIME_TRACKER"&&x!==void 0&&x>0){const C=j.data.timedEffects||[],f=j.data.roundMode||!1,u=x,p=C.map(v=>({...v,remainingSeconds:Math.max(0,v.remainingSeconds-u)}));return{...j,data:{...j.data,timedEffects:p}}}return j})):b)}})},_takeSnapshot:c=>{const i=t();if(!i.activeCharacterId)return;const d=i.characters.find(h=>h.id===i.activeCharacterId);d&&En.getState().takeSnapshot(i.activeCharacterId,d,c)},_replaceCharacter:(c,i)=>e(d=>({characters:d.characters.map(h=>h.id===c?i:h)})),undo:()=>{const c=t();if(!c.activeCharacterId)return;const i=c.characters.find(g=>g.id===c.activeCharacterId);if(!i)return;const d=En.getState();d.setIsUndoRedoing(!0);const h=d.undo(c.activeCharacterId,i);h&&t()._replaceCharacter(c.activeCharacterId,h),d.setIsUndoRedoing(!1)},redo:()=>{const c=t();if(!c.activeCharacterId)return;const i=c.characters.find(g=>g.id===c.activeCharacterId);if(!i)return;const d=En.getState();d.setIsUndoRedoing(!0);const h=d.redo(c.activeCharacterId,i);h&&t()._replaceCharacter(c.activeCharacterId,h),d.setIsUndoRedoing(!1)},canUndo:()=>{const c=t();return c.activeCharacterId?En.getState().canUndo(c.activeCharacterId):!1},canRedo:()=>{const c=t();return c.activeCharacterId?En.getState().canRedo(c.activeCharacterId):!1}}});{let e=null;G.subscribe(()=>{e&&window.clearTimeout(e),e=window.setTimeout(()=>{try{const t=G.getState(),n={characters:t.characters,activeCharacterId:t.activeCharacterId,mode:t.mode};localStorage.setItem("ucs:store",JSON.stringify(n))}catch(t){console.error("Failed to persist store",t)}},150)})}const Ih="/UniversalCharacterSheet/assets/paper-BEAu-nxw.jpg",Ph="/UniversalCharacterSheet/assets/paper_2-CH9Rkn63.jpg",Rh="/UniversalCharacterSheet/assets/paper_3-kMWVO9hc.jpg",Dh="/UniversalCharacterSheet/assets/wood-CRUr5oIk.jpg",Lh="/UniversalCharacterSheet/assets/arcs-D3YvlcmY.jpg",_h="/UniversalCharacterSheet/assets/circuit_board-DqNmZm31.jpg",Oh="/UniversalCharacterSheet/assets/cloth-DQ1UH5v9.jpg",$h="/UniversalCharacterSheet/assets/fire-_GFizR-C.jpg",Ah="/UniversalCharacterSheet/assets/fog-DRMbxaR3.jpg",Wh="/UniversalCharacterSheet/assets/gears-DmesK-TK.jpg",zh="/UniversalCharacterSheet/assets/glyphs-JJHDyMLG.jpg",Fh="/UniversalCharacterSheet/assets/leaf-9JTNOToz.jpg",Hh="/UniversalCharacterSheet/assets/leather-gh3fCG9P.jpg",Bh="/UniversalCharacterSheet/assets/metal-IUU3jIEo.jpg",Uh="/UniversalCharacterSheet/assets/smoke-j_Zmmo3C.jpg",Vh="/UniversalCharacterSheet/assets/snow-DoqVdj98.jpg",Gh="/UniversalCharacterSheet/assets/soil-DOAx3uxo.jpg",Yh="/UniversalCharacterSheet/assets/solar-BaBFVAiA.jpg",Xh="/UniversalCharacterSheet/assets/stars-DnEgGp3s.jpg",Kh="/UniversalCharacterSheet/assets/stone-tbZqLald.jpg",Qh="/UniversalCharacterSheet/assets/tech-BxDJg7Fw.jpg",Jh="/UniversalCharacterSheet/assets/water-CwLTClza.jpg",Zh="/UniversalCharacterSheet/assets/waves-C9RfNNeY.jpg",rr={none:"none",paper:`url(${Ih})`,crumpledPaper:`url(${Ph})`,graphPaper:`url(${Rh})`,wood:`url(${Dh})`,arcs:`url(${Lh})`,circuitBoard:`url(${_h})`,cloth:`url(${Oh})`,fire:`url(${$h})`,fog:`url(${Ah})`,gears:`url(${Wh})`,glyphs:`url(${zh})`,leaf:`url(${Fh})`,leather:`url(${Hh})`,metal:`url(${Bh})`,smoke:`url(${Uh})`,snow:`url(${Vh})`,soil:`url(${Gh})`,solar:`url(${Yh})`,stars:`url(${Xh})`,stone:`url(${Kh})`,tech:`url(${Qh})`,water:`url(${Jh})`,waves:`url(${Zh})`},Vt={paper:Ih,crumpledPaper:Ph,graphPaper:Rh,wood:Dh,arcs:Lh,circuitBoard:_h,cloth:Oh,fire:$h,fog:Ah,gears:Wh,glyphs:zh,leaf:Fh,leather:Hh,metal:Bh,smoke:Uh,snow:Vh,soil:Gh,solar:Yh,stars:Xh,stone:Kh,tech:Qh,water:Jh,waves:Zh};function vt(e){return e in Vt}function zs(e){return yn.find(t=>t.id===e)}const Cx=[{value:"none",label:"None"},{value:"paper",label:"Paper"},{value:"crumpledPaper",label:"Crumpled Paper"},{value:"graphPaper",label:"Graph Paper"},{value:"wood",label:"Wood"},{value:"leather",label:"Leather"},{value:"cloth",label:"Cloth"},{value:"stone",label:"Stone"},{value:"metal",label:"Metal"},{value:"soil",label:"Soil"},{value:"leaf",label:"Leaf"},{value:"water",label:"Water"},{value:"waves",label:"Waves"},{value:"snow",label:"Snow"},{value:"fog",label:"Fog"},{value:"fire",label:"Fire"},{value:"smoke",label:"Smoke"},{value:"stars",label:"Stars"},{value:"solar",label:"Solar"},{value:"tech",label:"Technology"},{value:"circuitBoard",label:"Circuit Board"},{value:"gears",label:"Gears"},{value:"arcs",label:"Arcs"},{value:"glyphs",label:"Glyphs"}],Tx=[{value:"hard",label:"Hard Offset"},{value:"soft",label:"Soft Drop"},{value:"glow",label:"Glow"},{value:"inset",label:"Inset"},{value:"layered",label:"Layered"},{value:"none",label:"None"}],Ex=[{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"},{value:"double",label:"Double"}];function mi(e,t,n=.15){return e==="none"||!e||vt(e)?"none":rr[e]||rr.none}function pi(e,t="transparent"){switch(e){case"hard":return"4px 4px 0 0 var(--color-shadow)";case"soft":return"0 4px 12px var(--color-shadow)";case"glow":return`0 0 12px ${t}, 0 0 24px var(--color-shadow)`;case"inset":return"inset 0 2px 8px var(--color-shadow)";case"layered":return"2px 2px 0 var(--color-border), 4px 4px 8px var(--color-shadow)";case"none":return"none";default:return"4px 4px 0 0 var(--color-shadow)"}}const yn=[{id:"default",name:"Classic",icon:"",description:"Clean black & white with hard shadows",colors:{background:"#e5e7eb",paper:"#ffffff",ink:"#000000",accent:"#000000",accentHover:"#374151",border:"#000000",shadow:"#000000",muted:"#6b7280",glow:"transparent"},fonts:{heading:'"Courier New", Courier, monospace',body:'"Courier New", Courier, monospace'},borderRadius:"0px",buttonRadius:"0px",borderWidth:"2px",shadowStyle:"4px 4px 0 0 var(--color-shadow)",cardTexture:rr.none,borderStyle:"solid"},{id:"pen-and-paper",name:"Pen & Paper",icon:"",description:"Handwritten style with lined paper feel",colors:{background:"#d7d7d7",paper:"#d7d7d7",ink:"#2c3e50",accent:"#8b4513",accentHover:"#a0522d",border:"#8b7355",shadow:"#8b7355",muted:"#7f8c8d",glow:"transparent"},fonts:{heading:'"Comic Sans MS", "Segoe Print", cursive',body:'"Segoe Print", "Comic Sans MS", cursive'},borderRadius:"2px",buttonRadius:"2px",borderWidth:"1px",shadowStyle:"2px 2px 0 0 var(--color-shadow)",cardTexture:"graphPaper",textureOpacity:1,borderStyle:"solid"},{id:"medieval",name:"Medieval",icon:"",description:"Aged parchment with ornate styling",colors:{background:"#3d2914",paper:"#d4c4a8",ink:"#df7d57ff",accent:"#8b0000",accentHover:"#a52a2a",border:"#5c4033",shadow:"#2c1810",muted:"#6b5344",glow:"transparent"},fonts:{heading:'"Times New Roman", "Palatino Linotype", serif',body:'"Palatino Linotype", "Book Antiqua", serif'},borderRadius:"0px",buttonRadius:"0px",borderWidth:"3px",shadowStyle:"3px 3px 6px 0 var(--color-shadow)",cardTexture:"paper",textureOpacity:1,borderStyle:"double"},{id:"scifi",name:"Sci-Fi",icon:"",description:"Futuristic holographic interface",colors:{background:"#0a0a1a",paper:"#141428",ink:"#00ffff",accent:"#00ff88",accentHover:"#00cc6a",border:"#00ffff",shadow:"#00ffff40",muted:"#4a9eff",glow:"#008cffff"},fonts:{heading:'"Orbitron", "Segoe UI", sans-serif',body:'"Roboto Mono", "Consolas", monospace'},borderRadius:"4px",buttonRadius:"4px",borderWidth:"1px",shadowStyle:"0 0 8px var(--color-glow), 0 0 16px var(--color-shadow)",cardTexture:"circuitBoard",textureOpacity:.4,borderStyle:"solid"},{id:"classic-dark",name:"Classic Dark",icon:"",description:"Traditional dark theme with warm accents",colors:{background:"#1a1a1a",paper:"#2d2d2d",ink:"#e0e0e0",accent:"#d4a574",accentHover:"#c49464",border:"#404040",shadow:"#00000080",muted:"#888888",glow:"transparent"},fonts:{heading:'"Georgia", "Times New Roman", serif',body:'"Georgia", "Times New Roman", serif'},borderRadius:"4px",buttonRadius:"4px",borderWidth:"1px",shadowStyle:"0 4px 12px var(--color-shadow)",cardTexture:rr.none,borderStyle:"solid"},{id:"modern-dark",name:"Modern Dark",icon:"",description:"Sleek contemporary dark interface",colors:{background:"#0f172a",paper:"#1e293b",ink:"#f1f5f9",accent:"#3b82f6",accentHover:"#2563eb",border:"#334155",shadow:"#00000060",muted:"#94a3b8",glow:"#3b82f6"},fonts:{heading:'"Inter", "Segoe UI", sans-serif',body:'"Inter", "Segoe UI", sans-serif'},borderRadius:"8px",buttonRadius:"8px",borderWidth:"1px",shadowStyle:"0 4px 20px var(--color-shadow)",cardTexture:rr.darkGrain,borderStyle:"solid"},{id:"high-magic",name:"High Magic",icon:"",description:"Arcane glyphs and mystical energy",colors:{background:"#1a0a2e",paper:"#2d1b4e",ink:"#e8d5ff",accent:"#bf7fff",accentHover:"#9966cc",border:"#bf7fff",shadow:"#bf7fff40",muted:"#9b8ab8",glow:"#bf7fff"},fonts:{heading:'"Cinzel", "Times New Roman", serif',body:'"Crimson Text", "Georgia", serif'},borderRadius:"8px",buttonRadius:"8px",borderWidth:"2px",shadowStyle:"0 0 12px var(--color-glow), 0 0 24px var(--color-shadow)",cardTexture:"arcs",textureOpacity:.15,borderStyle:"solid"},{id:"necrotic",name:"Necrotic",icon:"",description:"Dark and sinister undead aesthetic",colors:{background:"#0d0d0d",paper:"#1a1a1a",ink:"#c8c8c8",accent:"#4a0",accentHover:"#5b0",border:"#333333",shadow:"#00000080",muted:"#666666",glow:"#4a0"},fonts:{heading:'"Copperplate", "Copperplate Gothic Light", "Impact", fantasy',body:'"Courier New", monospace'},borderRadius:"0px",buttonRadius:"0px",borderWidth:"1px",shadowStyle:"0 0 10px var(--color-shadow), inset 0 0 30px rgba(74, 170, 0, 0.05)",cardTexture:"smoke",textureOpacity:.6,borderStyle:"solid"},{id:"modern",name:"Modern",icon:"",description:"Sleek contemporary design",colors:{background:"#f8fafc",paper:"#ffffff",ink:"#1e293b",accent:"#3b82f6",accentHover:"#2563eb",border:"#e2e8f0",shadow:"#64748b20",muted:"#64748b",glow:"transparent"},fonts:{heading:'"Inter", "Segoe UI", sans-serif',body:'"Inter", "Segoe UI", sans-serif'},borderRadius:"8px",buttonRadius:"8px",borderWidth:"1px",shadowStyle:"0 4px 16px var(--color-shadow)",cardTexture:rr.none,borderStyle:"solid"},{id:"steampunk",name:"Steampunk",icon:"",description:"Victorian brass and gears",colors:{background:"#2a1f1a",paper:"#3d2b1f",ink:"#d4a574",accent:"#cd7f32",accentHover:"#b8860b",border:"#cd7f32",shadow:"#00000060",muted:"#8b7355",glow:"#cd7f32"},fonts:{heading:'"Spectral SC", "Georgia", serif',body:'"Cutive Mono", "Courier New", monospace'},borderRadius:"2px",buttonRadius:"2px",borderWidth:"2px",shadowStyle:"2px 2px 0 var(--color-border), 4px 4px 8px var(--color-shadow)",cardTexture:"gears",textureOpacity:.25,borderStyle:"solid"},{id:"cyberpunk",name:"Cyberpunk",icon:"",description:"Neon lights in a dark future",colors:{background:"#0f0f23",paper:"#24243fff",ink:"#eeff00",accent:"#ff00ff",accentHover:"#cc00cc",border:"#ff00ff",shadow:"#ff00ff40",muted:"#00ffff",glow:"#ff00ff"},fonts:{heading:'"Consolas", "Lucida Console", "Monaco", monospace',body:'"Consolas", "Lucida Console", "Monaco", monospace'},borderRadius:"0px",buttonRadius:"0px",borderWidth:"2px",shadowStyle:"0 0 10px var(--color-glow), 0 0 20px var(--color-shadow), 4px 4px 0 var(--color-border)",cardTexture:"tech",textureOpacity:.4,borderStyle:"solid"},{id:"nature",name:"Nature",icon:"",description:"Organic earthy woodland feel",colors:{background:"#2d4a3e",paper:"#f4f1e0cc",ink:"#7e9e7eff",accent:"#2d5a3e",accentHover:"#1e4a30",border:"#5a7247",shadow:"#2d3b2d40",muted:"#6b7c5a",glow:"transparent"},fonts:{heading:'"Amatic SC", "Trebuchet MS", sans-serif',body:'"Nunito", "Verdana", sans-serif'},borderRadius:"12px",buttonRadius:"12px",borderWidth:"2px",shadowStyle:"0 4px 12px var(--color-shadow)",cardTexture:"leaf",textureOpacity:.3,borderStyle:"solid"}];bo(e=>({currentTheme:(()=>{try{const n=localStorage.getItem("ucs:theme");return n?JSON.parse(n):"default"}catch{return"default"}})(),setTheme:n=>{e({currentTheme:n}),localStorage.setItem("ucs:theme",JSON.stringify(n)),yr(n)}}));function yr(e){const t=yn.find(s=>s.id===e)||yn[0],n=document.documentElement;n.style.setProperty("--color-background",t.colors.background),n.style.setProperty("--color-paper",t.colors.paper),n.style.setProperty("--color-ink",t.colors.ink),n.style.setProperty("--color-accent",t.colors.accent),n.style.setProperty("--color-accent-hover",t.colors.accentHover),n.style.setProperty("--color-border",t.colors.border),n.style.setProperty("--color-shadow",t.colors.shadow),n.style.setProperty("--color-muted",t.colors.muted),n.style.setProperty("--color-glow",t.colors.glow),n.style.setProperty("--font-heading",t.fonts.heading),n.style.setProperty("--font-body",t.fonts.body),n.style.setProperty("--border-radius",t.borderRadius),n.style.setProperty("--button-radius",t.buttonRadius||t.borderRadius),n.style.setProperty("--border-width",t.borderWidth),n.style.setProperty("--shadow-style",t.shadowStyle),n.style.setProperty("--card-texture",t.cardTexture);const r=vt(t.cardTexture)?t.cardTexture:"none";n.style.setProperty("--card-texture-key",r),n.style.setProperty("--card-texture-color","#ffffff"),n.style.setProperty("--card-texture-opacity",String(t.textureOpacity??.15)),n.style.setProperty("--border-style",t.borderStyle)}function pl(e){const t=document.documentElement;t.style.setProperty("--color-background",e.colors.background),t.style.setProperty("--color-paper",e.colors.paper),t.style.setProperty("--color-ink",e.colors.ink),t.style.setProperty("--color-accent",e.colors.accent),t.style.setProperty("--color-accent-hover",e.colors.accentHover),t.style.setProperty("--color-border",e.colors.border),t.style.setProperty("--color-shadow",e.colors.shadow),t.style.setProperty("--color-muted",e.colors.muted),t.style.setProperty("--color-glow",e.colors.glow||"transparent"),t.style.setProperty("--font-heading",e.fonts.heading),t.style.setProperty("--font-body",e.fonts.body),t.style.setProperty("--border-radius",e.borderRadius),t.style.setProperty("--button-radius",e.buttonRadius||e.borderRadius),t.style.setProperty("--border-width",e.borderWidth);const n=pi(e.shadowStyle||"hard",e.colors.glow||"transparent");t.style.setProperty("--shadow-style",n);const r=e.cardTexture||"none";t.style.setProperty("--card-texture-key",r);const s=mi(r,e.textureColor,e.textureOpacity??.15);t.style.setProperty("--card-texture",s),t.style.setProperty("--card-texture-color",e.textureColor||"#ffffff"),t.style.setProperty("--card-texture-opacity",String(e.textureOpacity??.15)),t.style.setProperty("--border-style",e.borderStyle||"solid")}const eu=[{value:'"Arial", "Helvetica Neue", "Helvetica", sans-serif',label:"Arial"},{value:'"Arial Black", "Arial Bold", sans-serif',label:"Arial Black"},{value:'"Verdana", "Geneva", sans-serif',label:"Verdana"},{value:'"Trebuchet MS", "Lucida Sans Unicode", sans-serif',label:"Trebuchet MS"},{value:'"Tahoma", "Geneva", sans-serif',label:"Tahoma"},{value:'"Segoe UI", "Helvetica Neue", sans-serif',label:"Segoe UI"},{value:'"Calibri", "Candara", sans-serif',label:"Calibri"},{value:'"Candara", "Calibri", sans-serif',label:"Candara"},{value:'"Optima", "Segoe UI", sans-serif',label:"Optima"},{value:'"Lucida Sans", "Lucida Grande", sans-serif',label:"Lucida Sans"},{value:'"Times New Roman", "Times", serif',label:"Times New Roman"},{value:'"Georgia", "Palatino", serif',label:"Georgia"},{value:'"Palatino Linotype", "Book Antiqua", "Palatino", serif',label:"Palatino"},{value:'"Book Antiqua", "Palatino Linotype", serif',label:"Book Antiqua"},{value:'"Garamond", "Baskerville", serif',label:"Garamond"},{value:'"Baskerville", "Garamond", serif',label:"Baskerville"},{value:'"Cambria", "Georgia", serif',label:"Cambria"},{value:'"Didot", "Bodoni MT", serif',label:"Didot"},{value:'"Rockwell", "Courier Bold", serif',label:"Rockwell"},{value:'"Courier New", "Courier", monospace',label:"Courier New"},{value:'"Consolas", "Lucida Console", monospace',label:"Consolas"},{value:'"Lucida Console", "Monaco", monospace',label:"Lucida Console"},{value:'"Monaco", "Consolas", monospace',label:"Monaco"},{value:'"Andale Mono", "Consolas", monospace',label:"Andale Mono"},{value:'"Impact", "Haettenschweiler", sans-serif',label:"Impact"},{value:'"Copperplate", "Copperplate Gothic Light", fantasy',label:"Copperplate"},{value:'"Papyrus", fantasy',label:"Papyrus"},{value:'"Brush Script MT", cursive',label:"Brush Script"},{value:'"Comic Sans MS", "Segoe Print", cursive',label:"Comic Sans"},{value:'"Segoe Print", "Comic Sans MS", cursive',label:"Segoe Print"},{value:'"Lucida Handwriting", cursive',label:"Lucida Handwriting"}],Mx=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],qh="ucs:custom-themes";function Ix(){try{const e=localStorage.getItem(qh);return e?JSON.parse(e):[]}catch{return[]}}function ba(e){localStorage.setItem(qh,JSON.stringify(e))}const or=bo((e,t)=>({customThemes:Ix(),addCustomTheme:n=>{const r=[...t().customThemes,n];ba(r),e({customThemes:r})},updateCustomTheme:(n,r)=>{const s=t().customThemes.map(a=>a.id===n?r:a);ba(s),e({customThemes:s})},deleteCustomTheme:n=>{const r=t().customThemes.filter(s=>s.id!==n);ba(r),e({customThemes:r})}}));function wn(e){return or.getState().customThemes.find(t=>t.id===e)}function Px(){return{name:"My Custom Theme",icon:"",description:"A personalized theme",colors:{background:"#e5e7eb",paper:"#ffffff",ink:"#000000",accent:"#3b82f6",accentHover:"#2563eb",border:"#374151",shadow:"#1f2937",muted:"#6b7280",glow:"transparent"},fonts:{heading:'"Arial", "Helvetica Neue", sans-serif',body:'"Arial", "Helvetica Neue", sans-serif'},borderRadius:"4px",buttonRadius:"4px",borderWidth:"2px",shadowStyle:"hard",cardTexture:"none",textureColor:"#ffffff",textureOpacity:.15,borderStyle:"solid"}}const ks=bo(e=>{const t=(()=>{try{const s=localStorage.getItem("ucs:templates");return s?JSON.parse(s):null}catch(s){return console.error("Failed to load persisted templates",s),null}})(),n=(t==null?void 0:t.templates)??[],r=s=>{try{localStorage.setItem("ucs:templates",JSON.stringify({templates:s}))}catch(a){console.error("Failed to persist templates",a)}};return{templates:n,addTemplate:(s,a)=>{const l={id:He(),name:a||s.data.label||`${s.type} Template`,type:s.type,w:s.w,h:s.h,data:{...s.data},createdAt:Date.now()};e(c=>{const i=[...c.templates,l];return r(i),{templates:i}})},removeTemplate:s=>{e(a=>{const l=a.templates.filter(c=>c.id!==s);return r(l),{templates:l}})},renameTemplate:(s,a)=>{e(l=>{const c=l.templates.map(i=>i.id===s?{...i,name:a}:i);return r(c),{templates:c}})}}}),Rx="3f834d97-7148-4e93-b6c9-dde1ff490cc1",Dx="dnd preset",Lx="default",_x=[{id:"8453b811-d0cd-4f81-a8a7-aef11ca7aaae",name:"Main",widgets:[{id:"0ed12bd7-8b3b-4565-86fd-2c446c824cd2",type:"IMAGE",x:0,y:0,w:190,h:220,data:{label:"Name",value:0,items:[],text:""},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["5bd0607a-d32c-4094-a64a-2e0b11f5a7d4","ab749546-cd73-4c12-adaa-1ef22fa875e2","00dd44bd-d941-4edc-96c5-c47a0c320840"]},{id:"ab749546-cd73-4c12-adaa-1ef22fa875e2",type:"HEALTH_BAR",x:0,y:220,w:190,h:100,data:{label:"Health",value:0,items:[],text:"",currentValue:10},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["0ed12bd7-8b3b-4565-86fd-2c446c824cd2","ae8315af-9e02-4750-8160-99e2fe45d03b","00dd44bd-d941-4edc-96c5-c47a0c320840"]},{id:"2a3c42aa-a933-4699-980f-b4ef75d7aa45",type:"DICE_ROLLER",x:470,y:120,w:180,h:120,data:{label:"Damage",value:0,items:[],text:"",diceGroups:[{count:1,faces:6}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["ef17b625-4d96-4228-a61a-2cf2afad5b94","00dd44bd-d941-4edc-96c5-c47a0c320840","219a1327-916b-402d-91aa-13ab8217bdf2"]},{id:"999ddc53-5db8-4b1e-80ec-c0e0641a010c",type:"NUMBER",x:190,y:320,w:280,h:440,data:{label:"Skills",value:0,items:[],text:"",numberItems:[{name:"Acrobatics (DEX)",value:0},{name:"Animal Handling (WIS)",value:0},{name:"Arcana (INT)",value:0},{name:"Athletics (STR)",value:0},{name:"Deception (CHA)",value:0},{name:"History (INT)",value:0},{name:"Insight (WIS)",value:0},{name:"Intimidation (CHA)",value:0},{name:"Investigation (INT)",value:0},{name:"Medicine (WIS)",value:0},{name:"Nature (INT)",value:0},{name:"Perception (WIS)",value:0},{name:"Performance (CHA)",value:0},{name:"Persuasion (CHA)",value:0},{name:"Religion (INT)",value:0},{name:"Sleight of Hand (DEX)",value:0},{name:"Stealth (DEX)",value:0},{name:"Survival (WIS)",value:0}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["957f216a-eb02-4bdf-af82-3b5f7df4f9d0","6e09d399-6a28-4060-bc63-c615209be46f","00dd44bd-d941-4edc-96c5-c47a0c320840","ae8315af-9e02-4750-8160-99e2fe45d03b","219a1327-916b-402d-91aa-13ab8217bdf2","4eded84b-0623-48e2-bd9e-11d6d0570736","bfd6064b-0512-4875-8a26-6a1e8cb3829a"]},{id:"4eded84b-0623-48e2-bd9e-11d6d0570736",type:"NUMBER",x:0,y:400,w:190,h:110,data:{label:"",value:0,items:[],text:"",numberItems:[{name:"Level",value:1},{name:"AC",value:10},{name:"Init",value:0},{name:"Speed",value:30}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["999ddc53-5db8-4b1e-80ec-c0e0641a010c","ae8315af-9e02-4750-8160-99e2fe45d03b","bfd6064b-0512-4875-8a26-6a1e8cb3829a"]},{id:"af24b2e5-bc7d-46cf-9781-7c307b9e9387",type:"TABLE",x:670,y:550,w:650,h:210,data:{label:"Backback",value:0,items:[],text:"",rows:[{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]}]},groupId:"55349067-3fce-40ac-a130-31fffe89be16",attachedTo:["01ca39ba-b98a-4f94-9d20-274ecd291adf","774878f7-e786-4a79-a46f-7ba3b2c37484"]},{id:"957f216a-eb02-4bdf-af82-3b5f7df4f9d0",type:"TIME_TRACKER",x:470,y:570,w:180,h:190,data:{label:"Effects",value:0,items:[],text:"",timedEffects:[]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["6e09d399-6a28-4060-bc63-c615209be46f","999ddc53-5db8-4b1e-80ec-c0e0641a010c"]},{id:"6e09d399-6a28-4060-bc63-c615209be46f",type:"TOGGLE_GROUP",x:470,y:350,w:180,h:220,data:{label:"Conditions",value:0,items:[],text:"",toggleItems:[{name:"Blinded",active:!1},{name:"Charmed",active:!1},{name:"Deafened",active:!1},{name:"Frightened",active:!1},{name:"Grappled",active:!1},{name:"Incapacitated",active:!1},{name:"Invisible",active:!1},{name:"Paralyzed",active:!1},{name:"Petrified",active:!1},{name:"Poisoned",active:!1},{name:"Prone",active:!1},{name:"Restrained",active:!1},{name:"Stunned",active:!1},{name:"Unconscious",active:!1}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["219a1327-916b-402d-91aa-13ab8217bdf2","957f216a-eb02-4bdf-af82-3b5f7df4f9d0","999ddc53-5db8-4b1e-80ec-c0e0641a010c"]},{id:"00dd44bd-d941-4edc-96c5-c47a0c320840",type:"NUMBER",x:190,y:130,w:280,h:190,data:{label:"Attributes",value:0,items:[],text:"",numberItems:[{name:"Strength",value:10},{name:"Dexterity",value:10},{name:"Constitution",value:10},{name:"Intelligence",value:10},{name:"Wisdom",value:10},{name:"Charisma",value:10}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["0ed12bd7-8b3b-4565-86fd-2c446c824cd2","ab749546-cd73-4c12-adaa-1ef22fa875e2","2a3c42aa-a933-4699-980f-b4ef75d7aa45","5bd0607a-d32c-4094-a64a-2e0b11f5a7d4","219a1327-916b-402d-91aa-13ab8217bdf2","999ddc53-5db8-4b1e-80ec-c0e0641a010c"]},{id:"bfd6064b-0512-4875-8a26-6a1e8cb3829a",type:"LIST",x:0,y:510,w:190,h:250,data:{label:"Features & Traits",value:0,items:["","","","","","","",""],text:"",itemCount:7},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["999ddc53-5db8-4b1e-80ec-c0e0641a010c","4eded84b-0623-48e2-bd9e-11d6d0570736"]},{id:"ef17b625-4d96-4228-a61a-2cf2afad5b94",type:"DICE_ROLLER",x:470,y:0,w:180,h:120,data:{label:"Attack",value:0,items:[],text:""},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["5bd0607a-d32c-4094-a64a-2e0b11f5a7d4","2a3c42aa-a933-4699-980f-b4ef75d7aa45"]},{id:"01ca39ba-b98a-4f94-9d20-274ecd291adf",type:"NUMBER",x:1180,y:380,w:140,h:170,data:{label:"Wealth",value:0,items:[],text:"",numberItems:[{name:"PP",value:0},{name:"GP",value:0},{name:"EP",value:0},{name:"SP",value:0},{name:"CP",value:0}]},groupId:"55349067-3fce-40ac-a130-31fffe89be16",attachedTo:["774878f7-e786-4a79-a46f-7ba3b2c37484","af24b2e5-bc7d-46cf-9781-7c307b9e9387"]},{id:"db426c1f-a727-432c-a50d-f28f4b648c38",type:"SPELL_SLOT",x:670,y:130,w:170,h:250,data:{label:"Spell Slots",value:0,items:[],text:"",spellLevels:[{level:1,max:4,used:0},{level:2,max:2,used:0}]},groupId:"55349067-3fce-40ac-a130-31fffe89be16",attachedTo:["a9a12c4e-5db4-4c7d-ab1a-7257d0416815","0af67232-d082-4841-8e34-ce26517ffed3","774878f7-e786-4a79-a46f-7ba3b2c37484"]},{id:"5bd0607a-d32c-4094-a64a-2e0b11f5a7d4",type:"FORM",x:190,y:0,w:280,h:130,data:{label:"",value:0,items:[],text:"",formItems:[{name:"Class",value:""},{name:"Background",value:""},{name:"Race",value:""},{name:"Alignment",value:""}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["ef17b625-4d96-4228-a61a-2cf2afad5b94","00dd44bd-d941-4edc-96c5-c47a0c320840"]},{id:"774878f7-e786-4a79-a46f-7ba3b2c37484",type:"TEXT",x:670,y:380,w:510,h:170,data:{label:"Notes",value:0,items:[],text:""},groupId:"55349067-3fce-40ac-a130-31fffe89be16",attachedTo:["01ca39ba-b98a-4f94-9d20-274ecd291adf","af24b2e5-bc7d-46cf-9781-7c307b9e9387","0af67232-d082-4841-8e34-ce26517ffed3","db426c1f-a727-432c-a50d-f28f4b648c38"]},{id:"0af67232-d082-4841-8e34-ce26517ffed3",type:"TABLE",x:840,y:130,w:480,h:250,data:{label:"Spells",value:0,items:[],text:"",columns:["Name","Level","Notes"],rows:[{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]},{cells:["","",""]}]},groupId:"55349067-3fce-40ac-a130-31fffe89be16",attachedTo:["db426c1f-a727-432c-a50d-f28f4b648c38","a9a12c4e-5db4-4c7d-ab1a-7257d0416815"]},{id:"a9a12c4e-5db4-4c7d-ab1a-7257d0416815",type:"FORM",x:670,y:0,w:650,h:130,data:{label:"",value:0,items:[],text:"",formItems:[{name:"Spellcasting class",value:""},{name:"Spellcasting ability",value:""},{name:"Spell Save DC",value:""},{name:"Spell Attack Bonus",value:""}]},groupId:"55349067-3fce-40ac-a130-31fffe89be16",attachedTo:["db426c1f-a727-432c-a50d-f28f4b648c38","0af67232-d082-4841-8e34-ce26517ffed3"]},{id:"ae8315af-9e02-4750-8160-99e2fe45d03b",type:"PROGRESS_BAR",x:0,y:320,w:190,h:80,data:{label:"XP",value:0,items:[],text:"",maxValue:300,showPercentage:!1,currentValue:0},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["999ddc53-5db8-4b1e-80ec-c0e0641a010c","4eded84b-0623-48e2-bd9e-11d6d0570736"]},{id:"219a1327-916b-402d-91aa-13ab8217bdf2",type:"POOL",x:470,y:240,w:180,h:110,data:{label:"",value:0,items:[],text:"",poolStyle:"skulls",maxPool:3,currentPool:2,showPoolCount:!1,poolResources:[{name:"Death Save Success",max:3,current:0,style:"checkmarks"},{name:"Death Save Failure",max:3,current:0,style:"skulls"}]},groupId:"f2b6f235-4b41-40a8-9869-0047b90b3775",attachedTo:["6e09d399-6a28-4060-bc63-c615209be46f","2a3c42aa-a933-4699-980f-b4ef75d7aa45","999ddc53-5db8-4b1e-80ec-c0e0641a010c"]}]}],Ox="8453b811-d0cd-4f81-a8a7-aef11ca7aaae",$x={id:Rx,name:Dx,theme:Lx,sheets:_x,activeSheetId:Ox},Ax="2e478f30-ed09-423e-9e67-5f76b4935c22",Wx="dcc lvl0 preset",zx=[{id:"5e628031-65ea-4ed7-958d-eed3715907d1",name:"Main",widgets:[{id:"3069cc90-b5cd-4b24-8674-7ed8ed6a5ddc",type:"FORM",x:960,y:360,w:360,h:100,data:{label:"",value:0,items:[],text:"",formItems:[{name:"Name",value:""},{name:"Occupation",value:""},{name:"Alignment",value:""}]},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["d1cd80c5-c859-4911-a5dd-1842cbb3f3fc","0838b4e2-9abc-4e79-97d2-75ab9ca24f30","21f4c3a8-4e21-46c8-a57c-5b34985bf1f0"]},{id:"88a7db76-54ba-4f26-b480-21261f450e44",type:"DICE_TRAY",x:1550,y:360,w:270,h:220,data:{label:"",value:0,items:[],text:"",availableDice:[3,4,5,6,7,8,10,12,14,16,20,24,30,100]}},{id:"d1cd80c5-c859-4911-a5dd-1842cbb3f3fc",type:"NUMBER",x:960,y:460,w:160,h:150,data:{label:"",value:0,items:[],text:"",numberItems:[{name:"STR",value:0},{name:"AGI",value:0},{name:"STA",value:0},{name:"PER",value:0},{name:"INT",value:0},{name:"LCK",value:0}]},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["3069cc90-b5cd-4b24-8674-7ed8ed6a5ddc","279766de-d7e7-47b5-8cf2-905b4c266295","49a71ab5-cc63-490b-93ba-325cbccb0a8a","21f4c3a8-4e21-46c8-a57c-5b34985bf1f0"]},{id:"21f4c3a8-4e21-46c8-a57c-5b34985bf1f0",type:"NUMBER",x:1120,y:460,w:200,h:90,data:{label:"",value:0,items:[],text:"",numberItems:[{name:"Reflex",value:0},{name:"Fortitude",value:0},{name:"Will",value:0}]},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["3069cc90-b5cd-4b24-8674-7ed8ed6a5ddc","d1cd80c5-c859-4911-a5dd-1842cbb3f3fc","279766de-d7e7-47b5-8cf2-905b4c266295","52dcd513-d13a-4792-a9a2-f230389caf39"]},{id:"0838b4e2-9abc-4e79-97d2-75ab9ca24f30",type:"HEALTH_BAR",x:1320,y:360,w:200,h:100,data:{label:"Health",value:0,items:[],text:"",maxValue:5,currentValue:5},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["3069cc90-b5cd-4b24-8674-7ed8ed6a5ddc","52dcd513-d13a-4792-a9a2-f230389caf39"]},{id:"279766de-d7e7-47b5-8cf2-905b4c266295",type:"TEXT",x:1120,y:550,w:400,h:140,data:{label:"Notes",value:0,items:[],text:""},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["d1cd80c5-c859-4911-a5dd-1842cbb3f3fc","49a71ab5-cc63-490b-93ba-325cbccb0a8a","52dcd513-d13a-4792-a9a2-f230389caf39","21f4c3a8-4e21-46c8-a57c-5b34985bf1f0"]},{id:"49a71ab5-cc63-490b-93ba-325cbccb0a8a",type:"PROGRESS_BAR",x:960,y:610,w:160,h:80,data:{label:"XP",value:0,items:[],text:"",maxValue:10,showPercentage:!1},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["d1cd80c5-c859-4911-a5dd-1842cbb3f3fc","279766de-d7e7-47b5-8cf2-905b4c266295"]},{id:"52dcd513-d13a-4792-a9a2-f230389caf39",type:"NUMBER_DISPLAY",x:1320,y:460,w:200,h:90,data:{label:"",value:0,items:[],text:"",displayNumbers:[{label:"AC",value:10},{label:"Init",value:0},{label:"Speed",value:0}]},groupId:"e9587685-3094-4efa-b7db-06139b04b684",attachedTo:["0838b4e2-9abc-4e79-97d2-75ab9ca24f30","279766de-d7e7-47b5-8cf2-905b4c266295","21f4c3a8-4e21-46c8-a57c-5b34985bf1f0"]}]},{id:"c43d96bc-78f2-4a13-85c7-40c9e63d13c0",name:"Tables",widgets:[{id:"6e943b4e-f7ec-4f15-ac27-64861120dc55",type:"TABLE",x:400,y:300,w:510,h:400,data:{label:"Ability Score Modifiers",value:0,items:[],text:"",columns:["Ability Score","Modifier","Wizard Spells Known","Max Spell Level**"],rows:[{cells:["3","-3","No spellcasting possible","No spellcasting possible"]},{cells:["4","-2","-2 spells*","1"]},{cells:["5","-2","-2 spells*","1"]},{cells:["6","-1","-1 spell*","1"]},{cells:["7","-1","-1 spell*","1"]},{cells:["8","-1","No adjustment","2"]},{cells:["9","None","No adjustment","2"]},{cells:["10","None","No adjustment","3"]},{cells:["11","None","No adjustment","3"]},{cells:["12","None","No adjustment","4"]},{cells:["13","+1","No adjustment","4"]},{cells:["14","+1","+1 spell","4"]},{cells:["15","+1","	 +1 spell","5"]},{cells:["16","+2","	 +1 spell","5"]},{cells:["17","+2","	 +2 spells","5"]},{cells:["18","+3","+2 spells","5"]}]},groupId:"63b0d9e8-fe5e-4d2e-98a9-04cdc74d0792",attachedTo:["5f23c535-f23c-4377-bf5a-e73ce686a93d"]},{id:"5f23c535-f23c-4377-bf5a-e73ce686a93d",type:"TEXT",x:400,y:700,w:510,h:100,data:{label:"",value:0,items:[],text:`* Minimum of 1 spell.
** Based on Intelligence for wizards and Personality for clerics.`},groupId:"63b0d9e8-fe5e-4d2e-98a9-04cdc74d0792",attachedTo:["6e943b4e-f7ec-4f15-ac27-64861120dc55"]},{id:"5a2d16eb-3702-4e7f-b3b5-75efdb1f6a56",type:"TABLE",x:930,y:300,w:180,h:300,data:{label:"XP level Thresholds",value:0,items:[],text:"",columns:["Level","XP Required"],rows:[{cells:["0","0"]},{cells:["1","10"]},{cells:["2","50"]},{cells:["3","110"]},{cells:["4","190"]},{cells:["5","290"]},{cells:["6","410"]},{cells:["7","550"]},{cells:["8","710"]},{cells:["9","890"]},{cells:["10","1090"]}]}}]}],Fx="5e628031-65ea-4ed7-958d-eed3715907d1",Hx="default",Bx={id:Ax,name:Wx,sheets:zx,activeSheetId:Fx,theme:Hx},Ux="adf1b615-a045-4a25-8c37-0ce4f0fe984d",Vx="Mothership preset",Gx=[{id:"049aefc1-3522-4907-b34f-1ec1074d7084",name:"Main",widgets:[{id:"886cc172-510c-4785-8886-4efb4750f2bf",type:"IMAGE",x:780,y:200,w:210,h:250,data:{label:"Name",value:0,items:[],text:""},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["6997f591-11b1-4d95-9e0d-8c3ea4afc67d","9a23a152-a4d1-4056-a5e4-c8dd01e1bd6f","ef500703-4bd6-45c5-9dac-0e8667ffb231","979186c7-3065-4691-97c9-d4fb50057156"]},{id:"9a23a152-a4d1-4056-a5e4-c8dd01e1bd6f",type:"NUMBER_DISPLAY",x:990,y:280,w:300,h:110,data:{label:"",value:0,items:[],text:"",displayNumbers:[{label:"Strength",value:0},{label:"Speed",value:0},{label:"Intellect",value:0},{label:"Combat",value:0}],displayLayout:"horizontal"},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["979186c7-3065-4691-97c9-d4fb50057156","886cc172-510c-4785-8886-4efb4750f2bf","ef500703-4bd6-45c5-9dac-0e8667ffb231"]},{id:"ef500703-4bd6-45c5-9dac-0e8667ffb231",type:"NUMBER_DISPLAY",x:990,y:390,w:300,h:110,data:{label:"",value:0,items:[],text:"",displayNumbers:[{label:"Sanity",value:0},{label:"Fear",value:0},{label:"Body",value:0}]},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["886cc172-510c-4785-8886-4efb4750f2bf","9a23a152-a4d1-4056-a5e4-c8dd01e1bd6f","6997f591-11b1-4d95-9e0d-8c3ea4afc67d","1d87cb28-79e5-4f20-b276-7a1aa6f4fe89"]},{id:"979186c7-3065-4691-97c9-d4fb50057156",type:"FORM",x:990,y:200,w:300,h:80,data:{label:"",value:0,items:[],text:"",formItems:[{name:"Class",value:""},{name:"High Score",value:""}]},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["886cc172-510c-4785-8886-4efb4750f2bf"]},{id:"6997f591-11b1-4d95-9e0d-8c3ea4afc67d",type:"HEALTH_BAR",x:780,y:450,w:210,h:100,data:{label:"Health",value:0,items:[],text:""},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["886cc172-510c-4785-8886-4efb4750f2bf","3bd49c92-b5d2-4f41-8351-06a21d6dc08a","ef500703-4bd6-45c5-9dac-0e8667ffb231","1d87cb28-79e5-4f20-b276-7a1aa6f4fe89"]},{id:"3bd49c92-b5d2-4f41-8351-06a21d6dc08a",type:"NUMBER",x:780,y:550,w:210,h:80,data:{label:"",value:0,items:[],text:"",numberItems:[{name:"Wounds",value:0},{name:"Stress",value:0}]},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["6997f591-11b1-4d95-9e0d-8c3ea4afc67d","1d87cb28-79e5-4f20-b276-7a1aa6f4fe89"]},{id:"4a910aa1-2081-43d9-8597-e55af66f362f",type:"DICE_ROLLER",x:1310,y:200,w:200,h:120,data:{label:"New Widget",value:0,items:[],text:"",diceGroups:[{count:1,faces:100}]}},{id:"1d87cb28-79e5-4f20-b276-7a1aa6f4fe89",type:"TEXT",x:990,y:500,w:300,h:130,data:{label:"",value:0,items:[],text:""},groupId:"5eb4b535-98e0-4a99-900b-dfac8f54c259",attachedTo:["ef500703-4bd6-45c5-9dac-0e8667ffb231","6997f591-11b1-4d95-9e0d-8c3ea4afc67d","3bd49c92-b5d2-4f41-8351-06a21d6dc08a"]}]}],Yx="049aefc1-3522-4907-b34f-1ec1074d7084",Xx="default",Kx={id:Ux,name:Vx,sheets:Gx,activeSheetId:Yx,theme:Xx},Qx="d1314816-deac-414a-aac4-ee8e34f3a43f",Jx="Forbidden Lands Preset",Zx=[{id:"24ccc8eb-ccbb-4017-bf4c-c41e1e1c3942",name:"Main",widgets:[{id:"2a4977ab-5bf5-4249-bcbe-f85c98d44a0e",type:"IMAGE",x:0,y:0,w:180,h:220,data:{label:"New Widget",value:0,items:[],text:""},groupId:"24a99c59-bcf1-43c4-81a3-27d1ba361b2b",attachedTo:["77dae175-0c90-4ae9-9bd2-09900b47b452"]},{id:"77dae175-0c90-4ae9-9bd2-09900b47b452",type:"POOL",x:0,y:220,w:180,h:240,data:{label:"Attributes",value:0,items:[],text:"",poolResources:[{name:"Strength",max:4,current:4,style:"dots"},{name:"Agility",max:4,current:4,style:"dots"},{name:"Wits",max:4,current:4,style:"dots"},{name:"Empathy",max:4,current:4,style:"dots"}],showPoolCount:!1},groupId:"24a99c59-bcf1-43c4-81a3-27d1ba361b2b",attachedTo:["2a4977ab-5bf5-4249-bcbe-f85c98d44a0e","b6005e83-2df9-4d9e-899a-c287d6174b61"]},{id:"b6005e83-2df9-4d9e-899a-c287d6174b61",type:"TOGGLE_GROUP",x:0,y:460,w:180,h:150,data:{label:"Conditions",value:0,items:[],text:"",toggleItems:[{name:"Sleepy",active:!1},{name:"Thirsty",active:!1},{name:"Hungry",active:!1},{name:"Cold",active:!1}]},groupId:"24a99c59-bcf1-43c4-81a3-27d1ba361b2b",attachedTo:["77dae175-0c90-4ae9-9bd2-09900b47b452"]},{id:"ebe42a9f-7198-406a-af8c-0ae26471caaf",type:"TIME_TRACKER",x:470,y:380,w:260,h:230,data:{label:"Critical Injuries",value:0,items:[],text:""},groupId:"79947237-61a0-4981-a8b8-da5a29e5a82c",attachedTo:["8944f7d8-d339-4345-a2ee-f0a54745dcd9","4735c60d-3ded-4680-a9dc-58a4d528c26c","8dc758e6-5b01-4c7d-9c6c-09680bcfd46e"]},{id:"89f10e14-d560-43dd-821f-cea26f89c170",type:"DICE_TRAY",x:760,y:0,w:240,h:200,data:{label:"",value:0,items:[],text:"",availableDice:[6,8,10,12]}},{id:"e8466ec2-dba6-467c-bccd-dd6606a39408",type:"FORM",x:180,y:0,w:550,h:180,data:{label:"",value:0,items:[],text:"",formItems:[{name:"Kin",value:""},{name:"Profession",value:""},{name:"Age",value:""},{name:"Reputation",value:""},{name:"Pride",value:""},{name:"Dark Secret",value:""}]},groupId:"79947237-61a0-4981-a8b8-da5a29e5a82c",attachedTo:["8944f7d8-d339-4345-a2ee-f0a54745dcd9","4735c60d-3ded-4680-a9dc-58a4d528c26c"]},{id:"8944f7d8-d339-4345-a2ee-f0a54745dcd9",type:"NUMBER",x:180,y:180,w:290,h:430,data:{label:"Skills",value:0,items:[],text:"",numberItems:[{name:"Might (str)",value:0},{name:"Endurence (str)",value:0},{name:"Melee (str)",value:0},{name:"Crafting (str)",value:0},{name:"Stealth (agi)",value:0},{name:"Sleight of Hand (agi)",value:0},{name:"Move (agi)",value:0},{name:"Marksmanship (agi)",value:0},{name:"Scouting (wits)",value:0},{name:"Lore (wits)",value:0},{name:"Survival (wits)",value:0},{name:"Insight (wits)",value:0},{name:"Manipulation (emp)",value:0},{name:"PErformance (emp)",value:0},{name:"Healing (emp)",value:0},{name:"Healing (emp)",value:0},{name:"Animal Handling (emp)",value:0}]},groupId:"79947237-61a0-4981-a8b8-da5a29e5a82c",attachedTo:["e8466ec2-dba6-467c-bccd-dd6606a39408","4735c60d-3ded-4680-a9dc-58a4d528c26c","ebe42a9f-7198-406a-af8c-0ae26471caaf","8dc758e6-5b01-4c7d-9c6c-09680bcfd46e"]},{id:"4735c60d-3ded-4680-a9dc-58a4d528c26c",type:"LIST",x:470,y:180,w:260,h:200,data:{label:"Talents",value:0,items:[],text:"",itemCount:5},groupId:"79947237-61a0-4981-a8b8-da5a29e5a82c",attachedTo:["e8466ec2-dba6-467c-bccd-dd6606a39408","8944f7d8-d339-4345-a2ee-f0a54745dcd9","ebe42a9f-7198-406a-af8c-0ae26471caaf"]},{id:"8dc758e6-5b01-4c7d-9c6c-09680bcfd46e",type:"LIST",x:0,y:610,w:730,h:230,data:{label:"Equipment",value:0,items:[],text:"",itemCount:6},groupId:"79947237-61a0-4981-a8b8-da5a29e5a82c",attachedTo:["ebe42a9f-7198-406a-af8c-0ae26471caaf","8944f7d8-d339-4345-a2ee-f0a54745dcd9"]}]}],qx="24ccc8eb-ccbb-4017-bf4c-c41e1e1c3942",eg={id:Qx,name:Jx,sheets:Zx,activeSheetId:qx},ef={"D&D 5e":$x,"Dungeon Crawl Classics - Level 0":Bx,Mothership:Kx,"Forbidden Lands":eg};function tg(){return Object.keys(ef)}function ng(e){return ef[e]}function rg(e){const t=e?wn(e):void 0;if(t){const r=pi(t.shadowStyle||"hard",t.colors.glow||"transparent"),s=t.cardTexture||"none",a=vt(s)?"none":mi(s,t.textureColor,t.textureOpacity);return{"--card-background":t.colors.paper,"--card-ink":t.colors.ink,"--card-border":t.colors.border,"--card-shadow":t.colors.shadow,"--card-muted":t.colors.muted,"--card-accent":t.colors.accent,"--card-glow":t.colors.glow||"transparent","--card-radius":t.borderRadius,"--card-border-width":t.borderWidth,"--card-border-style":t.borderStyle||"solid","--card-shadow-style":r,"--card-texture":a,"--card-texture-key":s,"--card-texture-color":t.textureColor||"#ffffff","--card-texture-opacity":String(t.textureOpacity??.15),fontFamily:t.fonts.body}}const n=yn.find(r=>r.id===(e||"default"))||yn[0];return{"--card-background":n.colors.paper,"--card-ink":n.colors.ink,"--card-border":n.colors.border,"--card-shadow":n.colors.shadow,"--card-muted":n.colors.muted,"--card-accent":n.colors.accent,"--card-glow":n.colors.glow,"--card-radius":n.borderRadius,"--card-border-width":n.borderWidth,"--card-border-style":n.borderStyle,"--card-shadow-style":n.shadowStyle,"--card-texture":n.cardTexture,"--card-texture-key":"none","--card-texture-color":"#ffffff","--card-texture-opacity":"0.15",fontFamily:n.fonts.body}}function og(){var ee;const e=or(F=>F.customThemes),t=ks(F=>F.templates),n=G(F=>F.characters),r=G(F=>F.createCharacter),s=G(F=>F.createCharacterFromPreset),a=G(F=>F.updateCharacterTheme),l=G(F=>F.importCharacter),c=G(F=>F.selectCharacter),i=G(F=>F.deleteCharacter),[d,h]=E.useState(null),[g,x]=E.useState(!1),[b,y]=E.useState(!1),[j,C]=E.useState(""),[f,u]=E.useState(""),[p,v]=E.useState("default"),[N,m]=E.useState(null),w=E.useRef(null),S=E.useRef(null),T=E.useRef(null),k=tg();E.useEffect(()=>{const F=M=>{T.current&&!T.current.contains(M.target)&&m(null)};return N&&document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[N]);const D=()=>{const F=j.trim()||"New Character";if(f&&f!==""){const M=ng(f);if(M){s(M,F);const R=G.getState(),W=R.characters[R.characters.length-1];W&&p!=="default"&&a(W.id,p)}}else{r(F);const M=G.getState(),R=M.characters[M.characters.length-1];R&&p!=="default"&&a(R.id,p)}C(""),u(""),v("default"),x(!1)},A=F=>{const M=JSON.stringify(F,null,2),R=new Blob([M],{type:"application/json"}),W=URL.createObjectURL(R),Q=document.createElement("a");Q.href=W,Q.download=`${F.name.replace(/[^a-z0-9]/gi,"_")}.json`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(W)},V=F=>{var W;const M=(W=F.target.files)==null?void 0:W[0];if(!M)return;const R=new FileReader;R.onload=Q=>{var X;try{const H=JSON.parse((X=Q.target)==null?void 0:X.result);if(!H.name||!H.sheets||!Array.isArray(H.sheets)){alert("Invalid character file format");return}l(H)}catch(H){alert("Failed to parse character file"),console.error(H)}},R.readAsText(M),w.current&&(w.current.value="")},Z=()=>{const F={version:1,timestamp:new Date().toISOString(),characters:n,customThemes:e,templates:t},M=JSON.stringify(F,null,2),R=new Blob([M],{type:"application/json"}),W=URL.createObjectURL(R),Q=document.createElement("a");Q.href=W,Q.download=`ucs_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(W)},oe=F=>{var W;const M=(W=F.target.files)==null?void 0:W[0];if(!M)return;const R=new FileReader;R.onload=Q=>{var X,H;try{const te=JSON.parse((X=Q.target)==null?void 0:X.result);if(!te.characters||!Array.isArray(te.characters)){alert("Invalid backup file format");return}const me=((H=te.templates)==null?void 0:H.length)||0;if(!window.confirm(`This will replace all your current data with the backup from ${te.timestamp?new Date(te.timestamp).toLocaleString():"unknown date"}.

Backup contains ${te.characters.length} character(s)`+(me>0?` and ${me} template(s)`:"")+`.

Are you sure you want to continue?`))return;localStorage.setItem("ucs:store",JSON.stringify({characters:te.characters,activeCharacterId:null})),te.customThemes&&localStorage.setItem("ucs:customThemes",JSON.stringify(te.customThemes)),te.templates&&Array.isArray(te.templates)&&localStorage.setItem("ucs:templates",JSON.stringify({templates:te.templates})),window.location.reload()}catch(te){alert("Failed to parse backup file"),console.error(te)}},R.readAsText(M),S.current&&(S.current.value="")};return o.jsxs("div",{className:"max-w-4xl mx-auto p-4 h-full overflow-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4 border-b-[length:var(--border-width)] border-theme-border pb-2",children:[o.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider text-theme-ink font-heading",children:"Character Select"}),o.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-3 py-2 text-sm font-body text-theme-ink border-[length:var(--border-width)] border-theme-border bg-theme-paper hover:bg-theme-accent hover:text-theme-paper rounded-button transition-colors shadow-theme active:translate-x-[2px] active:translate-y-[2px] active:shadow-none",title:"Backup & Restore",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),o.jsx("span",{children:"Backup"})]})]}),o.jsxs("div",{className:"mb-6 flex gap-2",children:[o.jsx("button",{onClick:()=>x(!0),className:"flex-1 bg-theme-accent text-theme-paper px-6 py-4 text-lg font-bold hover:bg-theme-accent-hover transition-colors shadow-theme active:translate-x-[2px] active:translate-y-[2px] active:shadow-none rounded-button font-heading",children:"+ CREATE NEW CHARACTER"}),o.jsxs("label",{className:"bg-theme-paper text-theme-ink px-4 py-4 font-bold hover:bg-theme-accent hover:text-theme-paper transition-colors shadow-theme active:translate-x-[2px] active:translate-y-[2px] active:shadow-none rounded-button font-heading cursor-pointer border-[length:var(--border-width)] border-theme-border text-center flex items-center justify-center",children:["IMPORT",o.jsx("input",{ref:w,type:"file",accept:".json",onChange:V,className:"hidden"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 pb-4",children:[n.map(F=>{const M=rg(F.theme),R=F.theme?wn(F.theme):void 0,W=(R==null?void 0:R.cardTexture)||"none",Q=vt(W);return o.jsxs("div",{style:M,className:"p-4 active:translate-x-[2px] active:translate-y-[2px] transition-transform cursor-pointer relative group",onClick:()=>c(F.id),children:[o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{backgroundColor:"var(--card-background)",backgroundImage:Q?"none":"var(--card-texture)",borderRadius:"var(--card-radius)",border:"var(--card-border-width) var(--card-border-style) var(--card-border)",boxShadow:"var(--card-shadow-style)"},children:Q&&o.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:"var(--card-background)"},children:o.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`url(${Vt[W]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:"var(--card-texture-opacity)",mixBlendMode:"overlay"}})})}),o.jsxs("div",{className:"relative",children:[o.jsx("h2",{className:"text-xl font-bold mb-2 pr-12",style:{color:"var(--card-ink)"},children:F.name}),o.jsxs("p",{className:"text-sm mb-2",style:{color:"var(--card-muted)"},children:[F.sheets.reduce((X,H)=>X+H.widgets.length,0)," Widgets  ",F.sheets.length," Sheet",F.sheets.length!==1?"s":""]}),o.jsxs("div",{className:"absolute top-0 right-0 z-10",ref:N===F.id?T:void 0,children:[o.jsx("button",{onClick:X=>{X.stopPropagation(),m(N===F.id?null:F.id)},className:"p-1.5 rounded transition-colors",style:{color:"var(--card-muted)",backgroundColor:"transparent"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="var(--card-accent)",X.currentTarget.style.color="var(--card-background)"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="transparent",X.currentTarget.style.color="var(--card-muted)"},title:"Options",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("circle",{cx:"12",cy:"5",r:"2"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"}),o.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}),N===F.id&&o.jsxs("div",{className:"absolute right-0 top-full mt-1 min-w-[120px] rounded shadow-lg overflow-hidden",style:{backgroundColor:"var(--card-background)",border:"1px solid var(--card-border)"},children:[o.jsxs("button",{onClick:X=>{X.stopPropagation(),A(F),m(null)},className:"w-full px-3 py-2 text-left text-sm font-medium flex items-center gap-2 transition-colors",style:{color:"var(--card-ink)",backgroundColor:"var(--card-background)"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="var(--card-accent)",X.currentTarget.style.color="var(--card-background)"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="var(--card-background)",X.currentTarget.style.color="var(--card-ink)"},children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]}),o.jsxs("button",{onClick:X=>{X.stopPropagation(),h(F.id),m(null)},className:"w-full px-3 py-2 text-left text-sm font-medium flex items-center gap-2 transition-colors",style:{color:"var(--card-ink)",backgroundColor:"var(--card-background)"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="#ef4444",X.currentTarget.style.color="#ffffff"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="var(--card-background)",X.currentTarget.style.color="var(--card-ink)"},children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]},F.id)}),n.length===0&&o.jsx("div",{className:"col-span-full text-center py-8 text-theme-muted border-[length:var(--border-width)] border-dashed border-theme-border/50 text-sm rounded-theme font-body",children:"No characters found. Create one to begin."})]}),d&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>h(null)}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme p-4 z-50 min-w-[250px]",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold mb-2",children:"Delete Character?"}),o.jsxs("p",{className:"text-sm text-theme-muted font-body mb-4",children:['Are you sure you want to delete "',(ee=n.find(F=>F.id===d))==null?void 0:ee.name,'"? This will delete all sheets and widgets.']}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>h(null),className:"px-3 py-1.5 text-sm font-body text-theme-ink hover:bg-theme-accent/20 rounded-button transition-colors",children:"Cancel"}),o.jsx("button",{onClick:()=>{i(d),h(null)},className:"px-3 py-1.5 text-sm font-body bg-red-500 text-white hover:bg-red-600 rounded-button transition-colors",children:"Delete"})]})]})]}),g&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>x(!1)}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme p-6 z-50 w-[90vw] max-w-[400px]",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold text-xl mb-4",children:"Create New Character"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-body text-theme-muted mb-1",children:"Character Name"}),o.jsx("input",{type:"text",value:j,onChange:F=>C(F.target.value),placeholder:"Enter character name...",className:"w-full p-3 text-base border-[length:var(--border-width)] border-theme-border shadow-theme focus:outline-none focus:translate-x-[1px] focus:translate-y-[1px] focus:shadow-none transition-all bg-theme-paper text-theme-ink rounded-theme font-body",autoFocus:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-body text-theme-muted mb-1",children:"Preset"}),o.jsxs("select",{value:f,onChange:F=>u(F.target.value),className:"w-full p-3 text-base border-[length:var(--border-width)] border-theme-border shadow-theme focus:outline-none transition-all bg-theme-paper text-theme-ink rounded-theme font-body cursor-pointer",children:[o.jsx("option",{value:"",children:"No Preset"}),k.map(F=>o.jsx("option",{value:F,children:F},F))]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-body text-theme-muted mb-1",children:"Theme"}),o.jsx("select",{value:p,onChange:F=>v(F.target.value),className:"w-full p-3 text-base border-[length:var(--border-width)] border-theme-border shadow-theme focus:outline-none transition-all bg-theme-paper text-theme-ink rounded-theme font-body cursor-pointer",children:yn.map(F=>o.jsxs("option",{value:F.id,children:[F.icon," ",F.name]},F.id))})]}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{onClick:()=>{x(!1),C(""),u(""),v("default")},className:"px-4 py-2 font-body text-theme-ink hover:bg-theme-accent/20 rounded-button transition-colors border-[length:var(--border-width)] border-theme-border",children:"Cancel"}),o.jsx("button",{onClick:D,className:"px-6 py-2 font-body bg-theme-accent text-theme-paper hover:bg-theme-accent-hover rounded-button transition-colors font-bold",children:"Create"})]})]})]}),b&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>y(!1)}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme p-6 z-50 w-[90vw] max-w-[450px]",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold text-xl",children:"Backup & Restore"}),o.jsx("button",{onClick:()=>y(!1),className:"text-theme-muted hover:text-theme-ink transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-theme p-4 mb-6",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-body text-theme-ink text-sm font-semibold mb-1",children:"Your data is stored locally"}),o.jsx("p",{className:"font-body text-theme-muted text-sm",children:"All your characters and settings are stored in your browser's local storage. This data may be lost if you clear your browser cache, use private/incognito mode, or switch browsers."})]})]})}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h4",{className:"font-body text-theme-ink font-semibold mb-2",children:"Create Backup"}),o.jsx("p",{className:"font-body text-theme-muted text-sm mb-3",children:"Download a backup file containing all your characters and custom themes."}),o.jsxs("button",{onClick:Z,className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-body bg-theme-accent text-theme-paper hover:bg-theme-accent-hover rounded-button transition-colors font-bold",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Backup"]})]}),o.jsx("div",{className:"border-t border-theme-border my-4"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-body text-theme-ink font-semibold mb-2",children:"Restore from Backup"}),o.jsxs("p",{className:"font-body text-theme-muted text-sm mb-3",children:["Upload a backup file to restore your characters and themes. ",o.jsx("span",{className:"text-red-500 font-semibold",children:"This will replace all current data."})]}),o.jsxs("label",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 font-body border-[length:var(--border-width)] border-theme-border text-theme-ink hover:bg-theme-accent hover:text-theme-paper rounded-theme transition-colors font-bold cursor-pointer",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Backup File",o.jsx("input",{ref:S,type:"file",accept:".json",onChange:oe,className:"hidden"})]})]})]})]})]})}function sg({minScale:e=.1,maxScale:t=5,editingWidgetId:n,mode:r}){const[s,a]=E.useState({x:0,y:0}),[l,c]=E.useState(1),[i,d]=E.useState(!1),h=E.useRef({x:0,y:0});E.useEffect(()=>{const p=()=>d(!1),v=N=>{if(i){const m=N.clientX-h.current.x,w=N.clientY-h.current.y;a(S=>({x:S.x+m,y:S.y+w})),h.current={x:N.clientX,y:N.clientY}}};return window.addEventListener("mouseup",p),window.addEventListener("mousemove",v),()=>{window.removeEventListener("mouseup",p),window.removeEventListener("mousemove",v)}},[i]);const g=E.useCallback(p=>{n||p.target.closest(".react-draggable")||(r==="play"?p.button===0&&(p.preventDefault(),d(!0),h.current={x:p.clientX,y:p.clientY}):(p.button===0||p.button===1)&&(p.preventDefault(),d(!0),h.current={x:p.clientX,y:p.clientY}))},[n,r]),x=E.useCallback(p=>{if(i){const v=p.clientX-h.current.x,N=p.clientY-h.current.y;a(m=>({x:m.x+v,y:m.y+N})),h.current={x:p.clientX,y:p.clientY}}},[i]),b=E.useCallback(()=>{d(!1)},[]),y=E.useCallback(p=>{if(n)return;const v=Math.exp(-p.deltaY*.001),N=Math.min(Math.max(l*v,e),t),m=p.clientX,w=p.clientY,S=(m-s.x)/l,T=(w-s.y)/l,k=m-S*N,D=w-T*N;c(N),a({x:k,y:D})},[n,l,s,e,t]),j=E.useCallback(()=>{c(p=>Math.min(t,p*1.3))},[t]),C=E.useCallback(()=>{c(p=>Math.max(e,p/1.3))},[e]),f=E.useCallback(()=>{c(1),a({x:0,y:0})},[]),u=E.useCallback((p,v)=>{a(p),c(v)},[]);return{pan:s,scale:l,isPanning:i,setPan:a,setScale:c,handleMouseDown:g,handleMouseMove:x,handleMouseUp:b,handleWheel:y,zoomIn:j,zoomOut:C,resetView:f,setView:u}}function ag({mode:e,onPanChange:t,onScaleChange:n,onPinchingChange:r,getScale:s,getPan:a,minScale:l=.1,maxScale:c=5}){const i=E.useRef(null),d=E.useRef(null),h=E.useRef(new Map),g=E.useRef(!1),x=E.useRef(!1),b=E.useRef(e);return E.useEffect(()=>{b.current=e},[e]),E.useEffect(()=>{const y=m=>{for(;m&&m!==document.body;){const w=window.getComputedStyle(m),S=w.overflowY,T=w.overflowX;if((S==="auto"||S==="scroll"||T==="auto"||T==="scroll")&&(m.scrollHeight>m.clientHeight||m.scrollWidth>m.clientWidth))return!0;m=m.parentElement}return!1},j=m=>{for(;m&&m!==document.body;){if(m.classList.contains("react-draggable"))return!0;m=m.parentElement}return!1},C=m=>{for(;m&&m!==document.body;){if(m.classList.contains("fixed")&&(m.classList.contains("left-0")||m.classList.contains("right-0")))return!0;m=m.parentElement}return!1},f=m=>!!(m&&m.tagName==="CANVAS");let u=null;const p=m=>{m.touches.length===1&&(u=m.target);for(let w=0;w<m.touches.length;w++){const S=m.touches[w];h.current.set(S.identifier,{x:S.clientX,y:S.clientY})}if(!(u&&C(u))){if(m.touches.length===1&&(x.current=y(m.target)),h.current.size>=2){m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation(),r(!0);const w=Array.from(h.current.values()),S=w[0].x-w[1].x,T=w[0].y-w[1].y;i.current=Math.sqrt(S*S+T*T),d.current={x:(w[0].x+w[1].x)/2,y:(w[0].y+w[1].y)/2},g.current=!1}else if(h.current.size===1){const w=u&&j(u),S=x.current,T=u&&f(u);if(!S&&!T&&(b.current==="play"?!0:!w)){const D=h.current.values().next().value;D&&(d.current={x:D.x,y:D.y},g.current=!0)}}}},v=m=>{if(u&&C(u))return;for(let S=0;S<m.touches.length;S++){const T=m.touches[S];h.current.set(T.identifier,{x:T.clientX,y:T.clientY})}const w=h.current.size;if(w>=2){const S=Array.from(h.current.values()),T=S[0].x-S[1].x,k=S[0].y-S[1].y,D=Math.sqrt(T*T+k*k),A={x:(S[0].x+S[1].x)/2,y:(S[0].y+S[1].y)/2};if(i.current===null||d.current===null){i.current=D,d.current=A,g.current=!1,m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation();return}m.preventDefault(),m.stopPropagation(),m.stopImmediatePropagation();const V=s(),Z=a(),oe=D/i.current,ee=Math.min(Math.max(V*oe,l),c),F=(A.x-Z.x)/V,M=(A.y-Z.y)/V,R=A.x-F*ee,W=A.y-M*ee,Q=A.x-d.current.x,X=A.y-d.current.y;n(ee),t(()=>({x:R+Q,y:W+X})),i.current=D,d.current=A}else if(w===1&&g.current&&d.current){const S=h.current.values().next().value;if(S){m.preventDefault();const T=S.x-d.current.x,k=S.y-d.current.y;t(D=>({x:D.x+T,y:D.y+k})),d.current={x:S.x,y:S.y}}}},N=m=>{for(let w=0;w<m.changedTouches.length;w++)h.current.delete(m.changedTouches[w].identifier);h.current.size===0?(i.current=null,d.current=null,g.current=!1,x.current=!1,u=null,r(!1)):h.current.size===1&&(i.current=null,g.current=!1)};return document.addEventListener("touchstart",p,{passive:!1,capture:!0}),document.addEventListener("touchmove",v,{passive:!1,capture:!0}),document.addEventListener("touchend",N,{passive:!0,capture:!0}),document.addEventListener("touchcancel",N,{passive:!0,capture:!0}),()=>{document.removeEventListener("touchstart",p,{capture:!0}),document.removeEventListener("touchmove",v,{capture:!0}),document.removeEventListener("touchend",N,{capture:!0}),document.removeEventListener("touchcancel",N,{capture:!0})}},[t,n,r,s,a,l,c]),{isTouchPanning:g}}const Ze=10,Dr=10;function lg({widgets:e,scale:t}){const n=G(a=>a._takeSnapshot),r=G(a=>a.updateWidgetPositionNoSnapshot);return{handleAutoStack:E.useCallback(()=>{if(e.length===0)return;n("Auto stack");const a=document.querySelectorAll(".react-draggable[data-widget-id]"),l=[];a.forEach(u=>{const p=u.getAttribute("data-widget-id");if(p){const v=u.getBoundingClientRect();l.push({id:p,w:Math.ceil(v.width/t/Ze)*Ze,h:Math.ceil(v.height/t/Ze)*Ze})}});const c=e.map(u=>{const p=l.find(v=>v.id===u.id);return{id:u.id,groupId:u.groupId,x:u.x,y:u.y,w:p?p.w:u.w||200,h:p?p.h:u.h||120}}),i=new Map,d=[];for(const u of c)if(u.groupId){const p=i.get(u.groupId)||[];p.push(u),i.set(u.groupId,p)}else d.push(u);const h=[];for(const[u,p]of i){if(p.length===0)continue;const v=Math.min(...p.map(S=>S.x)),N=Math.min(...p.map(S=>S.y)),m=Math.max(...p.map(S=>S.x+S.w)),w=Math.max(...p.map(S=>S.y+S.h));h.push({type:"group",id:u,widgets:p,boundingBox:{x:v,y:N,w:m-v,h:w-N},originalOffset:{x:v,y:N}})}for(const u of d)h.push({type:"single",id:u.id,widgets:[u],boundingBox:{x:u.x,y:u.y,w:u.w,h:u.h},originalOffset:{x:u.x,y:u.y}});const g=h.reduce((u,p)=>u+(p.boundingBox.w+Dr)*(p.boundingBox.h+Dr),0),x=Math.max(800,Math.ceil(Math.sqrt(g*1.5)/Ze)*Ze),b=[...h].sort((u,p)=>{const N=Math.floor(u.boundingBox.y/50),m=Math.floor(p.boundingBox.y/50);return N!==m?N-m:u.boundingBox.x-p.boundingBox.x});let y=[{x:0,y:0,w:x,h:1e5}];const j=[],C=(u,p)=>{let v=1/0,N=0,m=0,w=!1;for(const S of y)if(u<=S.w&&p<=S.h){const T=S.w-u,k=S.h-p,D=Math.min(T,k),A=S.y*1e4+D;A<v&&(v=A,N=S.x,m=S.y,w=!0)}return w?{x:N,y:m}:null},f=(u,p,v,N)=>{const m=[];for(const w of y){if(u>=w.x+w.w||u+v<=w.x||p>=w.y+w.h||p+N<=w.y){m.push(w);continue}u>w.x&&m.push({x:w.x,y:w.y,w:u-w.x,h:w.h}),u+v<w.x+w.w&&m.push({x:u+v,y:w.y,w:w.x+w.w-(u+v),h:w.h}),p>w.y&&m.push({x:w.x,y:w.y,w:w.w,h:p-w.y}),p+N<w.y+w.h&&m.push({x:w.x,y:p+N,w:w.w,h:w.y+w.h-(p+N)})}y=m.filter((w,S)=>{for(let T=0;T<m.length;T++){if(S===T)continue;const k=m[T];if(w.x>=k.x&&w.y>=k.y&&w.x+w.w<=k.x+k.w&&w.y+w.h<=k.y+k.h)return!1}return!0})};for(const u of b){const p=u.boundingBox.w+Dr,v=u.boundingBox.h+Dr,N=C(p,v);if(N){const m=Math.round(N.x/Ze)*Ze,w=Math.round(N.y/Ze)*Ze;j.push({item:u,x:m,y:w}),f(m,w,p,v)}else{const m=j.reduce((w,S)=>Math.max(w,S.y+S.item.boundingBox.h+Dr),0);j.push({item:u,x:0,y:m}),f(0,m,p,v)}}for(const u of j){const{item:p,x:v,y:N}=u,m=v-p.originalOffset.x,w=N-p.originalOffset.y;for(const S of p.widgets){const T=Math.round((S.x+m)/Ze)*Ze,k=Math.round((S.y+w)/Ze)*Ze;r(S.id,T,k)}}},[e,t,n,r])}}function ig({widgets:e,scale:t,setScale:n,setPan:r,minScale:s=.1,maxScale:a=5}){return{handleFitAllWidgets:E.useCallback(()=>{if(e.length===0){n(1),r({x:0,y:0});return}const c=document.querySelectorAll(".react-draggable[data-widget-id]"),i=[];if(c.forEach(D=>{const A=D.getAttribute("data-widget-id"),V=e.find(Z=>Z.id===A);if(V){const Z=D.getBoundingClientRect();i.push({x:V.x,y:V.y,w:Z.width/t,h:Z.height/t})}}),i.length===0){n(1),r({x:0,y:0});return}const d=Math.min(...i.map(D=>D.x)),h=Math.min(...i.map(D=>D.y)),g=Math.max(...i.map(D=>D.x+D.w)),x=Math.max(...i.map(D=>D.y+D.h)),b=g-d,y=x-h,j=window.innerWidth,C=window.innerHeight,f=60,u=j-f*2,p=C-f*2,v=u/b,N=p/y,m=Math.min(Math.max(Math.min(v,N),s),a),w=(d+g)/2,S=(h+x)/2,T=j/2-w*m,k=C/2-S*m;n(m),r({x:T,y:k})},[e,t,n,r,s,a])}}const cg=[{type:"CHECKBOX",label:"Checkbox"},{type:"TOGGLE_GROUP",label:"Conditions"},{type:"DICE_ROLLER",label:"Dice Roller"},{type:"DICE_TRAY",label:"Dice Tray"},{type:"FORM",label:"Form"},{type:"HEALTH_BAR",label:"Health Bar"},{type:"IMAGE",label:"Image"},{type:"LIST",label:"List"},{type:"MAP_SKETCHER",label:"Map Sketcher"},{type:"NUMBER_DISPLAY",label:"Number Display"},{type:"NUMBER",label:"Number Tracker"},{type:"POOL",label:"Resource Pool"},{type:"PROGRESS_BAR",label:"Progress Bar"},{type:"REST_BUTTON",label:"Rest Button"},{type:"ROLL_TABLE",label:"Roll Table"},{type:"SPELL_SLOT",label:"Spell Slots"},{type:"TABLE",label:"Table"},{type:"TEXT",label:"Text Area"},{type:"TIME_TRACKER",label:"Time Tracker"}];function ug({collapsed:e,onToggle:t}){const n=G(f=>f.addWidget),r=G(f=>f.addWidgetFromTemplate),s=G(f=>f.activeCharacterId),l=G(f=>f.characters).find(f=>f.id===s),c=l!=null&&l.theme?wn(l.theme):void 0,i=l!=null&&l.theme?zs(l.theme):void 0,d=(c==null?void 0:c.cardTexture)||(i==null?void 0:i.cardTexture)||"none",h=vt(d),g=ks(f=>f.templates),x=ks(f=>f.removeTemplate),[b,y]=E.useState(null),j=f=>{n(f,100,100)},C=(f,u)=>{f.dataTransfer.setData("widgetType",u),f.dataTransfer.effectAllowed="copy"};return o.jsxs(o.Fragment,{children:[!e&&o.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:t}),o.jsxs("div",{className:`fixed left-0 top-0 bottom-0 w-[80vw] max-w-[280px] bg-theme-paper border-r-[length:var(--border-width)] border-theme-border z-50 flex flex-col p-3 shadow-theme overflow-hidden transition-transform duration-300 ease-in-out safe-area-bottom touch-pan-y ${e?"-translate-x-full":"translate-x-0"}`,children:[h&&o.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",style:{backgroundColor:"var(--color-paper)"},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[d]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:"var(--card-texture-opacity)",mixBlendMode:"overlay"}})}),o.jsx("button",{onClick:t,className:"absolute top-3 right-3 w-10 h-10 bg-theme-accent text-theme-paper font-bold flex items-center justify-center rounded-button z-20 shadow-theme",children:""}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full overflow-y-auto touch-pan-y pt-12",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h2",{className:"text-xl font-bold uppercase tracking-wider border-b-[length:var(--border-width)] border-theme-border pb-2 text-theme-ink font-heading",children:"Toolbox"})}),o.jsx("div",{className:"flex flex-col gap-2",children:cg.map(({type:f,label:u})=>o.jsx("div",{draggable:!0,onDragStart:p=>C(p,f),onClick:()=>j(f),className:"p-2 border-[length:var(--border-width)] border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-all text-left font-bold shadow-theme active:translate-x-[2px] active:translate-y-[2px] active:shadow-none cursor-pointer flex items-center gap-2 bg-theme-paper text-theme-ink rounded-button",children:o.jsxs("span",{className:"text-xs font-body",children:["+ ",u]})},f))}),g.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mt-6 mb-4",children:o.jsx("h2",{className:"text-xl font-bold uppercase tracking-wider border-b-[length:var(--border-width)] border-theme-border pb-2 text-theme-ink font-heading",children:"Templates"})}),o.jsx("div",{className:"flex flex-col gap-2",children:g.map(f=>o.jsxs("div",{className:"p-2 border-[length:var(--border-width)] border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-all text-left font-bold shadow-theme active:translate-x-[2px] active:translate-y-[2px] active:shadow-none cursor-pointer flex items-center justify-between bg-theme-paper text-theme-ink rounded-theme group",children:[o.jsxs("span",{className:"text-xs font-body flex-1 truncate",onClick:()=>r(f),children:["+ ",f.name]}),b===f.id?o.jsxs("div",{className:"flex gap-1 ml-2",children:[o.jsx("button",{className:"px-2 py-0.5 text-xs bg-red-500 text-white rounded hover:bg-red-600 transition-colors",onClick:u=>{u.stopPropagation(),x(f.id),y(null)},children:"Yes"}),o.jsx("button",{className:"px-2 py-0.5 text-xs bg-theme-border text-theme-ink rounded hover:bg-theme-muted transition-colors",onClick:u=>{u.stopPropagation(),y(null)},children:"No"})]}):o.jsx("button",{className:"ml-2 w-5 h-5 flex items-center justify-center text-theme-muted hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:u=>{u.stopPropagation(),y(f.id)},title:"Delete template",children:""})]},f.id))})]}),o.jsxs("div",{className:"mt-auto pt-4 text-[10px] text-theme-muted border-t border-theme-border/50 font-body",children:[o.jsx("p",{children:"Tap to add widgets."}),o.jsx("p",{children:"Pan with finger/mouse."}),o.jsx("p",{children:"Pinch/scroll to zoom."}),o.jsx("p",{className:"mt-2 text-theme-ink font-bold",children:"Edit Mode Active"})]})]})]})]})}function dg({theme:e,onSave:t,onCancel:n,onDelete:r}){const s=!!(e!=null&&e.id&&e.id.length>0),a=Px(),[l,c]=E.useState((e==null?void 0:e.name)||a.name),[i,d]=E.useState((e==null?void 0:e.icon)||a.icon),[h,g]=E.useState((e==null?void 0:e.description)||a.description),[x,b]=E.useState((e==null?void 0:e.colors)||a.colors),[y,j]=E.useState((e==null?void 0:e.fonts.heading)||a.fonts.heading),[C,f]=E.useState((e==null?void 0:e.fonts.body)||a.fonts.body),[u,p]=E.useState((e==null?void 0:e.borderRadius)||a.borderRadius),[v,N]=E.useState((e==null?void 0:e.buttonRadius)||a.buttonRadius),[m,w]=E.useState((e==null?void 0:e.borderWidth)||a.borderWidth),[S,T]=E.useState((e==null?void 0:e.shadowStyle)||a.shadowStyle),[k,D]=E.useState((e==null?void 0:e.cardTexture)||a.cardTexture),A="#ffffff",[V,Z]=E.useState((e==null?void 0:e.textureOpacity)??a.textureOpacity),[oe,ee]=E.useState((e==null?void 0:e.borderStyle)||a.borderStyle),[F,M]=E.useState(!1),R=(H,te)=>{b(me=>({...me,[H]:te}))},W=()=>{const H={id:e!=null&&e.id&&e.id.length>0?e.id:`custom-${He()}`,name:l,icon:i,description:h,colors:x,fonts:{heading:y,body:C},borderRadius:u,buttonRadius:v,borderWidth:m,shadowStyle:S,cardTexture:k,textureColor:"#ffffff",textureOpacity:V,borderStyle:oe};t(H)},Q=[{key:"background",label:"Background"},{key:"paper",label:"Paper/Card"},{key:"ink",label:"Text/Ink"},{key:"accent",label:"Accent"},{key:"accentHover",label:"Accent Hover"},{key:"border",label:"Border"},{key:"shadow",label:"Shadow"},{key:"muted",label:"Muted Text"},{key:"glow",label:"Glow"}],X=()=>o.jsx("div",{className:"p-3",style:{backgroundColor:x.background,borderRadius:u},children:o.jsxs("div",{className:"p-3 relative overflow-hidden",style:{backgroundColor:x.paper,backgroundImage:vt(k)?"none":mi(k,A,V),border:`${m} ${oe} ${x.border}`,borderRadius:u,boxShadow:pi(S,x.glow).replace(/var\(--color-shadow\)/g,x.shadow).replace(/var\(--color-border\)/g,x.border).replace(/var\(--color-glow\)/g,x.glow)},children:[vt(k)&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:x.paper,borderRadius:u},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[k]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:V,mixBlendMode:"overlay",borderRadius:u}})}),o.jsxs("h4",{className:"text-base font-bold mb-2 relative",style:{color:x.ink,fontFamily:y},children:[i," ",l]}),o.jsx("p",{className:"text-xs mb-3 relative",style:{color:x.muted,fontFamily:C},children:h}),o.jsx("button",{className:"px-3 py-1.5 text-sm font-bold transition-colors relative",style:{backgroundColor:x.accent,color:x.paper,borderRadius:v,fontFamily:y},children:"Sample Button"})]})});return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-2",children:o.jsxs("div",{className:"bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme w-full max-w-4xl max-h-[95vh] flex flex-col",onClick:H=>H.stopPropagation(),children:[o.jsx("div",{className:"p-3 border-b-[length:var(--border-width)] border-theme-border bg-theme-paper flex-shrink-0",children:o.jsx("h2",{className:"text-lg font-bold text-theme-ink font-heading",children:s?" Edit Custom Theme":" Create Custom Theme"})}),o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsxs("div",{className:"w-full flex-shrink-0 border-b-[length:var(--border-width)] border-theme-border p-3 bg-theme-background/50 max-h-[40vh] overflow-auto",children:[o.jsx("h3",{className:"text-sm font-bold text-theme-ink mb-2 uppercase tracking-wider font-heading",children:"Preview"}),o.jsx("div",{children:o.jsx(X,{})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-5",children:[o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-bold text-theme-ink mb-3 uppercase tracking-wider font-heading",children:"Basic Info"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Theme Name"}),o.jsx("input",{type:"text",value:l,onChange:H=>c(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",placeholder:"My Custom Theme"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Icon"}),o.jsxs("button",{onClick:()=>M(!F),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body text-left flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:i}),o.jsx("span",{className:"text-xs text-theme-muted",children:"Click to change"})]}),F&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 p-2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme z-20 grid grid-cols-10 gap-1 max-h-40 overflow-y-auto",children:Mx.map(H=>o.jsx("button",{onClick:()=>{d(H),M(!1)},className:`p-1 text-lg hover:bg-theme-accent hover:text-theme-paper rounded ${i===H?"bg-theme-accent text-theme-paper":""}`,children:H},H))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Description"}),o.jsx("input",{type:"text",value:h,onChange:H=>g(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",placeholder:"A personalized theme"})]})]})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-bold text-theme-ink mb-3 uppercase tracking-wider font-heading",children:"Colors"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Q.map(({key:H,label:te})=>o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("label",{className:"block text-[10px] font-bold text-theme-muted mb-1 font-body text-center",children:te}),o.jsx("input",{type:"color",value:x[H],onChange:me=>R(H,me.target.value),className:"w-10 h-10 border-[length:var(--border-width)] border-theme-border rounded-theme cursor-pointer"})]},H))})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-bold text-theme-ink mb-3 uppercase tracking-wider font-heading",children:"Fonts"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Heading Font"}),o.jsx("select",{value:y,onChange:H=>j(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:eu.map(H=>o.jsx("option",{value:H.value,style:{fontFamily:H.value},children:H.label},H.value))}),o.jsx("p",{className:"text-xs text-theme-muted mt-1",style:{fontFamily:y},children:"Preview: The quick brown fox"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Body Font"}),o.jsx("select",{value:C,onChange:H=>f(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:eu.map(H=>o.jsx("option",{value:H.value,style:{fontFamily:H.value},children:H.label},H.value))}),o.jsx("p",{className:"text-xs text-theme-muted mt-1",style:{fontFamily:C},children:"Preview: The quick brown fox"})]})]})]}),o.jsxs("section",{children:[o.jsx("h3",{className:"text-sm font-bold text-theme-ink mb-3 uppercase tracking-wider font-heading",children:"Style"}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Card Border Radius"}),o.jsxs("select",{value:u,onChange:H=>p(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:[o.jsx("option",{value:"0px",children:"Sharp (0px)"}),o.jsx("option",{value:"2px",children:"Subtle (2px)"}),o.jsx("option",{value:"4px",children:"Small (4px)"}),o.jsx("option",{value:"8px",children:"Medium (8px)"}),o.jsx("option",{value:"12px",children:"Large (12px)"}),o.jsx("option",{value:"16px",children:"Extra Large (16px)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Button Border Radius"}),o.jsxs("select",{value:v,onChange:H=>N(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:[o.jsx("option",{value:"0px",children:"Sharp (0px)"}),o.jsx("option",{value:"2px",children:"Subtle (2px)"}),o.jsx("option",{value:"4px",children:"Small (4px)"}),o.jsx("option",{value:"8px",children:"Medium (8px)"}),o.jsx("option",{value:"12px",children:"Large (12px)"}),o.jsx("option",{value:"16px",children:"Extra Large (16px)"}),o.jsx("option",{value:"9999px",children:"Pill (Full)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Border Width"}),o.jsxs("select",{value:m,onChange:H=>w(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:[o.jsx("option",{value:"0px",children:"None (0px)"}),o.jsx("option",{value:"1px",children:"Thin (1px)"}),o.jsx("option",{value:"2px",children:"Medium (2px)"}),o.jsx("option",{value:"3px",children:"Thick (3px)"}),o.jsx("option",{value:"4px",children:"Extra Thick (4px)"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Border Style"}),o.jsx("select",{value:oe,onChange:H=>ee(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:Ex.map(H=>o.jsx("option",{value:H.value,children:H.label},H.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Shadow Style"}),o.jsx("select",{value:S,onChange:H=>T(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:Tx.map(H=>o.jsx("option",{value:H.value,children:H.label},H.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:"Card Texture"}),o.jsx("select",{value:k,onChange:H=>D(H.target.value),className:"w-full p-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink rounded-theme font-body",children:Cx.map(H=>o.jsx("option",{value:H.value,children:H.label},H.value))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-theme-muted mb-1 font-body",children:["Texture Opacity: ",Math.round(V*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:V,onChange:H=>Z(parseFloat(H.target.value)),className:"w-full h-2 bg-theme-border rounded-theme appearance-none cursor-pointer",disabled:k==="none"})]})]})]})]})]}),o.jsxs("div",{className:"p-3 border-t-[length:var(--border-width)] border-theme-border bg-theme-paper flex flex-wrap gap-2 justify-between flex-shrink-0",children:[o.jsx("div",{children:s&&r&&o.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this custom theme?")&&r()},className:"px-3 py-2 bg-red-500 text-white text-sm font-bold rounded-button hover:bg-red-600 transition-colors font-heading",children:" Delete"})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:n,className:"px-3 py-2 border-[length:var(--border-width)] border-theme-border bg-theme-paper text-theme-ink text-sm font-bold rounded-button hover:bg-theme-accent hover:text-theme-paper transition-colors font-heading",children:"Cancel"}),o.jsx("button",{onClick:W,className:"px-3 py-2 bg-theme-accent text-theme-paper text-sm font-bold rounded-button hover:bg-theme-accent-hover transition-colors font-heading",children:s?" Save Changes":" Create Theme"})]})]})]})})}function hg({collapsed:e,onToggle:t}){const n=G(k=>k.activeCharacterId),r=G(k=>k.characters),s=G(k=>k.updateCharacterTheme),a=r.find(k=>k.id===n),l=(a==null?void 0:a.theme)||"default",c=a!=null&&a.theme?wn(a.theme):void 0,i=a!=null&&a.theme?zs(a.theme):void 0,d=(c==null?void 0:c.cardTexture)||(i==null?void 0:i.cardTexture)||"none",h=vt(d),g=or(k=>k.customThemes),x=or(k=>k.addCustomTheme),b=or(k=>k.updateCustomTheme),y=or(k=>k.deleteCustomTheme),[j,C]=E.useState(!1),[f,u]=E.useState(void 0),p=k=>{if(n){s(n,k);const D=wn(k);D?pl(D):yr(k)}},v=()=>{u(void 0),C(!0)},N=(k,D)=>{D.stopPropagation(),u(k),C(!0)},m=(k,D)=>{D.stopPropagation();const A={id:"",name:`${k.name} (Copy)`,icon:k.icon,description:k.description,colors:{...k.colors},fonts:{...k.fonts},borderRadius:k.borderRadius,buttonRadius:k.buttonRadius||k.borderRadius,borderWidth:k.borderWidth,shadowStyle:k.shadowStyle,cardTexture:k.cardTexture,textureColor:k.colors.paper,textureOpacity:k.textureOpacity??.15,borderStyle:k.borderStyle};u(A),C(!0)},w=k=>{f&&f.id?(b(k.id,k),l===k.id&&pl(k)):x(k),C(!1),u(void 0)},S=()=>{f&&(l===f.id&&n&&(s(n,"default"),yr("default")),y(f.id)),C(!1),u(void 0)},T=()=>{const k=yn.find(A=>A.id===l);if(k)return k.name;const D=g.find(A=>A.id===l);return D?D.name:"Unknown"};return o.jsxs(o.Fragment,{children:[j&&o.jsx(dg,{theme:f,onSave:w,onCancel:()=>{C(!1),u(void 0)},onDelete:f!=null&&f.id?S:void 0}),!e&&o.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:t}),o.jsxs("div",{className:`fixed right-0 top-0 bottom-0 w-[80vw] max-w-[280px] bg-theme-paper border-l-[length:var(--border-width)] border-theme-border z-50 flex flex-col p-3 shadow-theme overflow-hidden transition-transform duration-300 ease-in-out safe-area-bottom touch-pan-y ${e?"translate-x-full":"translate-x-0"}`,children:[h&&o.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",style:{backgroundColor:"var(--color-paper)"},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[d]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:"var(--card-texture-opacity)",mixBlendMode:"overlay"}})}),o.jsx("button",{onClick:t,className:"absolute top-3 right-3 w-10 h-10 bg-theme-accent text-theme-paper font-bold flex items-center justify-center rounded-button z-20 shadow-theme",children:""}),o.jsxs("div",{className:"relative z-10 flex flex-col h-full overflow-y-auto touch-pan-y pt-12",children:[o.jsx("div",{className:"mb-4",children:o.jsx("h2",{className:"text-xl font-bold uppercase tracking-wider border-b-[length:var(--border-width)] border-theme-border pb-2 text-theme-ink font-heading",children:" Themes"})}),o.jsx("div",{className:"flex flex-col gap-2",children:yn.map(k=>{const D=vt(k.cardTexture)?k.cardTexture:null,A=l===k.id;return o.jsxs("div",{style:{backgroundColor:A?k.colors.accent:k.colors.paper,color:A?k.colors.paper:k.colors.ink,borderColor:k.colors.border,borderRadius:k.borderRadius,borderWidth:k.borderWidth,fontFamily:k.fonts.body,boxShadow:`3px 3px 0 ${k.colors.shadow}`,position:"relative",overflow:"hidden"},className:"p-2 border-solid transition-all text-left font-bold",children:[D&&!A&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:k.colors.paper,borderRadius:k.borderRadius},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[D]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:k.textureOpacity??.15,mixBlendMode:"overlay",borderRadius:k.borderRadius}})}),o.jsxs("button",{onClick:()=>p(k.id),className:"relative w-full text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 pr-8",children:[o.jsx("span",{className:"text-base",children:k.icon}),o.jsx("span",{className:"text-xs",style:{fontFamily:k.fonts.heading},children:k.name})]}),o.jsx("p",{className:"text-[10px] mt-1 opacity-70",children:k.description}),o.jsxs("div",{className:"flex gap-1 mt-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.paper},title:"Paper"}),o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.ink},title:"Ink"}),o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.accent},title:"Accent"}),o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.background},title:"Background"})]})]}),o.jsx("button",{onClick:V=>m(k,V),style:{backgroundColor:A?`${k.colors.paper}33`:`${k.colors.accent}1a`,color:A?k.colors.paper:k.colors.accent},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center rounded text-xs hover:scale-110 transition-transform z-10",title:"Copy to custom theme",children:""})]},k.id)})}),o.jsxs("div",{className:"mt-6 pt-4 border-t border-theme-border/50",children:[o.jsx("h3",{className:"text-sm font-bold text-theme-ink mb-3 uppercase tracking-wider font-heading",children:" Custom Themes"}),o.jsxs("button",{onClick:v,className:"w-full p-2 border-[length:var(--border-width)] border-dashed border-theme-border transition-all text-left font-bold bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper hover:border-solid mb-2",style:{borderRadius:"min(var(--button-radius), 16px)"},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-base",children:""}),o.jsx("span",{className:"text-xs font-heading",children:"Create Custom Theme"})]}),o.jsx("p",{className:"text-[10px] mt-1 opacity-70 font-body",children:"Design your own unique theme"})]}),o.jsx("div",{className:"flex flex-col gap-2 mt-3",children:g.map(k=>{const D=vt(k.cardTexture||"")?k.cardTexture:null,A=l===k.id;return o.jsxs("div",{style:{backgroundColor:A?k.colors.accent:k.colors.paper,color:A?k.colors.paper:k.colors.ink,borderColor:k.colors.border,borderRadius:k.borderRadius,borderWidth:k.borderWidth,fontFamily:k.fonts.body,boxShadow:`3px 3px 0 ${k.colors.shadow}`,position:"relative",overflow:"hidden"},className:"p-2 border-solid transition-all text-left font-bold",children:[D&&!A&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundColor:k.colors.paper,borderRadius:k.borderRadius},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[D]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:k.textureOpacity??.15,mixBlendMode:"overlay",borderRadius:k.borderRadius}})}),o.jsxs("button",{onClick:()=>p(k.id),className:"relative w-full text-left",children:[o.jsxs("div",{className:"flex items-center gap-2 pr-8",children:[o.jsx("span",{className:"text-base",children:k.icon}),o.jsx("span",{className:"text-xs",style:{fontFamily:k.fonts.heading},children:k.name})]}),o.jsx("p",{className:"text-[10px] mt-1 opacity-70",children:k.description}),o.jsxs("div",{className:"flex gap-1 mt-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.paper},title:"Paper"}),o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.ink},title:"Ink"}),o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.accent},title:"Accent"}),o.jsx("div",{className:"w-3 h-3 rounded-full border border-black/20",style:{backgroundColor:k.colors.background},title:"Background"})]})]}),o.jsx("button",{onClick:V=>N(k,V),style:{backgroundColor:A?`${k.colors.paper}33`:`${k.colors.accent}1a`,color:A?k.colors.paper:k.colors.accent},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center rounded text-xs hover:scale-110 transition-transform z-10",title:"Edit theme",children:""})]},k.id)})}),g.length===0&&o.jsx("p",{className:"text-[10px] text-theme-muted mt-2 font-body",children:"No custom themes yet. Create one above!"})]}),o.jsxs("div",{className:"mt-auto pt-4 text-[10px] text-theme-muted border-t border-theme-border/50 font-body",children:[o.jsx("p",{children:"Select a theme to change the appearance of your character sheet."}),o.jsxs("p",{className:"mt-2 text-theme-ink font-bold",children:["Current: ",T()]})]})]})]})]})}var Fs={exports:{}},tf={},nf={exports:{}},fg="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mg=fg,pg=mg;function rf(){}function of(){}of.resetWarningCache=rf;var xg=function(){function e(r,s,a,l,c,i){if(i!==pg){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:of,resetWarningCache:rf};return n.PropTypes=n,n};nf.exports=xg();var sf=nf.exports,xl={exports:{}};function af(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=af(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function tu(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=af(e))&&(r&&(r+=" "),r+=t);return r}xl.exports=tu,xl.exports.clsx=tu;var gg=xl.exports,ve={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.dontSetMe=kg;$t.findInArray=bg;$t.int=wg;$t.isFunction=vg;$t.isNum=yg;function bg(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function vg(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function yg(e){return typeof e=="number"&&!isNaN(e)}function wg(e){return parseInt(e,10)}function kg(e,t,n){if(e[t])return new Error(`Invalid prop ${t} passed to ${n} - do not set this, set it on the child.`)}var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.browserPrefixToKey=cf;Hn.browserPrefixToStyle=jg;Hn.default=void 0;Hn.getPrefix=lf;const va=["Moz","Webkit","O","ms"];function lf(){var n,r;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!t||e in t)return"";for(let s=0;s<va.length;s++)if(cf(e,va[s])in t)return va[s];return""}function cf(e,t){return t?`${t}${Ng(e)}`:e}function jg(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function Ng(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}Hn.default=lf();Object.defineProperty(ve,"__esModule",{value:!0});ve.addClassName=hf;ve.addEvent=Cg;ve.addUserSelectStyles=$g;ve.createCSSTransform=Dg;ve.createSVGTransform=Lg;ve.getTouch=_g;ve.getTouchIdentifier=Og;ve.getTranslation=xi;ve.innerHeight=Ig;ve.innerWidth=Pg;ve.matchesSelector=df;ve.matchesSelectorAndParentsTo=Sg;ve.offsetXYFromParent=Rg;ve.outerHeight=Eg;ve.outerWidth=Mg;ve.removeClassName=ff;ve.removeEvent=Tg;ve.scheduleRemoveUserSelectStyles=Ag;var ct=$t,nu=uf(Hn);function uf(e,t){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(uf=function(s,a){if(!a&&s&&s.__esModule)return s;var l,c,i={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return i;if(l=a?r:n){if(l.has(s))return l.get(s);l.set(s,i)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((c=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(c.get||c.set)?l(i,d,c):i[d]=s[d]);return i})(e,t)}let $o="";function df(e,t){return $o||($o=(0,ct.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ct.isFunction)(e[n])})),(0,ct.isFunction)(e[$o])?e[$o](t):!1}function Sg(e,t,n){let r=e;do{if(df(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Cg(e,t,n,r){if(!e)return;const s={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,s):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function Tg(e,t,n,r){if(!e)return;const s={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,s):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function Eg(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ct.int)(n.borderTopWidth),t+=(0,ct.int)(n.borderBottomWidth),t}function Mg(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ct.int)(n.borderLeftWidth),t+=(0,ct.int)(n.borderRightWidth),t}function Ig(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ct.int)(n.paddingTop),t-=(0,ct.int)(n.paddingBottom),t}function Pg(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ct.int)(n.paddingLeft),t-=(0,ct.int)(n.paddingRight),t}function Rg(e,t,n){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-s.left)/n,l=(e.clientY+t.scrollTop-s.top)/n;return{x:a,y:l}}function Dg(e,t){const n=xi(e,t,"px");return{[(0,nu.browserPrefixToKey)("transform",nu.default)]:n}}function Lg(e,t){return xi(e,t,"")}function xi(e,t,n){let{x:r,y:s}=e,a=`translate(${r}${n},${s}${n})`;if(t){const l=`${typeof t.x=="string"?t.x:t.x+n}`,c=`${typeof t.y=="string"?t.y:t.y+n}`;a=`translate(${l}, ${c})`+a}return a}function _g(e,t){return e.targetTouches&&(0,ct.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,ct.findInArray)(e.changedTouches,n=>t===n.identifier)}function Og(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function $g(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&hf(e.body,"react-draggable-transparent-selection")}function Ag(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{ru(e)}):ru(e)}function ru(e){if(e)try{if(e.body&&ff(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function hf(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function ff(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var At={};Object.defineProperty(At,"__esModule",{value:!0});At.canDragX=Fg;At.canDragY=Hg;At.createCoreData=Ug;At.createDraggableData=Vg;At.getBoundPosition=Wg;At.getControlPosition=Bg;At.snapToGrid=zg;var st=$t,sr=ve;function Wg(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:Gg(r);const s=gi(e);if(typeof r=="string"){const{ownerDocument:a}=s,l=a.defaultView;let c;if(r==="parent"?c=s.parentNode:c=s.getRootNode().querySelector(r),!(c instanceof l.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const i=c,d=l.getComputedStyle(s),h=l.getComputedStyle(i);r={left:-s.offsetLeft+(0,st.int)(h.paddingLeft)+(0,st.int)(d.marginLeft),top:-s.offsetTop+(0,st.int)(h.paddingTop)+(0,st.int)(d.marginTop),right:(0,sr.innerWidth)(i)-(0,sr.outerWidth)(s)-s.offsetLeft+(0,st.int)(h.paddingRight)-(0,st.int)(d.marginRight),bottom:(0,sr.innerHeight)(i)-(0,sr.outerHeight)(s)-s.offsetTop+(0,st.int)(h.paddingBottom)-(0,st.int)(d.marginBottom)}}return(0,st.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,st.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,st.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,st.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function zg(e,t,n){const r=Math.round(t/e[0])*e[0],s=Math.round(n/e[1])*e[1];return[r,s]}function Fg(e){return e.props.axis==="both"||e.props.axis==="x"}function Hg(e){return e.props.axis==="both"||e.props.axis==="y"}function Bg(e,t,n){const r=typeof t=="number"?(0,sr.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const s=gi(n),a=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,sr.offsetXYFromParent)(r||e,a,n.props.scale)}function Ug(e,t,n){const r=!(0,st.isNum)(e.lastX),s=gi(e);return r?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function Vg(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function Gg(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function gi(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Hs={},Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.default=Yg;function Yg(){}Object.defineProperty(Hs,"__esModule",{value:!0});Hs.default=void 0;var ya=mf(E),Ge=bi(sf),Xg=bi(Fn),Fe=ve,tn=At,wa=$t,Lr=bi(Bs);function bi(e){return e&&e.__esModule?e:{default:e}}function mf(e,t){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(mf=function(s,a){if(!a&&s&&s.__esModule)return s;var l,c,i={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return i;if(l=a?r:n){if(l.has(s))return l.get(s);l.set(s,i)}for(const d in s)d!=="default"&&{}.hasOwnProperty.call(s,d)&&((c=(l=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,d))&&(c.get||c.set)?l(i,d,c):i[d]=s[d]);return i})(e,t)}function Ye(e,t,n){return(t=Kg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kg(e){var t=Qg(e,"string");return typeof t=="symbol"?t:t+""}function Qg(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Nt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let nn=Nt.mouse,Us=class extends ya.Component{constructor(){super(...arguments),Ye(this,"dragging",!1),Ye(this,"lastX",NaN),Ye(this,"lastY",NaN),Ye(this,"touchIdentifier",null),Ye(this,"mounted",!1),Ye(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Fe.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,Fe.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const s=(0,Fe.getTouchIdentifier)(t);this.touchIdentifier=s;const a=(0,tn.getControlPosition)(t,s,this);if(a==null)return;const{x:l,y:c}=a,i=(0,tn.createCoreData)(this,l,c);(0,Lr.default)("DraggableCore: handleDragStart: %j",i),(0,Lr.default)("calling",this.props.onStart),!(this.props.onStart(t,i)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Fe.addUserSelectStyles)(r),this.dragging=!0,this.lastX=l,this.lastY=c,(0,Fe.addEvent)(r,nn.move,this.handleDrag),(0,Fe.addEvent)(r,nn.stop,this.handleDragStop))}),Ye(this,"handleDrag",t=>{const n=(0,tn.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX,i=s-this.lastY;if([c,i]=(0,tn.snapToGrid)(this.props.grid,c,i),!c&&!i)return;r=this.lastX+c,s=this.lastY+i}const a=(0,tn.createCoreData)(this,r,s);if((0,Lr.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const i=document.createEvent("MouseEvents");i.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(i)}return}this.lastX=r,this.lastY=s}),Ye(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,tn.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let i=r-this.lastX||0,d=s-this.lastY||0;[i,d]=(0,tn.snapToGrid)(this.props.grid,i,d),r=this.lastX+i,s=this.lastY+d}const a=(0,tn.createCoreData)(this,r,s);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const c=this.findDOMNode();c&&this.props.enableUserSelectHack&&(0,Fe.scheduleRemoveUserSelectStyles)(c.ownerDocument),(0,Lr.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,c&&((0,Lr.default)("DraggableCore: Removing handlers"),(0,Fe.removeEvent)(c.ownerDocument,nn.move,this.handleDrag),(0,Fe.removeEvent)(c.ownerDocument,nn.stop,this.handleDragStop))}),Ye(this,"onMouseDown",t=>(nn=Nt.mouse,this.handleDragStart(t))),Ye(this,"onMouseUp",t=>(nn=Nt.mouse,this.handleDragStop(t))),Ye(this,"onTouchStart",t=>(nn=Nt.touch,this.handleDragStart(t))),Ye(this,"onTouchEnd",t=>(nn=Nt.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Fe.addEvent)(t,Nt.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,Fe.removeEvent)(n,Nt.mouse.move,this.handleDrag),(0,Fe.removeEvent)(n,Nt.touch.move,this.handleDrag),(0,Fe.removeEvent)(n,Nt.mouse.stop,this.handleDragStop),(0,Fe.removeEvent)(n,Nt.touch.stop,this.handleDragStop),(0,Fe.removeEvent)(t,Nt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Fe.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var t,n,r;return(t=this.props)!=null&&t.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Xg.default.findDOMNode(this)}render(){return ya.cloneElement(ya.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Hs.default=Us;Ye(Us,"displayName","DraggableCore");Ye(Us,"propTypes",{allowAnyClick:Ge.default.bool,allowMobileScroll:Ge.default.bool,children:Ge.default.node.isRequired,disabled:Ge.default.bool,enableUserSelectHack:Ge.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ge.default.arrayOf(Ge.default.number),handle:Ge.default.string,cancel:Ge.default.string,nodeRef:Ge.default.object,onStart:Ge.default.func,onDrag:Ge.default.func,onStop:Ge.default.func,onMouseDown:Ge.default.func,scale:Ge.default.number,className:wa.dontSetMe,style:wa.dontSetMe,transform:wa.dontSetMe});Ye(Us,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return i.default}}),e.default=void 0;var t=g(E),n=h(sf),r=h(Fn),s=gg,a=ve,l=At,c=$t,i=h(Hs),d=h(Bs);function h(f){return f&&f.__esModule?f:{default:f}}function g(f,u){if(typeof WeakMap=="function")var p=new WeakMap,v=new WeakMap;return(g=function(N,m){if(!m&&N&&N.__esModule)return N;var w,S,T={__proto__:null,default:N};if(N===null||typeof N!="object"&&typeof N!="function")return T;if(w=m?v:p){if(w.has(N))return w.get(N);w.set(N,T)}for(const k in N)k!=="default"&&{}.hasOwnProperty.call(N,k)&&((S=(w=Object.defineProperty)&&Object.getOwnPropertyDescriptor(N,k))&&(S.get||S.set)?w(T,k,S):T[k]=N[k]);return T})(f,u)}function x(){return x=Object.assign?Object.assign.bind():function(f){for(var u=1;u<arguments.length;u++){var p=arguments[u];for(var v in p)({}).hasOwnProperty.call(p,v)&&(f[v]=p[v])}return f},x.apply(null,arguments)}function b(f,u,p){return(u=y(u))in f?Object.defineProperty(f,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[u]=p,f}function y(f){var u=j(f,"string");return typeof u=="symbol"?u:u+""}function j(f,u){if(typeof f!="object"||!f)return f;var p=f[Symbol.toPrimitive];if(p!==void 0){var v=p.call(f,u);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(f)}class C extends t.Component{static getDerivedStateFromProps(u,p){let{position:v}=u,{prevPropsPosition:N}=p;return v&&(!N||v.x!==N.x||v.y!==N.y)?((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:v,prevPropsPosition:N}),{x:v.x,y:v.y,prevPropsPosition:{...v}}):null}constructor(u){super(u),b(this,"onDragStart",(p,v)=>{if((0,d.default)("Draggable: onDragStart: %j",v),this.props.onStart(p,(0,l.createDraggableData)(this,v))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),b(this,"onDrag",(p,v)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",v);const N=(0,l.createDraggableData)(this,v),m={x:N.x,y:N.y,slackX:0,slackY:0};if(this.props.bounds){const{x:S,y:T}=m;m.x+=this.state.slackX,m.y+=this.state.slackY;const[k,D]=(0,l.getBoundPosition)(this,m.x,m.y);m.x=k,m.y=D,m.slackX=this.state.slackX+(S-m.x),m.slackY=this.state.slackY+(T-m.y),N.x=m.x,N.y=m.y,N.deltaX=m.x-this.state.x,N.deltaY=m.y-this.state.y}if(this.props.onDrag(p,N)===!1)return!1;this.setState(m)}),b(this,"onDragStop",(p,v)=>{if(!this.state.dragging||this.props.onStop(p,(0,l.createDraggableData)(this,v))===!1)return!1;(0,d.default)("Draggable: onDragStop: %j",v);const m={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:S,y:T}=this.props.position;m.x=S,m.y=T}this.setState(m)}),this.state={dragging:!1,dragged:!1,x:u.position?u.position.x:u.defaultPosition.x,y:u.position?u.position.y:u.defaultPosition.y,prevPropsPosition:{...u.position},slackX:0,slackY:0,isElementSVG:!1},u.position&&!(u.onDrag||u.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var u,p;return((p=(u=this.props)==null?void 0:u.nodeRef)==null?void 0:p.current)??r.default.findDOMNode(this)}render(){const{axis:u,bounds:p,children:v,defaultPosition:N,defaultClassName:m,defaultClassNameDragging:w,defaultClassNameDragged:S,position:T,positionOffset:k,scale:D,...A}=this.props;let V={},Z=null;const ee=!!!T||this.state.dragging,F=T||N,M={x:(0,l.canDragX)(this)&&ee?this.state.x:F.x,y:(0,l.canDragY)(this)&&ee?this.state.y:F.y};this.state.isElementSVG?Z=(0,a.createSVGTransform)(M,k):V=(0,a.createCSSTransform)(M,k);const R=(0,s.clsx)(v.props.className||"",m,{[w]:this.state.dragging,[S]:this.state.dragged});return t.createElement(i.default,x({},A,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(v),{className:R,style:{...v.props.style,...V},transform:Z}))}}e.default=C,b(C,"displayName","Draggable"),b(C,"propTypes",{...i.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),b(C,"defaultProps",{...i.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(tf);const{default:pf,DraggableCore:Jg}=tf;Fs.exports=pf;Fs.exports.default=pf;Fs.exports.DraggableCore=Jg;var Zg=Fs.exports;const qg=bl(Zg);function vi({widget:e,height:t}){const n=G(S=>S.updateWidgetData),{label:r,numberItems:s=[]}=e.data,[a,l]=E.useState(null),[c,i]=E.useState(""),d="text-xs",h="text-xs",g="w-5 h-5 text-xs",x="text-sm w-8",b="gap-1",f=Math.max(30,t-16-4-0*2),u=(S,T)=>{const k=[...s];k[S]={...k[S],value:k[S].value+T},n(e.id,{numberItems:k})},p=(S,T)=>{l(S),i(String(T))},v=S=>{i(S.target.value)},N=S=>{const T=parseInt(c,10);if(!isNaN(T)){const k=[...s];k[S]={...k[S],value:T},n(e.id,{numberItems:k})}l(null),i("")},m=(S,T)=>{S.key==="Enter"?N(T):S.key==="Escape"&&(l(null),i(""))},w="w-[62px]";return o.jsxs("div",{className:`flex flex-col ${b} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${d} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsxs("div",{className:"flex flex-col gap-0.5 overflow-y-auto overflow-x-hidden flex-1 pr-4",style:{maxHeight:`${f}px`},onWheel:S=>{const T=S.currentTarget;T.scrollHeight>T.clientHeight&&S.stopPropagation()},children:[s.map((S,T)=>o.jsxs("div",{className:`flex items-center ${b}`,children:[o.jsx("span",{className:`flex-1 ${h} text-theme-ink font-body truncate`,children:S.name}),o.jsxs("div",{className:`flex items-center justify-center gap-0.5 flex-shrink-0 ${w}`,children:[o.jsx("button",{onClick:()=>u(T,-1),onMouseDown:k=>k.stopPropagation(),className:`${g} border border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-colors flex items-center justify-center text-theme-ink rounded-button flex-shrink-0`,children:"-"}),a===T?o.jsx("input",{type:"text",inputMode:"numeric",value:c,onChange:v,onBlur:()=>N(T),onKeyDown:k=>m(k,T),onMouseDown:k=>k.stopPropagation(),autoFocus:!0,className:`${x} text-center font-bold text-theme-ink bg-theme-paper border border-theme-border rounded-button flex-shrink-0 outline-none focus:border-theme-accent`}):o.jsx("span",{className:`${x} text-center font-bold text-theme-ink flex-shrink-0 cursor-pointer hover:bg-theme-accent/20 rounded-button`,onClick:()=>p(T,S.value),onMouseDown:k=>k.stopPropagation(),children:S.value}),o.jsx("button",{onClick:()=>u(T,1),onMouseDown:k=>k.stopPropagation(),className:`${g} border border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-colors flex items-center justify-center text-theme-ink rounded-button flex-shrink-0`,children:"+"})]})]},T)),s.length===0&&o.jsx("div",{className:`${h} text-theme-muted italic`,children:"No items yet"})]})]})}function yi({widget:e,width:t,height:n}){const r=G(v=>v.updateWidgetData),{label:s,displayNumbers:a=[],displayLayout:l="horizontal"}=e.data,[c,i]=E.useState(null),[d,h]=E.useState(""),g=(v,N)=>{i(v),h(String(N))},x=v=>{h(v.target.value)},b=v=>{const N=parseInt(d,10);if(!isNaN(N)){const m=[...a];m[v]={...m[v],value:N},r(e.id,{displayNumbers:m})}i(null),h("")},y=(v,N)=>{v.key==="Enter"?b(N):v.key==="Escape"&&(i(null),h(""))},j=l==="horizontal",C=a.length||1,f=Math.min(t/(j?C:1),n/(j?1:C)),u=Math.max(10,Math.min(20,f*.25)),p=Math.max(7,Math.min(10,f*.12));return o.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[s&&o.jsx("div",{className:"font-bold text-theme-ink font-heading shrink-0 truncate px-1",style:{fontSize:"11px",lineHeight:"16px"},children:s}),o.jsxs("div",{className:`flex-1 flex ${j?"flex-row":"flex-col"} items-stretch justify-center gap-1 p-1 min-h-0 min-w-0 overflow-hidden`,children:[a.map((v,N)=>o.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-theme-border rounded-button bg-theme-paper/50 overflow-hidden ${j?"flex-1 max-w-[70px]":"flex-1 max-h-[55px]"}`,style:{minWidth:j?"30px":void 0,minHeight:j?void 0:"30px"},children:[c===N?o.jsx("input",{type:"text",inputMode:"numeric",value:d,onChange:x,onBlur:()=>b(N),onKeyDown:m=>y(m,N),onMouseDown:m=>m.stopPropagation(),autoFocus:!0,className:"text-center font-bold text-theme-ink bg-transparent border-none outline-none w-full",style:{fontSize:`${u}px`}}):o.jsx("span",{className:"font-bold text-theme-ink cursor-pointer hover:text-theme-accent transition-colors leading-none",style:{fontSize:`${u}px`},onClick:()=>g(N,v.value),onMouseDown:m=>m.stopPropagation(),children:v.value}),o.jsx("span",{className:"text-theme-muted font-body truncate w-full text-center px-1 leading-tight",style:{fontSize:`${p}px`},children:v.label})]},N)),a.length===0&&o.jsx("div",{className:"text-xs text-theme-muted italic",children:"No numbers configured"})]})]})}function wi({widget:e,height:t}){const n=G(C=>C.updateWidgetData),{label:r,items:s=[],itemCount:a=5}=e.data,l="text-xs",c="text-xs py-0.5",i="gap-1",x=Math.max(40,t-16-4-0*2),b=Array.from({length:a},(C,f)=>s[f]||""),y=(C,f)=>{const u=[...b];u[C]=f,n(e.id,{items:u})},j=C=>{const f=[...b];f[C]="",n(e.id,{items:f})};return o.jsxs("div",{className:`flex flex-col ${i} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${l} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsx("div",{className:"space-y-1 overflow-y-auto flex-1",style:{maxHeight:`${x}px`},onWheel:C=>{const f=C.currentTarget;f.scrollHeight>f.clientHeight&&C.stopPropagation()},children:b.map((C,f)=>o.jsxs("div",{className:"flex items-center gap-1 group",children:[o.jsx("span",{className:"text-theme-ink",children:""}),o.jsx("input",{className:`flex-1 border-b border-theme-border/50 focus:border-theme-border focus:outline-none ${c} min-w-0 bg-transparent text-theme-ink font-body`,value:C,onChange:u=>y(f,u.target.value),placeholder:"...",onMouseDown:u=>u.stopPropagation()}),o.jsx("button",{onClick:()=>j(f),className:"opacity-0 group-hover:opacity-100 text-theme-muted hover:text-theme-ink px-1 flex-shrink-0",onMouseDown:u=>u.stopPropagation(),children:""})]},f))})]})}function ki({widget:e,height:t}){const n=G(j=>j.updateWidgetData),{label:r,text:s=""}=e.data,a=E.useRef(null),l="text-xs",c="text-xs p-1",i="gap-1",d=t>=1e4,b=Math.max(32,t-16-4-0*2);E.useEffect(()=>{d&&a.current&&(a.current.style.height="auto",a.current.style.height=`${Math.max(60,a.current.scrollHeight)}px`)},[s,d]);const y=j=>{n(e.id,{text:j.target.value}),d&&a.current&&(a.current.style.height="auto",a.current.style.height=`${Math.max(60,a.current.scrollHeight)}px`)};return o.jsxs("div",{className:`flex flex-col ${i} w-full ${d?"":"h-full"}`,children:[r&&o.jsx("div",{className:`font-bold ${l} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsx("textarea",{ref:a,className:`w-full ${d?"":"flex-1"} ${c} border border-theme-border/50 focus:border-theme-border focus:outline-none resize-none bg-transparent text-theme-ink font-body rounded-button`,style:d?{minHeight:"60px",overflow:"hidden",height:"auto"}:{height:`${b}px`},value:s,onChange:y,placeholder:"Enter text here...",onMouseDown:j=>j.stopPropagation()})]})}function ji({widget:e,height:t}){const n=G(j=>j.updateWidgetData),{label:r,checkboxItems:s=[]}=e.data,a="text-xs",l="text-xs",c="w-4 h-4",i="text-xs",d="gap-1",b=Math.max(30,t-16-4-0*2),y=j=>{const C=[...s];C[j]={...C[j],checked:!C[j].checked},n(e.id,{checkboxItems:C})};return o.jsxs("div",{className:`flex flex-col ${d} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${a} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsxs("div",{className:"flex flex-col gap-0.5 overflow-y-auto flex-1",style:{maxHeight:`${b}px`},onWheel:j=>{const C=j.currentTarget;C.scrollHeight>C.clientHeight&&j.stopPropagation()},children:[s.map((j,C)=>o.jsxs("div",{className:`flex items-center ${d}`,children:[o.jsx("button",{onClick:()=>y(C),onMouseDown:f=>f.stopPropagation(),className:`${c} border-[length:var(--border-width)] border-theme-border flex items-center justify-center transition-colors flex-shrink-0 rounded-button ${j.checked?"bg-theme-accent text-theme-paper":"bg-theme-paper hover:opacity-80"}`,children:j.checked&&o.jsx("span",{className:i,children:""})}),o.jsx("span",{className:`flex-1 ${l} font-body text-theme-ink ${j.checked?"line-through text-theme-muted":""}`,children:j.name})]},C)),s.length===0&&o.jsx("div",{className:`${l} text-theme-muted italic`,children:"No items yet"})]})]})}function ou({title:e,onConfirm:t,onCancel:n,buttonLabel:r,isDamage:s}){const[a,l]=E.useState(1),c=()=>{const i=typeof a=="string"?parseInt(a)||1:a;t(Math.max(1,i))};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:n}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-button p-4 z-50 min-w-[200px]",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold mb-3",children:e}),o.jsx("input",{type:"number",min:"1",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent mb-3 text-center font-bold text-lg",value:a,onChange:i=>l(i.target.value===""?"":parseInt(i.target.value)||""),onBlur:i=>l(Math.max(1,parseInt(i.target.value)||1)),autoFocus:!0,onKeyDown:i=>{i.key==="Enter"&&c(),i.key==="Escape"&&n()}}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:n,className:"flex-1 px-3 py-1.5 text-sm font-body text-theme-ink hover:bg-theme-accent/20 rounded-button transition-colors border border-theme-border",children:"Cancel"}),o.jsx("button",{onClick:c,className:"flex-1 px-3 py-1.5 text-sm font-body rounded-button transition-colors bg-theme-accent text-theme-paper hover:opacity-80",children:r})]})]})]})}function Ni({widget:e}){const t=G(u=>u.updateWidgetData),{label:n,currentValue:r=10,maxValue:s=10}=e.data,[a,l]=E.useState(!1),[c,i]=E.useState(!1),d=Math.max(0,Math.min(100,r/s*100)),h="text-xs",g="text-xs",x="px-1.5 py-0.5 text-[10px]",b="gap-1",y="h-4",j=u=>{const p=Math.max(0,r-u);t(e.id,{currentValue:p}),l(!1)},C=u=>{const p=Math.min(s,r+u);t(e.id,{currentValue:p}),i(!1)},f=()=>{t(e.id,{currentValue:s})};return o.jsxs("div",{className:`flex flex-col ${b} w-full h-full justify-between`,children:[n&&o.jsx("div",{className:`font-bold ${h} text-theme-ink font-heading flex-shrink-0`,children:n}),o.jsx("div",{className:"flex-1 flex flex-col justify-center",children:o.jsxs("div",{className:`relative ${y} bg-theme-muted/30 rounded-button overflow-hidden border border-theme-border`,children:[o.jsx("div",{className:"absolute inset-y-0 left-0 bg-theme-accent transition-all duration-300 ease-out",style:{width:`${d}%`}}),o.jsxs("div",{className:`absolute inset-0 flex items-center justify-center font-bold ${g} text-theme-ink`,style:{textShadow:"0 0 3px var(--color-paper), 0 0 3px var(--color-paper), 0 0 3px var(--color-paper)"},children:[r," / ",s]})]})}),o.jsxs("div",{className:"flex items-center justify-between gap-1 flex-shrink-0",children:[o.jsx("button",{onClick:()=>l(!0),onMouseDown:u=>u.stopPropagation(),className:`${x} border border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-colors text-theme-ink rounded-button font-bold`,children:"Damage"}),o.jsx("button",{onClick:()=>i(!0),onMouseDown:u=>u.stopPropagation(),className:`${x} border border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-colors text-theme-ink rounded-button font-bold`,children:"Heal"}),o.jsx("button",{onClick:f,onMouseDown:u=>u.stopPropagation(),className:`${x} bg-theme-accent text-theme-paper hover:opacity-80 transition-colors rounded-button font-bold`,children:"Full"})]}),a&&o.jsx(ou,{title:"Take Damage",onConfirm:j,onCancel:()=>l(!1),buttonLabel:"Damage",isDamage:!0}),c&&o.jsx(ou,{title:"Heal",onConfirm:C,onCancel:()=>i(!1),buttonLabel:"Heal",isDamage:!1})]})}function Si({widget:e}){const{label:t,diceGroups:n=[{count:1,faces:20}],modifier:r=0}=e.data,[s,a]=E.useState(null),[l,c]=E.useState(!1),i=m=>typeof m=="number"?!0:!isNaN(Number(m))&&m.trim()!=="",d=m=>{if(typeof Intl<"u"&&"Segmenter"in Intl){const w=Intl.Segmenter,S=new w("en",{granularity:"grapheme"});return Array.from(S.segment(m),T=>T.segment)}return[...m]},h=m=>{const w=d(m);if(w.length<=1)return[m];const S=w[0];return w.every(k=>k===S)?w:[m]},g=m=>{if(typeof m=="number")return[m];const w=[],S=m.split(",").map(T=>T.trim()).filter(T=>T.length>0);for(const T of S)if(i(T))w.push(T);else{const k=h(T);w.push(...k)}return w},x=m=>{const w=[],S=new Map;for(const D of m){const A=g(D);for(const V of A)if(i(V))w.push(typeof V=="number"?V:Number(V));else{const Z=String(V);S.set(Z,(S.get(Z)||0)+1)}}const T=[];if(w.length>0){const D=w.reduce((A,V)=>A+V,0);T.push({value:String(D),count:w.length,isNumeric:!0,numericTotal:D})}const k=Array.from(S.entries()).sort((D,A)=>A[1]-D[1]);for(const[D,A]of k)T.push({value:D,count:A,isNumeric:!1});return T},b="text-xs",y="py-1 px-2 text-xs",j="text-xl",C="text-[10px]",f="gap-1",u=()=>{c(!0),setTimeout(()=>{const m=[],w=[];for(const D of n){const A=[];if(D.customFaces&&D.customFaces.length>0){for(let V=0;V<D.count;V++){const Z=Math.floor(Math.random()*D.customFaces.length),oe=D.customFaces[Z];A.push(oe),w.push(oe)}m.push({faces:D.customFaces.length,rolls:A,customFaces:D.customFaces})}else{for(let V=0;V<D.count;V++){const Z=Math.floor(Math.random()*D.faces)+1;A.push(Z),w.push(Z)}m.push({faces:D.faces,rolls:A})}}const S=x(w),T=S.find(D=>D.isNumeric),k=T?(T.numericTotal||0)+r:null;a({groups:m,modifier:r,total:k,aggregatedResults:S}),c(!1)},300)},v=(()=>{let w=n.map(S=>{if(S.customFaces&&S.customFaces.length>0){const T=S.customDiceName||"custom";return S.count>1?`${S.count} ${T}`:T}return`${S.count}d${S.faces}`}).join(" + ");return r!==0&&(w+=r>=0?` + ${r}`:` - ${Math.abs(r)}`),w})(),N=()=>{if(!s)return"";const m=[];for(const w of s.aggregatedResults)if(w.isNumeric){const S=(w.numericTotal||0)+(s.modifier||0);m.push(String(S))}else m.push(`${w.count}${w.value}`);return m.join(" | ")};return o.jsxs("div",{className:`flex flex-col ${f} w-full h-full`,children:[t&&o.jsx("div",{className:`font-bold text-center ${b} text-theme-ink font-heading flex-shrink-0`,children:t}),o.jsxs("button",{onClick:u,onMouseDown:m=>m.stopPropagation(),className:`${y} border-[length:var(--border-width)] border-theme-border font-bold transition-all rounded-button flex-shrink-0 ${l?"bg-theme-muted animate-pulse text-theme-paper":"bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper"}`,disabled:l,children:[" Roll ",v]}),o.jsx("div",{className:"text-center border-t border-theme-border/50 pt-1 flex-1 flex flex-col justify-center",children:s&&!l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${j} font-bold text-theme-ink font-heading`,children:N()||""}),o.jsxs("div",{className:`${C} text-theme-muted font-body`,children:[s.groups.map((m,w)=>o.jsxs("span",{children:[w>0&&" + ",o.jsxs("span",{title:m.customFaces?`d[${m.customFaces.join(",")}]`:`d${m.faces}`,children:["[",m.rolls.join(", "),"]"]})]},w)),s.modifier!==0&&o.jsxs("span",{children:[" ",s.modifier>=0?"+":"",s.modifier]})]}),s.groups.length===1&&s.groups[0].rolls.length===1&&s.groups[0].faces===20&&!s.groups[0].customFaces&&o.jsxs(o.Fragment,{children:[s.groups[0].rolls[0]===20&&o.jsx("div",{className:`text-green-600 font-bold ${C}`,children:"NAT 20!"}),s.groups[0].rolls[0]===1&&o.jsx("div",{className:`text-red-600 font-bold ${C}`,children:"NAT 1!"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${j} font-bold text-theme-muted font-heading`,children:""}),o.jsx("div",{className:`${C} text-theme-muted font-body`,children:""})]})})]})}function Ci({widget:e}){const{label:t,availableDice:n=[4,6,8,10,12,20]}=e.data,[r,s]=E.useState([]),[a,l]=E.useState(null),[c,i]=E.useState(!1),[d,h]=E.useState(1),g="text-xs",x="py-1 px-2 text-xs",b="text-xl",y="text-[10px]",j="gap-1",C=N=>{s(m=>[...m,{faces:N,id:d}]),h(m=>m+1),l(null)},f=()=>{s([]),l(null)},u=()=>{r.length!==0&&(i(!0),setTimeout(()=>{const N=[];let m=0;for(const w of r){const S=Math.floor(Math.random()*w.faces)+1;N.push({faces:w.faces,roll:S}),m+=S}l({dice:N,total:m}),i(!1),s([]),h(1)},300))},p=r.reduce((N,m)=>(N[m.faces]=(N[m.faces]||0)+1,N),{}),v=()=>{const N=Object.entries(p).sort(([m],[w])=>Number(w)-Number(m)).map(([m,w])=>`${w}d${m}`);return N.length>0?N.join(" + "):"Empty"};return o.jsxs("div",{className:`flex flex-col ${j} w-full h-full`,children:[t&&o.jsx("div",{className:`font-bold text-center ${g} text-theme-ink font-heading flex-shrink-0`,children:t}),o.jsx("div",{className:"flex flex-wrap gap-1 justify-center flex-shrink-0",children:n.map(N=>o.jsxs("button",{onClick:()=>C(N),onMouseDown:m=>m.stopPropagation(),className:`${x} border-[length:var(--border-width)] border-theme-border font-bold transition-all rounded-button bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper min-w-[40px]`,title:`Add d${N}`,children:["d",N]},N))}),o.jsx("div",{className:"flex-1 flex flex-col justify-center",children:o.jsxs("div",{className:"flex gap-1 justify-center flex-shrink-0",children:[o.jsx("button",{onClick:u,onMouseDown:N=>N.stopPropagation(),className:`${x} border-[length:var(--border-width)] border-theme-border font-bold transition-all rounded-button flex-1 ${c||r.length===0?"bg-theme-muted text-theme-paper cursor-not-allowed":"bg-theme-accent text-theme-paper hover:opacity-90"}`,disabled:c||r.length===0,children:r.length>0?`Roll ${v()}`:"Roll"}),r.length>0&&o.jsx("button",{onClick:f,onMouseDown:N=>N.stopPropagation(),className:`${x} border-[length:var(--border-width)] border-theme-border font-bold transition-all rounded-button bg-theme-paper text-theme-ink hover:bg-red-500 hover:text-white hover:border-red-500 rounded-button`,children:"Clear"})]})}),o.jsx("div",{className:"text-center border-t border-theme-border/50 pt-1 flex-shrink-0",children:a&&!c?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${b} font-bold text-theme-ink font-heading`,children:a.total}),o.jsx("div",{className:`${y} text-theme-muted font-body`,children:a.dice.map((N,m)=>o.jsxs("span",{children:[m>0&&" + ",o.jsx("span",{title:`d${N.faces}`,children:N.roll})]},m))}),a.dice.length===1&&a.dice[0].faces===20&&o.jsxs(o.Fragment,{children:[a.dice[0].roll===20&&o.jsx("div",{className:`text-green-600 font-bold ${y}`,children:"NAT 20!"}),a.dice[0].roll===1&&o.jsx("div",{className:`text-red-600 font-bold ${y}`,children:"NAT 1!"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${b} font-bold text-theme-muted font-heading`,children:""}),o.jsx("div",{className:`${y} text-theme-muted font-body`,children:""})]})})]})}function Ti({widget:e,height:t}){const n=G(u=>u.updateWidgetData),{label:r,spellLevels:s=[{level:1,max:4,used:0}]}=e.data,a="text-xs",l="w-6 text-[10px]",c="w-4 h-4",i="text-[10px] px-1 py-0.5",d="gap-1",y=Math.max(30,t-16-28-4*3-0*2),j=(u,p)=>{const v=[...s],N=v[u];p<N.used?v[u]={...N,used:p}:v[u]={...N,used:p+1},n(e.id,{spellLevels:v})},C=()=>{const u=s.map(p=>({...p,used:0}));n(e.id,{spellLevels:u})},f=u=>{const p=["th","st","nd","rd"],v=u%100;return u+(p[(v-20)%10]||p[v]||p[0])};return o.jsxs("div",{className:`flex flex-col ${d} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${a} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsxs("div",{className:`flex flex-col ${d} overflow-y-auto flex-1`,style:{maxHeight:`${y}px`},onWheel:u=>{const p=u.currentTarget;p.scrollHeight>p.clientHeight&&u.stopPropagation()},children:[s.map((u,p)=>o.jsxs("div",{className:`flex items-center ${d}`,children:[o.jsx("span",{className:`${l} font-bold text-center text-theme-ink`,children:f(u.level)}),o.jsx("div",{className:"flex gap-1 flex-1 flex-wrap",children:Array.from({length:u.max}).map((v,N)=>o.jsx("button",{onClick:()=>j(p,N),onMouseDown:m=>m.stopPropagation(),className:`${c} rounded-full border-[length:var(--border-width)] border-theme-border transition-all ${N<u.used?"bg-theme-accent":"bg-theme-paper hover:opacity-80"}`,title:N<u.used?"Click to restore":"Click to use"},N))})]},p)),s.length===0&&o.jsx("div",{className:`${l} text-theme-muted italic`,children:"No spell levels configured"})]}),o.jsx("div",{className:`flex items-center justify-end ${d} border-t border-theme-border/50 pt-2 flex-shrink-0`,children:o.jsx("button",{onClick:C,onMouseDown:u=>u.stopPropagation(),className:`${i} border border-theme-border hover:bg-theme-accent hover:text-theme-paper transition-colors text-theme-ink rounded-button`,children:"Reset All"})})]})}function Ei({widget:e,width:t,height:n}){const{label:r,imageUrl:s=""}=e.data,a="text-xs",l="text-2xl",c="text-[10px]",i="gap-1",d=n>1e3,b=d?Math.min(300,t):Math.max(40,n-16-4-0*2);return o.jsxs("div",{className:`flex flex-col ${i} w-full ${d?"":"h-full"}`,children:[r&&o.jsx("div",{className:`font-bold text-center ${a} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsx("div",{className:`border-[length:var(--border-width)] border-theme-border bg-theme-background flex items-center justify-center overflow-hidden ${d?"":"flex-1"}`,style:{height:`${b}px`,borderRadius:"min(var(--button-radius), 16px)"},children:s?o.jsx("img",{src:s,alt:r||"Character",className:`w-full h-full ${d?"object-contain":"object-cover"}`,onError:y=>{y.target.style.display="none"}}):o.jsxs("div",{className:"text-theme-muted text-center p-1",children:[o.jsx("div",{className:`${l} mb-1`,children:""}),o.jsx("span",{className:`${c} font-body`,children:"No image"})]})})]})}const su=(e,t)=>{switch(t){case"hearts":return e?"":"";case"boxes":return e?"":"";case"stars":return e?"":"";case"diamonds":return e?"":"";case"crosses":return e?"":"";case"checkmarks":return e?"":"";case"flames":return e?"":"";case"skulls":return e?"":"";case"shields":return e?"":"";case"swords":return e?"":"";case"lightning":return e?"":"";case"moons":return e?"":"";case"suns":return e?"":"";case"coins":return e?"":"";case"gems":return e?"":"";case"dots":default:return e?"":""}},au=(e,t,n)=>{const r=`${n} flex items-center justify-center transition-all cursor-pointer hover:scale-125`;return["hearts","flames","skulls","shields","swords","lightning","moons","suns","coins","gems"].includes(t)?r:`${r} ${e?"text-theme-ink":"text-theme-muted"}`};function Mi({widget:e,height:t}){const n=G(u=>u.updateWidgetData),{label:r,maxPool:s=5,currentPool:a=5,poolStyle:l="dots",showPoolCount:c=!0,poolResources:i=[]}=e.data,d="text-xs",h="w-5 h-5 text-sm",g="text-[10px]",x="gap-1",b=i.length>0,y=u=>{u<a?n(e.id,{currentPool:u}):n(e.id,{currentPool:u+1})},j=(u,p)=>{const v=i[u],N=[...i];p<v.current?N[u]={...v,current:p}:N[u]={...v,current:p+1},n(e.id,{poolResources:N})},f=t-(r?20:0)-8;return o.jsxs("div",{className:`flex flex-col ${x} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${d} text-theme-ink font-heading flex-shrink-0`,children:r}),b?o.jsx("div",{className:"flex flex-col gap-2 flex-1 overflow-y-auto pr-1",style:{maxHeight:`${f}px`},onWheel:u=>{const p=u.currentTarget;p.scrollHeight>p.clientHeight&&u.stopPropagation()},children:i.map((u,p)=>o.jsxs("div",{className:`flex flex-col ${x}`,children:[u.name&&o.jsx("div",{className:`font-medium ${g} text-theme-ink font-body`,children:u.name}),o.jsx("div",{className:"flex flex-wrap gap-0.5 content-start",children:Array.from({length:u.max}).map((v,N)=>o.jsx("button",{onClick:()=>j(p,N),onMouseDown:m=>m.stopPropagation(),className:au(N<u.current,u.style,h),title:N<u.current?"Click to use":"Click to restore",children:su(N<u.current,u.style)},N))}),c&&o.jsxs("div",{className:`${g} text-theme-muted font-body`,children:[u.current," / ",u.max]})]},p))}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex flex-wrap gap-0.5 flex-1 content-start overflow-y-auto",onWheel:u=>{const p=u.currentTarget;p.scrollHeight>p.clientHeight&&u.stopPropagation()},children:Array.from({length:s}).map((u,p)=>o.jsx("button",{onClick:()=>y(p),onMouseDown:v=>v.stopPropagation(),className:au(p<a,l,h),title:p<a?"Click to use":"Click to restore",children:su(p<a,l)},p))}),c&&o.jsxs("div",{className:`${g} text-center text-theme-muted font-body flex-shrink-0`,children:[a," / ",s]})]})]})}function Ii({widget:e}){const t=G(i=>i.updateWidgetData),{label:n,toggleItems:r=[]}=e.data,s="text-xs",a="px-1.5 py-0.5 text-[10px]",l="gap-1",c=i=>{const d=[...r];d[i]={...d[i],active:!d[i].active},t(e.id,{toggleItems:d})};return o.jsxs("div",{className:`flex flex-col ${l} w-full h-full`,children:[n&&o.jsx("div",{className:`font-bold ${s} text-theme-ink font-heading flex-shrink-0`,children:n}),o.jsxs("div",{className:`flex flex-wrap ${l} overflow-y-auto flex-1 content-start`,onWheel:i=>{const d=i.currentTarget;d.scrollHeight>d.clientHeight&&i.stopPropagation()},children:[r.map((i,d)=>o.jsx("button",{onClick:()=>c(d),onMouseDown:h=>h.stopPropagation(),className:`${a} border border-theme-border transition-all rounded-button font-body ${i.active?"bg-theme-accent text-theme-paper":"bg-theme-paper text-theme-ink hover:opacity-80"}`,children:i.name},d)),r.length===0&&o.jsx("div",{className:`${a} text-theme-muted italic`,children:"No conditions configured"})]})]})}function lu(e){return typeof e=="string"?e:e.value}function _r(e){return typeof e=="string"?{}:e.format||{}}function iu(e,t){return{value:e,format:t}}function e0({format:e,onFormatChange:t,onClose:n,position:r,isMobile:s,usedColors:a}){const l=E.useRef(null),[c,i]=E.useState(!1),d=E.useRef(null);E.useEffect(()=>{const b=y=>{l.current&&!l.current.contains(y.target)&&n()};return document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b)}},[n]);const h=`p-1.5 rounded hover:bg-theme-accent hover:text-theme-paper transition-colors ${s?"min-w-[36px] min-h-[36px]":"min-w-[28px] min-h-[28px]"} flex items-center justify-center`,g="bg-theme-accent text-theme-paper",x=s?"text-base":"text-sm";return o.jsx("div",{ref:l,className:"fixed z-[9999] bg-theme-paper border border-theme-border rounded-button shadow-lg",style:{left:s?"50%":r.x,top:s?"16px":r.y,transform:s?"translateX(-50%)":"none"},onMouseDown:b=>b.stopPropagation(),onTouchStart:b=>b.stopPropagation(),children:o.jsxs("div",{className:`flex items-center gap-0.5 p-1 ${s?"flex-wrap justify-center max-w-[280px]":""}`,children:[o.jsx("button",{className:`${h} ${x} font-bold ${e.bold?g:"text-theme-ink"}`,onClick:()=>t({bold:!e.bold}),title:"Bold",children:"B"}),o.jsx("button",{className:`${h} ${x} italic ${e.italic?g:"text-theme-ink"}`,onClick:()=>t({italic:!e.italic}),title:"Italic",children:"I"}),o.jsx("button",{className:`${h} ${x} underline ${e.underline?g:"text-theme-ink"}`,onClick:()=>t({underline:!e.underline}),title:"Underline",children:"U"}),o.jsx("button",{className:`${h} ${x} line-through ${e.strikethrough?g:"text-theme-ink"}`,onClick:()=>t({strikethrough:!e.strikethrough}),title:"Strikethrough",children:"S"}),o.jsx("div",{className:"w-px h-5 bg-theme-border mx-1"}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:`${h} ${x} text-theme-ink`,onClick:()=>i(!c),title:"Background Color",children:o.jsxs("span",{className:"relative",children:[o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z",clipRule:"evenodd"})}),e.bgColor&&o.jsx("span",{className:"absolute -bottom-0.5 left-0 right-0 h-1 rounded-sm",style:{backgroundColor:e.bgColor,opacity:e.bgOpacity??1}})]})}),c&&o.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-full mt-1 bg-theme-paper border border-theme-border rounded-button shadow-lg p-2 z-10",style:{minWidth:"160px"},children:[o.jsx("button",{className:`w-full h-7 rounded border mb-1 ${e.bgColor?"border-theme-border":"border-theme-accent ring-2 ring-theme-accent"} bg-theme-paper relative`,onClick:()=>{t({bgColor:void 0,bgOpacity:void 0}),i(!1)},title:"No color",children:o.jsx("span",{className:"text-theme-muted text-xs",children:"No color"})}),o.jsx("button",{className:`w-full h-7 rounded border mb-2 ${e.bgColor==="var(--color-background)"?"border-theme-accent ring-2 ring-theme-accent":"border-theme-border"} bg-theme-background relative`,onClick:()=>{t({bgColor:"var(--color-background)"}),i(!1)},title:"Header color",children:o.jsx("span",{className:"text-theme-ink text-xs",children:"Header color"})}),a.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-[10px] text-theme-muted mb-1",children:"Recently used"}),o.jsx("div",{className:"grid grid-cols-5 gap-1 mb-2",children:a.filter(b=>b.color!=="var(--color-background)").slice(0,10).map((b,y)=>{let j=b.color;if(b.opacity<1&&!b.color.startsWith("var(")){const f=b.color.replace("#",""),u=parseInt(f.substring(0,2),16),p=parseInt(f.substring(2,4),16),v=parseInt(f.substring(4,6),16);j=`rgba(${u}, ${p}, ${v}, ${b.opacity})`}const C=e.bgColor===b.color&&(e.bgOpacity??1)===b.opacity;return o.jsx("button",{className:`w-6 h-6 rounded border ${C?"border-theme-accent ring-2 ring-theme-accent":"border-theme-border"}`,style:{backgroundColor:j},onClick:()=>{t({bgColor:b.color,bgOpacity:b.opacity})},title:`${b.color} (${Math.round(b.opacity*100)}%)`},`${b.color}-${b.opacity}-${y}`)})})]}),o.jsx("div",{className:"text-[10px] text-theme-muted mb-1",children:"Custom color"}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("input",{ref:d,type:"color",value:e.bgColor&&!e.bgColor.startsWith("var(")?e.bgColor:"#ffffff",onChange:b=>{t({bgColor:b.target.value})},className:"w-8 h-8 rounded border border-theme-border cursor-pointer",style:{padding:0}}),o.jsx("button",{className:"flex-1 px-2 py-1 text-xs border border-theme-border rounded hover:bg-theme-accent hover:text-theme-paper",onClick:()=>{var b;(b=d.current)==null||b.click()},children:"Pick color"})]}),e.bgColor&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-[10px] text-theme-muted mb-1",children:["Opacity: ",Math.round((e.bgOpacity??1)*100),"%"]}),o.jsx("input",{type:"range",min:"0",max:"100",value:Math.round((e.bgOpacity??1)*100),onChange:b=>{t({bgOpacity:parseInt(b.target.value)/100})},className:"w-full h-2 rounded-lg appearance-none cursor-pointer bg-theme-border"})]})]})]}),o.jsx("div",{className:"w-px h-5 bg-theme-border mx-1"}),o.jsx("button",{className:`${h} ${x} ${e.hAlign==="left"||!e.hAlign?g:"text-theme-ink"}`,onClick:()=>t({hAlign:"left"}),title:"Align Left",children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z",clipRule:"evenodd"})})}),o.jsx("button",{className:`${h} ${x} ${e.hAlign==="center"?g:"text-theme-ink"}`,onClick:()=>t({hAlign:"center"}),title:"Align Center",children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10zm4 5.25a.75.75 0 01.75-.75h6.5a.75.75 0 010 1.5h-6.5a.75.75 0 01-.75-.75z",clipRule:"evenodd"})})}),o.jsx("button",{className:`${h} ${x} ${e.hAlign==="right"?g:"text-theme-ink"}`,onClick:()=>t({hAlign:"right"}),title:"Align Right",children:o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm5 10.5a.75.75 0 01.75-.75h9.5a.75.75 0 010 1.5h-9.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z",clipRule:"evenodd"})})})]})})}function Pi({widget:e,height:t}){var Wt;const n=G(U=>U.updateWidgetData),r=G(U=>U.characters),s=G(U=>U.activeCharacterId),{label:a,columns:l=["Item","Qty","Weight"],rows:c=[]}=e.data,[i,d]=E.useState(null),[h,g]=E.useState(null),[x,b]=E.useState(!1),[y,j]=E.useState({x:0,y:0}),[C,f]=E.useState(null),[u,p]=E.useState(null),v=E.useRef(null),N=E.useRef(null),m=E.useMemo(()=>{const U=r.find(q=>q.id===s);if(!U)return[];const $=new Map;return U.sheets.forEach(q=>{q.widgets.forEach(I=>{I.type==="TABLE"&&I.data.rows&&I.data.rows.forEach(_=>{_.cells.forEach(O=>{const B=_r(O);if(B.bgColor){const Y=`${B.bgColor}|${B.bgOpacity??1}`;$.has(Y)||$.set(Y,{color:B.bgColor,opacity:B.bgOpacity??1})}})})})}),Array.from($.values())},[r,s]),[w,S]=E.useState(!1);E.useEffect(()=>{const U=()=>S(window.innerWidth<768||"ontouchstart"in window);return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]);const T="text-xs",k="text-[10px] p-0.5",D="gap-1",oe=Math.max(40,t-16-4-0*2),ee=(U,$,q)=>{const I=[...c],_=I[U].cells[$],O=_r(_);I[U]={...I[U],cells:[...I[U].cells]},I[U].cells[$]=iu(q,O),n(e.id,{rows:I})},F=(U,$,q)=>{const I=[...c],_=I[U].cells[$],O=lu(_),B=_r(_);I[U]={...I[U],cells:[...I[U].cells]};const Y={...B,...q};Object.keys(Y).forEach(J=>{Y[J]===void 0&&delete Y[J]}),I[U].cells[$]=iu(O,Object.keys(Y).length>0?Y:void 0),n(e.id,{rows:I})},M=(U,$,q)=>{d({row:U,col:$}),g({row:U,col:$});const I=q.clientX,_=q.clientY,O=320;j({x:Math.max(8,Math.min(I-O/2,window.innerWidth-O-8)),y:Math.max(8,_-50)}),b(!0)},R=(U,$)=>{},W=U=>{const $=[...c];$[U]={cells:l.map(()=>"")},n(e.id,{rows:$})},Q=(U,$)=>{v.current=$,f($),U.dataTransfer.effectAllowed="move",U.dataTransfer.setData("text/plain",$.toString())},X=(U,$)=>{U.preventDefault(),U.stopPropagation(),v.current!==null&&v.current!==$&&p($)},H=()=>{p(null)},te=(U,$)=>{U.preventDefault(),U.stopPropagation();const q=v.current;if(q!==null&&q!==$){const I=[...c],[_]=I.splice(q,1),O=q<$?$-1:$;I.splice(O,0,_),n(e.id,{rows:I})}v.current=null,f(null),p(null)},me=()=>{v.current=null,f(null),p(null)},ye=U=>{const $={};if(U.bgColor)if(U.bgColor.startsWith("var("))$.backgroundColor=U.bgColor,U.bgOpacity!==void 0&&U.bgOpacity<1&&($.position="relative");else{const q=U.bgOpacity??1;if(q<1){const I=U.bgColor.replace("#",""),_=parseInt(I.substring(0,2),16),O=parseInt(I.substring(2,4),16),B=parseInt(I.substring(4,6),16);$.backgroundColor=`rgba(${_}, ${O}, ${B}, ${q})`}else $.backgroundColor=U.bgColor}return U.hAlign&&($.textAlign=U.hAlign),$},ft=U=>{const $={};return U.vAlign==="top"?$.alignItems="flex-start":U.vAlign==="bottom"?$.alignItems="flex-end":$.alignItems="center",$},Jt=U=>{const $=[];return U.bold&&$.push("font-bold"),U.italic&&$.push("italic"),U.underline&&$.push("underline"),U.strikethrough&&$.push("line-through"),$.join(" ")};E.useEffect(()=>{const U=$=>{N.current&&!N.current.contains($.target)&&(b(!1),g(null))};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const we=E.useRef(null),[ke,Se]=E.useState(null),mt=(U,$)=>{Se({row:U,col:$}),we.current=setTimeout(()=>{g({row:U,col:$}),b(!0),we.current=null},500)},Zt=(U,$,q)=>{we.current&&(clearTimeout(we.current),we.current=null,(ke==null?void 0:ke.row)===U&&(ke==null?void 0:ke.col)===$&&(d({row:U,col:$}),g({row:U,col:$}),b(!0),q.preventDefault())),Se(null)},kt=()=>{we.current&&(clearTimeout(we.current),we.current=null),Se(null)};return o.jsxs("div",{ref:N,className:`flex flex-col ${D} w-full h-full`,children:[a&&o.jsx("div",{className:`font-bold ${T} text-theme-ink font-heading flex-shrink-0`,children:a}),o.jsx("div",{className:"overflow-auto flex-1",style:{maxHeight:`${oe}px`},onWheel:U=>{const $=U.currentTarget;($.scrollHeight>$.clientHeight||$.scrollWidth>$.clientWidth)&&U.stopPropagation()},onDragOver:U=>U.preventDefault(),children:o.jsxs("table",{className:`w-full ${k}`,style:{borderCollapse:"separate",borderSpacing:0},children:[o.jsx("thead",{className:"sticky top-0 z-10",style:{boxShadow:"0 -2px 0 0 var(--color-paper)"},children:o.jsxs("tr",{children:[o.jsx("th",{className:"w-4 bg-theme-paper"}),l.map((U,$)=>o.jsx("th",{className:`border border-theme-border bg-theme-background ${k} text-theme-ink font-heading`,style:{borderLeftWidth:$===0?1:0},children:U},$)),o.jsx("th",{className:"w-4 bg-theme-paper"})]})}),o.jsx("tbody",{children:c.map((U,$)=>o.jsxs("tr",{className:`group ${C===$?"opacity-50":""} ${u===$&&C!==$?"border-t-2 border-theme-accent":""}`,onDragOver:q=>{q.preventDefault(),q.stopPropagation(),X(q,$)},onDragLeave:H,onDrop:q=>{q.preventDefault(),q.stopPropagation(),te(q,$)},children:[o.jsx("td",{className:"w-4 p-0 cursor-grab active:cursor-grabbing",draggable:!0,onDragStart:q=>Q(q,$),onDragEnd:me,onMouseDown:q=>q.stopPropagation(),children:o.jsx("div",{className:"text-theme-muted hover:text-theme-ink text-[10px] text-center touch-none select-none",children:""})}),U.cells.map((q,I)=>{const _=lu(q),O=_r(q),B=(h==null?void 0:h.row)===$&&(h==null?void 0:h.col)===I,Y=(i==null?void 0:i.row)===$&&(i==null?void 0:i.col)===I;return o.jsx("td",{className:`${B?"border-theme-accent border-2":"border border-theme-border"} ${k} text-theme-ink`,style:{...ye(O),borderTopWidth:0,borderLeftWidth:I===0?1:0},children:Y?o.jsx("input",{autoFocus:!0,value:_,onChange:J=>ee($,I,J.target.value),onBlur:()=>d(null),onKeyDown:J=>{J.key==="Enter"?d(null):J.key==="Tab"?(J.preventDefault(),J.shiftKey?I>0?(d({row:$,col:I-1}),g({row:$,col:I-1})):$>0&&(d({row:$-1,col:l.length-1}),g({row:$-1,col:l.length-1})):I<l.length-1?(d({row:$,col:I+1}),g({row:$,col:I+1})):$<c.length-1&&(d({row:$+1,col:0}),g({row:$+1,col:0}))):J.key==="Escape"&&d(null)},className:`w-full bg-transparent focus:outline-none text-[10px] text-theme-ink font-body ${Jt(O)}`,style:{textAlign:O.hAlign||"left"},onMouseDown:J=>J.stopPropagation()}):o.jsx("div",{onClick:J=>M($,I,J),onDoubleClick:()=>R(),onTouchStart:()=>mt($,I),onTouchEnd:J=>Zt($,I,J),onTouchMove:kt,onMouseDown:J=>J.stopPropagation(),className:`min-h-[1.5em] cursor-pointer hover:opacity-70 font-body flex ${Jt(O)}`,style:{...ft(O),justifyContent:O.hAlign==="center"?"center":O.hAlign==="right"?"flex-end":"flex-start"},children:_||o.jsx("span",{className:"text-theme-muted",children:"-"})})},I)}),o.jsx("td",{className:"w-4 p-0",children:o.jsx("button",{onClick:()=>W($),onMouseDown:q=>q.stopPropagation(),className:"w-full h-full text-theme-muted hover:text-theme-ink opacity-0 group-hover:opacity-100",children:""})})]},$))})]})}),x&&h&&Fn.createPortal(o.jsx(e0,{format:_r((Wt=c[h.row])==null?void 0:Wt.cells[h.col]),onFormatChange:U=>F(h.row,h.col,U),onClose:()=>{b(!1),g(null)},position:y,isMobile:w,usedColors:m}),document.body)]})}function cu({title:e,onClose:t,children:n}){return Fn.createPortal(o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",onClick:t,onMouseDown:r=>r.stopPropagation(),children:o.jsxs("div",{className:"bg-theme-paper border border-theme-border rounded-button shadow-xl p-4 min-w-[280px] max-w-[400px]",onClick:r=>r.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold text-theme-ink font-heading",children:e}),o.jsx("button",{onClick:t,className:"text-theme-muted hover:text-theme-ink text-xl leading-none",children:""})]}),n]})}),document.body)}function t0(e){if(e<=0)return"Expired";const t=Math.floor(e/(365*24*60*60)),n=Math.floor(e%(365*24*60*60)/(30*24*60*60)),r=Math.floor(e%(30*24*60*60)/(24*60*60)),s=Math.floor(e%(24*60*60)/(60*60)),a=Math.floor(e%(60*60)/60),l=e%60,c=[];return t>0&&c.push(`${t}y`),n>0&&c.push(`${n}mo`),r>0&&c.push(`${r}d`),s>0&&c.push(`${s}h`),a>0&&c.push(`${a}m`),(l>0||c.length===0)&&c.push(`${l}s`),c.slice(0,3).join(" ")}function uu(e,t){switch(t){case"seconds":return e;case"minutes":return e*60;case"hours":return e*60*60;case"days":return e*24*60*60;case"months":return e*30*24*60*60;case"years":return e*365*24*60*60;default:return e}}function n0(e){return e<=0?"Expired":e===1?"1 round":`${e} rounds`}function Ri({widget:e,height:t}){const n=G(R=>R.updateWidgetData),{label:r,timedEffects:s=[],roundMode:a=!1}=e.data,[l,c]=E.useState(!1),[i,d]=E.useState(!1),[h,g]=E.useState(""),[x,b]=E.useState(1),[y,j]=E.useState("minutes"),[C,f]=E.useState(1),[u,p]=E.useState("minutes"),v="text-xs",N="text-xs",m="text-xs px-2 py-1",w="gap-1",S=()=>{if(h.trim()){const R=a?x:uu(x,y),W={name:h.trim(),remainingSeconds:R};n(e.id,{timedEffects:[...s,W]}),g(""),b(1),c(!1)}},T=()=>{g(""),b(1),c(!1)},k=R=>{const W=[...s];W.splice(R,1),n(e.id,{timedEffects:W})},D=()=>{const R=a?1:uu(C,u),W=s.map(Q=>({...Q,remainingSeconds:Math.max(0,Q.remainingSeconds-R)}));n(e.id,{timedEffects:W}),d(!1)},A=()=>{const R=s.map(W=>({...W,remainingSeconds:Math.max(0,W.remainingSeconds-1)}));n(e.id,{timedEffects:R})},V=()=>{f(1),d(!1)},M=Math.max(60,t-16-32-4*3-0*2);return o.jsxs("div",{className:`flex flex-col ${w} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${v} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsxs("div",{className:`space-y-1 overflow-y-auto flex-1 ${N}`,style:{maxHeight:`${M}px`},onWheel:R=>{const W=R.currentTarget;W.scrollHeight>W.clientHeight&&R.stopPropagation()},children:[s.map((R,W)=>o.jsxs("div",{className:`flex items-center group px-1.5 py-0.5 rounded-button border ${R.remainingSeconds<=0?"bg-theme-accent/20 border-theme-accent animate-pulse":"border-theme-border/30 hover:border-theme-border"}`,children:[o.jsx("span",{className:`flex-1 min-w-0 truncate font-medium ${R.remainingSeconds<=0?"text-theme-accent":"text-theme-ink"}`,children:R.name}),o.jsx("span",{className:`flex-shrink-0 ml-2 ${R.remainingSeconds<=0?"text-theme-accent font-bold":"text-theme-muted"}`,children:a?n0(R.remainingSeconds):t0(R.remainingSeconds)}),o.jsx("button",{onClick:()=>k(W),className:"opacity-0 group-hover:opacity-100 text-red-500 hover:text-red-700 px-1 flex-shrink-0",onMouseDown:Q=>Q.stopPropagation(),children:""})]},W)),s.length===0&&!l&&o.jsx("div",{className:"text-theme-muted italic text-center py-2",children:"No active effects"})]}),o.jsxs("div",{className:`flex ${w} border-t border-theme-border/50 pt-2 flex-shrink-0`,children:[o.jsx("button",{onClick:()=>c(!0),className:`${m} flex-1 border border-theme-border text-theme-ink rounded-button hover:bg-theme-accent hover:text-theme-paper transition-colors font-bold`,onMouseDown:R=>R.stopPropagation(),children:"+ Add Effect"}),s.length>0&&(a?o.jsx("button",{onClick:A,className:`${m} flex-1 border border-theme-border text-theme-ink rounded-button hover:bg-theme-accent hover:text-theme-paper transition-colors font-bold`,onMouseDown:R=>R.stopPropagation(),children:" Pass Round"}):o.jsx("button",{onClick:()=>d(!0),className:`${m} flex-1 border border-theme-border text-theme-ink rounded-button hover:bg-theme-accent hover:text-theme-paper transition-colors font-bold`,onMouseDown:R=>R.stopPropagation(),children:" Pass Time"}))]}),l&&o.jsx(cu,{title:"Add Effect",onClose:T,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{className:"w-full border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button",value:h,onChange:R=>g(R.target.value),placeholder:"Effect name...",autoFocus:!0,onKeyDown:R=>{R.key==="Enter"&&S(),R.key==="Escape"&&T()}}),a?o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"number",min:"1",className:"w-20 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button text-center",value:x,onChange:R=>b(R.target.value===""?"":parseInt(R.target.value)||1),onBlur:R=>b(Math.max(1,parseInt(R.target.value)||1))}),o.jsx("span",{className:"text-theme-ink",children:x===1?"round":"rounds"})]}):o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",min:"1",className:"w-20 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button text-center",value:x,onChange:R=>b(R.target.value===""?"":parseInt(R.target.value)||1),onBlur:R=>b(Math.max(1,parseInt(R.target.value)||1))}),o.jsxs("select",{className:"flex-1 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button",value:y,onChange:R=>j(R.target.value),children:[o.jsx("option",{value:"seconds",children:"Seconds"}),o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"months",children:"Months"}),o.jsx("option",{value:"years",children:"Years"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{onClick:S,className:"flex-1 py-2 px-4 bg-theme-accent text-theme-paper rounded-button hover:opacity-90 transition-colors font-bold",children:"Add Effect"}),o.jsx("button",{onClick:T,className:"flex-1 py-2 px-4 border border-theme-border text-theme-muted rounded-button hover:bg-theme-border hover:text-theme-ink transition-colors",children:"Cancel"})]})]})}),i&&o.jsx(cu,{title:"Pass Time",onClose:V,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-theme-muted text-sm",children:"How much time passes for all effects?"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",min:"1",className:"w-20 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button text-center",value:C,onChange:R=>f(R.target.value===""?"":parseInt(R.target.value)||1),onBlur:R=>f(Math.max(1,parseInt(R.target.value)||1)),autoFocus:!0,onKeyDown:R=>{R.key==="Enter"&&D(),R.key==="Escape"&&V()}}),o.jsxs("select",{className:"flex-1 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button",value:u,onChange:R=>p(R.target.value),children:[o.jsx("option",{value:"seconds",children:"Seconds"}),o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"months",children:"Months"}),o.jsx("option",{value:"years",children:"Years"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{onClick:D,className:"flex-1 py-2 px-4 bg-theme-accent text-theme-paper rounded-button hover:opacity-90 transition-colors font-bold",children:"Confirm"}),o.jsx("button",{onClick:V,className:"flex-1 py-2 px-4 border border-theme-border text-theme-muted rounded-button hover:bg-theme-border hover:text-theme-ink transition-colors",children:"Cancel"})]})]})})]})}function Di({widget:e,height:t}){const n=G(y=>y.updateWidgetData),{label:r,formItems:s=[],labelWidth:a=33}=e.data,l="text-xs",c="text-xs",i="gap-1",x=Math.max(30,t-16-4-0*2),b=(y,j)=>{const C=[...s];C[y]={...C[y],value:j},n(e.id,{formItems:C})};return o.jsxs("div",{className:`flex flex-col ${i} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${l} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsxs("div",{className:"flex flex-col gap-0.5 overflow-y-auto overflow-x-hidden flex-1 pr-1",style:{maxHeight:`${x}px`},onWheel:y=>{const j=y.currentTarget;j.scrollHeight>j.clientHeight&&y.stopPropagation()},children:[s.map((y,j)=>o.jsxs("div",{className:`flex items-center ${i}`,children:[o.jsx("span",{className:`${c} text-theme-ink font-body truncate flex-shrink-0`,style:{width:`${a}%`},children:y.name}),o.jsx("input",{type:"text",value:y.value,onChange:C=>b(j,C.target.value),onMouseDown:C=>C.stopPropagation(),className:`flex-1 ${c} px-1 py-0.5 border-b border-theme-border/50 focus:border-theme-border focus:outline-none bg-transparent text-theme-ink font-body min-w-0`,placeholder:"..."})]},j)),s.length===0&&o.jsx("div",{className:`${c} text-theme-muted italic`,children:"No fields yet"})]})]})}function r0({title:e,onClose:t,children:n}){return Fn.createPortal(o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999]",onClick:t,onMouseDown:r=>r.stopPropagation(),children:o.jsxs("div",{className:"bg-theme-paper border border-theme-border rounded-button shadow-xl p-4 min-w-[280px] max-w-[400px]",onClick:r=>r.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"font-bold text-theme-ink font-heading",children:e}),o.jsx("button",{onClick:t,className:"text-theme-muted hover:text-theme-ink text-xl leading-none",children:""})]}),n]})}),document.body)}function du(e,t){switch(t){case"seconds":return e;case"minutes":return e*60;case"hours":return e*60*60;case"days":return e*24*60*60;case"months":return e*30*24*60*60;case"years":return e*365*24*60*60;default:return e}}function o0(e){let t=0;for(const n of e)for(let r=0;r<n.count;r++)t+=Math.floor(Math.random()*n.faces)+1;return t}function s0(e){return e.map(t=>`${t.count}d${t.faces}`).join(" + ")}function Li({widget:e}){const t=G(k=>k.performRest),[n,r]=E.useState(null),[s,a]=E.useState(!1),[l,c]=E.useState(!1),[i,d]=E.useState(1),[h,g]=E.useState("hours"),{buttonText:x="Rest",healToFull:b=!1,healRandomDice:y=[],healFlatAmount:j=0,clearConditions:C=!1,resetSpellSlots:f=!1,passTime:u=!1,passTimeAmount:p=0,passTimeUnit:v="hours"}=e.data,N=b||y.length>0||(j??0)>0||C||f||u,m=k=>{a(!0);let D,A="";b?(D="full",A="Healed to full!"):y.length>0?(D=o0(y)+(j??0),A=`Healed ${D} HP (${s0(y)}${j?` + ${j}`:""})`):j&&j>0&&(D=j,A=`Healed ${D} HP`);const V=[];D!==void 0&&V.push(A),C&&V.push("Conditions cleared"),f&&V.push("Spell slots reset"),k!==void 0&&k>0&&V.push("Time passed"),r(V.join("  ")),t({healAmount:D,clearConditions:C,resetSpellSlots:f,passTimeSeconds:k}),setTimeout(()=>{a(!1)},300),setTimeout(()=>{r(null)},3e3)},w=()=>{if(!N)return;if(u&&(!p||p<=0)){c(!0);return}const k=u&&p>0?du(p,v):void 0;m(k)},S=()=>{const k=du(i,h);c(!1),m(k)},T=()=>{d(1),g("hours"),c(!1)};return o.jsxs("div",{className:"flex flex-col gap-1 w-full h-full items-center justify-center p-1",children:[o.jsx("button",{onClick:w,onMouseDown:k=>k.stopPropagation(),disabled:!N,className:`w-full h-full min-w-0 px-2 py-1 font-bold text-xs border-[length:var(--border-width)] border-theme-border rounded-button shadow-theme transition-all font-body truncate ${N?"bg-theme-accent text-theme-paper hover:opacity-90 active:translate-x-[2px] active:translate-y-[2px] active:shadow-none cursor-pointer":"bg-theme-muted text-theme-paper opacity-50 cursor-not-allowed"} ${s?"scale-95":""}`,children:x}),n&&o.jsx("div",{className:"absolute -bottom-5 left-0 right-0 text-[10px] text-theme-accent font-bold text-center font-body animate-pulse whitespace-nowrap",children:n}),l&&o.jsx(r0,{title:"Pass Time",onClose:T,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-theme-muted text-sm",children:"How much time passes?"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",min:"1",className:"w-20 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button text-center",value:i,onChange:k=>d(k.target.value===""?"":parseInt(k.target.value)||1),onBlur:k=>d(Math.max(1,parseInt(k.target.value)||1)),autoFocus:!0,onKeyDown:k=>{k.key==="Enter"&&S(),k.key==="Escape"&&T()}}),o.jsxs("select",{className:"flex-1 border border-theme-border focus:border-theme-accent focus:outline-none py-2 px-3 bg-theme-paper text-theme-ink font-body rounded-button",value:h,onChange:k=>g(k.target.value),children:[o.jsx("option",{value:"seconds",children:"Seconds"}),o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"months",children:"Months"}),o.jsx("option",{value:"years",children:"Years"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{onClick:S,className:"flex-1 py-2 px-4 bg-theme-accent text-theme-paper rounded-button hover:opacity-90 transition-colors font-bold",children:"Confirm"}),o.jsx("button",{onClick:T,className:"flex-1 py-2 px-4 border border-theme-border text-theme-muted rounded-button hover:bg-theme-border hover:text-theme-ink transition-colors",children:"Cancel"})]})]})})]})}function a0({title:e,onConfirm:t,onCancel:n,buttonLabel:r,currentValue:s,maxValue:a}){const[l,c]=E.useState(s),i=()=>{const d=typeof l=="string"?parseInt(l)||0:l;t(Math.max(0,Math.min(a,d)))};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:n}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-button p-4 z-50 min-w-[200px]",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold mb-3",children:e}),o.jsx("input",{type:"number",min:"0",max:a,className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent mb-3 text-center font-bold text-lg",value:l,onChange:d=>c(d.target.value===""?"":parseInt(d.target.value)||0),onBlur:d=>c(Math.max(0,Math.min(a,parseInt(d.target.value)||0))),autoFocus:!0,onKeyDown:d=>{d.key==="Enter"&&i(),d.key==="Escape"&&n()}}),o.jsxs("p",{className:"text-xs text-theme-muted mb-3 text-center",children:["Max: ",a]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:n,className:"flex-1 px-3 py-1.5 text-sm font-body text-theme-ink hover:bg-theme-accent/20 rounded-button transition-colors border border-theme-border",children:"Cancel"}),o.jsx("button",{onClick:i,className:"flex-1 px-3 py-1.5 text-sm font-body rounded-button transition-colors bg-theme-accent text-theme-paper hover:opacity-80",children:r})]})]})]})}function _i({widget:e}){const t=G(C=>C.updateWidgetData),{label:n,currentValue:r=0,maxValue:s=100,showPercentage:a=!0,showValues:l=!0}=e.data,[c,i]=E.useState(!1),d=s>0?Math.max(0,Math.min(100,r/s*100)):0,h="text-xs",g="text-xs",x="gap-1",b="h-4",y=C=>{t(e.id,{currentValue:Math.max(0,Math.min(s,C))}),i(!1)},j=()=>l&&a?`${r} / ${s} (${Math.round(d)}%)`:l?`${r} / ${s}`:a?`${Math.round(d)}%`:"";return o.jsxs("div",{className:`flex flex-col ${x} w-full h-full justify-between`,children:[n&&o.jsx("div",{className:`font-bold ${h} text-theme-ink font-heading flex-shrink-0`,children:n}),o.jsx("div",{className:"flex-1 flex flex-col justify-center",children:o.jsxs("div",{className:`relative ${b} bg-theme-muted/30 rounded-button overflow-hidden border border-theme-border cursor-pointer`,onClick:()=>i(!0),onMouseDown:C=>C.stopPropagation(),title:"Click to set value",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 bg-theme-accent transition-all duration-300 ease-out",style:{width:`${d}%`}}),(l||a)&&o.jsx("div",{className:`absolute inset-0 flex items-center justify-center font-bold ${g} text-theme-ink`,style:{textShadow:"0 0 3px var(--color-paper), 0 0 3px var(--color-paper), 0 0 3px var(--color-paper)"},children:j()})]})}),c&&o.jsx(a0,{title:"Set Progress",onConfirm:y,onCancel:()=>i(!1),buttonLabel:"Set",currentValue:r,maxValue:s})]})}function It(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function hu(e,t,n,r){const s=Math.atan2(n.y-t.y,n.x-t.x),a=r/2,l=Math.cos(s+Math.PI/2)*a,c=Math.sin(s+Math.PI/2)*a;e.beginPath(),e.moveTo(t.x+l,t.y+c),e.lineTo(n.x+l,n.y+c),e.lineTo(n.x-l,n.y-c),e.lineTo(t.x-l,t.y-c),e.closePath()}function l0(e){return e.length<2?{start:e[0]||{x:0,y:0},end:e[0]||{x:0,y:0}}:{start:e[0],end:e[e.length-1]}}function gl(e){const t=e.map(c=>c.x),n=e.map(c=>c.y),r=Math.min(...t),s=Math.min(...n),a=Math.max(...t),l=Math.max(...n);return{x:r,y:s,width:a-r,height:l-s}}function xf(e,t,n){const r=It(t,n);if(r===0)return It(e,t);const s=n.x-t.x,a=n.y-t.y;return Math.abs((e.x-t.x)*a-(e.y-t.y)*s)/r}function i0(e,t,n){const r=It(t,n);if(r===0)return It(e,t);const s=n.x-t.x,a=n.y-t.y;let l=((e.x-t.x)*s+(e.y-t.y)*a)/(r*r);l=Math.max(0,Math.min(1,l));const c=t.x+l*s,i=t.y+l*a;return It(e,{x:c,y:i})}function c0(e){if(e.length<2)return!1;const t=e[0],n=e[e.length-1],r=It(t,n);if(r<20)return!0;let s=0;for(const c of e)s+=xf(c,t,n);const a=s/e.length;return r<50?a<20:r/Math.max(a,1)>2}function u0(e){if(e.length<10)return"free";const t=gl(e),n=It(e[0],e[e.length-1]),r=e.reduce((b,y,j)=>j===0?0:b+It(e[j-1],y),0);if(!(n<r*.15))return c0(e)?"corridor":"free";const a=t.width/2,l=t.height/2,c=t.x+a,i=t.y+l;let d=0,h=0;for(const b of e){const y=(b.x-c)**2/a**2+(b.y-i)**2/l**2;d+=Math.abs(y-1);const j=Math.abs(b.x-t.x),C=Math.abs(b.x-(t.x+t.width)),f=Math.abs(b.y-t.y),u=Math.abs(b.y-(t.y+t.height)),p=Math.min(j,C,f,u);h+=p}d/=e.length,h/=e.length;const g=(t.width+t.height)/2;h/=g;let x=0;for(let b=2;b<e.length;b++){const y=e[b-2],j=e[b-1],C=e[b],f=Math.atan2(j.y-y.y,j.x-y.x),u=Math.atan2(C.y-j.y,C.x-j.x);let p=Math.abs(u-f);p>Math.PI&&(p=2*Math.PI-p),p>Math.PI/4&&x++}return x>=3&&x<=8?"rectangle":d<.5?"ellipse":h<.1?"rectangle":d<h*2?"ellipse":"rectangle"}function Oi({widget:e,mode:t,width:n,height:r}){const{label:s,mapShapes:a=[],strokeColor:l="#333333",strokeWidth:c=2,gridEnabled:i=!0,gridSize:d=20,corridorWidth:h=10}=e.data,g=G(I=>I.updateWidgetData),[x,b]=E.useState(a),[y,j]=E.useState("auto"),[C,f]=E.useState(!1),[u,p]=E.useState([]),[v,N]=E.useState(null),m=E.useRef(null),w=E.useRef(null),[S,T]=E.useState({x:0,y:0}),[k,D]=E.useState(1),[A,V]=E.useState(!1),[Z,oe]=E.useState([]),[ee,F]=E.useState(!1),[M,R]=E.useState([]),W=[{tool:"auto",icon:"",label:"Auto Detect"},{tool:"free",icon:"",label:"Free Draw"},{tool:"rectangle",icon:"",label:"Rectangle"},{tool:"ellipse",icon:"",label:"Ellipse"},{tool:"corridor",icon:"",label:"Corridor"},{tool:"eraser",icon:"",label:"Eraser"},{tool:"clearAll",icon:"",label:"Clear All"}],Q=50,X=()=>T(I=>({...I,x:I.x+Q})),H=()=>T(I=>({...I,x:I.x-Q})),te=()=>T(I=>({...I,y:I.y+Q})),me=()=>T(I=>({...I,y:I.y-Q})),ye=()=>D(I=>Math.min(I*1.25,4)),ft=()=>D(I=>Math.max(I/1.25,.25)),Jt=()=>{T({x:0,y:0}),D(1)};E.useEffect(()=>{g(e.id,{mapShapes:x})},[x]);const we=E.useCallback(()=>{const I=m.current;if(!I)return;const _=I.getContext("2d");if(_){if(_.clearRect(0,0,I.width,I.height),_.save(),_.translate(S.x,S.y),_.scale(k,k),i){_.strokeStyle="#ddd",_.lineWidth=.5/k;const O=Math.floor(-S.x/k/d)*d,B=Math.floor(-S.y/k/d)*d,Y=O+I.width/k+d*2,J=B+I.height/k+d*2;for(let ne=O;ne<=Y;ne+=d)_.beginPath(),_.moveTo(ne,B),_.lineTo(ne,J),_.stroke();for(let ne=B;ne<=J;ne+=d)_.beginPath(),_.moveTo(O,ne),_.lineTo(Y,ne),_.stroke()}for(const O of x)if(_.strokeStyle=O.color,_.lineWidth=O.strokeWidth,_.fillStyle=O.color+"20",_.lineCap="round",_.lineJoin="round",O.type==="free"&&O.points.length>0){_.beginPath(),_.moveTo(O.points[0].x,O.points[0].y);for(let B=1;B<O.points.length;B++)_.lineTo(O.points[B].x,O.points[B].y);_.stroke()}else O.type==="rectangle"&&O.bounds?(_.beginPath(),_.rect(O.bounds.x,O.bounds.y,O.bounds.width,O.bounds.height),_.fill(),_.stroke()):O.type==="ellipse"&&O.bounds?(_.beginPath(),_.ellipse(O.bounds.x+O.bounds.width/2,O.bounds.y+O.bounds.height/2,O.bounds.width/2,O.bounds.height/2,0,0,Math.PI*2),_.fill(),_.stroke()):O.type==="corridor"&&O.corridorStart&&O.corridorEnd&&(hu(_,O.corridorStart,O.corridorEnd,O.corridorWidth||20),_.fill(),_.stroke());if(C&&u.length>0){if(_.strokeStyle=l,_.lineWidth=c,_.lineCap="round",_.lineJoin="round",y==="free"||y==="auto"){_.beginPath(),_.moveTo(u[0].x,u[0].y);for(let O=1;O<u.length;O++)_.lineTo(u[O].x,u[O].y);_.stroke()}else if(y==="rectangle"&&v&&u.length>0){const O=u[u.length-1],B=Math.min(v.x,O.x),Y=Math.min(v.y,O.y),J=Math.abs(O.x-v.x),ne=Math.abs(O.y-v.y);_.fillStyle=l+"20",_.beginPath(),_.rect(B,Y,J,ne),_.fill(),_.stroke()}else if(y==="ellipse"&&v&&u.length>0){const O=u[u.length-1],B=Math.min(v.x,O.x),Y=Math.min(v.y,O.y),J=Math.abs(O.x-v.x),ne=Math.abs(O.y-v.y);_.fillStyle=l+"20",_.beginPath(),_.ellipse(B+J/2,Y+ne/2,J/2,ne/2,0,0,Math.PI*2),_.fill(),_.stroke()}else if(y==="corridor"&&v&&u.length>0){const O=u[u.length-1];_.fillStyle=l+"20",hu(_,v,O,h),_.fill(),_.stroke()}}_.restore()}},[x,u,C,y,l,c,i,d,v,h,S,k]);E.useEffect(()=>{we()},[we]),E.useEffect(()=>{const I=m.current,_=w.current;if(I&&_){const B=s?20:0,Y=_.clientWidth,J=Math.max(Y-8,100),ne=Math.max(r-32-B-12,100);I.width=J,I.height=ne,I.style.width=`${J}px`,I.style.height=`${ne}px`,we()}},[n,r,s,we]);const ke=I=>{const _=m.current;if(!_)return{x:0,y:0};const O=_.getBoundingClientRect();let B,Y;"touches"in I?(B=I.touches[0].clientX,Y=I.touches[0].clientY):(B=I.clientX,Y=I.clientY);const J=_.width/O.width,ne=_.height/O.height,Ve=(B-O.left)*J,P=(Y-O.top)*ne;return{x:(Ve-S.x)/k,y:(P-S.y)/k}},Se=I=>{const _=5/k;for(let O=x.length-1;O>=0;O--){const B=x[O];if(B.type==="free"&&B.points.length>0)for(let Y=0;Y<B.points.length-1;Y++){const J=B.points[Y],ne=B.points[Y+1];if(i0(I,J,ne)<_+B.strokeWidth/2)return B.id}else if(B.type==="rectangle"&&B.bounds){const Y=B.bounds,J=_+B.strokeWidth/2,ne=Math.abs(I.x-Y.x)<J&&I.y>=Y.y&&I.y<=Y.y+Y.height,Ve=Math.abs(I.x-(Y.x+Y.width))<J&&I.y>=Y.y&&I.y<=Y.y+Y.height,P=Math.abs(I.y-Y.y)<J&&I.x>=Y.x&&I.x<=Y.x+Y.width,ie=Math.abs(I.y-(Y.y+Y.height))<J&&I.x>=Y.x&&I.x<=Y.x+Y.width;if(ne||Ve||P||ie)return B.id}else if(B.type==="ellipse"&&B.bounds){const Y=B.bounds,J=Y.x+Y.width/2,ne=Y.y+Y.height/2,Ve=Y.width/2,P=Y.height/2;if(Ve>0&&P>0){const ie=Math.sqrt(((I.x-J)/Ve)**2+((I.y-ne)/P)**2),Re=(_+B.strokeWidth/2)/Math.min(Ve,P);if(Math.abs(ie-1)<Re)return B.id}}else if(B.type==="corridor"&&B.corridorStart&&B.corridorEnd){const Y=xf(I,B.corridorStart,B.corridorEnd),J=(B.corridorWidth||20)/2;if(Y<J+_){const ne=It(B.corridorStart,B.corridorEnd),Ve=It(I,B.corridorStart),P=It(I,B.corridorEnd);if(Ve<=ne+_&&P<=ne+_)return B.id}}}return null},mt=I=>{if(t==="edit")return;if(I.stopPropagation(),y==="clearAll"){x.length>0&&V(!0);return}if(y==="eraser"){F(!0),R([]);const O=ke(I),B=Se(O);if(B){const Y=x.find(J=>J.id===B);Y&&(R([Y]),b(J=>J.filter(ne=>ne.id!==B)))}return}const _=ke(I);f(!0),N(_),p([_])},Zt=I=>{if(I.stopPropagation(),ee&&y==="eraser"){const O=ke(I),B=Se(O);if(B){const Y=x.find(J=>J.id===B);Y&&(R(J=>[...J,Y]),b(J=>J.filter(ne=>ne.id!==B)))}return}if(!C)return;const _=ke(I);p(O=>[...O,_])},kt=I=>{if(I.stopPropagation(),ee){F(!1),M.length>0&&oe(B=>[...B,{type:"erase",shapes:M}]),R([]);return}if(!C)return;if(f(!1),u.length<2){p([]),N(null);return}let _;const O=`shape-${Date.now()}`;if(y==="free")_={id:O,type:"free",points:u,color:l,strokeWidth:c};else if(y==="auto"){const B=u0(u);if(B==="free")_={id:O,type:"free",points:u,color:l,strokeWidth:c};else if(B==="corridor"){const{start:Y,end:J}=l0(u);_={id:O,type:"corridor",points:[],corridorStart:Y,corridorEnd:J,corridorWidth:h,color:l,strokeWidth:c}}else{const Y=gl(u);_={id:O,type:B,points:[],bounds:Y,color:l,strokeWidth:c}}}else if(y==="corridor"){const B=u[u.length-1];_={id:O,type:"corridor",points:[],corridorStart:v,corridorEnd:B,corridorWidth:h,color:l,strokeWidth:c}}else{const B=v&&u.length>0?{x:Math.min(v.x,u[u.length-1].x),y:Math.min(v.y,u[u.length-1].y),width:Math.abs(u[u.length-1].x-v.x),height:Math.abs(u[u.length-1].y-v.y)}:gl(u);_={id:O,type:y,points:[],bounds:B,color:l,strokeWidth:c}}b(B=>[...B,_]),oe(B=>[...B,{type:"add",shapes:[_]}]),p([]),N(null)},Wt=I=>{I==="clearAll"?x.length>0&&V(!0):j(I)},U=()=>{oe(I=>[...I,{type:"erase",shapes:x}]),b([]),V(!1)},$=()=>{V(!1)},q=()=>{if(Z.length>0){const I=Z[Z.length-1];I.type==="erase"?b(_=>[..._,...I.shapes]):b(_=>_.filter(O=>!I.shapes.some(B=>B.id===O.id))),oe(_=>_.slice(0,-1))}};return o.jsxs("div",{ref:w,className:"flex flex-col w-full h-full gap-1 relative",children:[s&&o.jsx("div",{className:"font-bold text-center text-xs text-theme-ink font-heading flex-shrink-0",children:s}),A&&o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-50 rounded-button",children:o.jsxs("div",{className:"bg-theme-paper border-[length:var(--border-width)] border-theme-border rounded-button p-4 shadow-lg max-w-xs text-center",children:[o.jsx("p",{className:"text-theme-ink text-sm mb-3",children:"Clear all shapes?"}),o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsx("button",{onClick:U,onMouseDown:I=>I.stopPropagation(),className:"px-3 py-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-red-500 text-white hover:bg-red-600",children:"Clear"}),o.jsx("button",{onClick:$,onMouseDown:I=>I.stopPropagation(),className:"px-3 py-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:"Cancel"})]})]})}),o.jsxs("div",{className:"flex gap-1 justify-center flex-wrap flex-shrink-0 px-1",children:[W.map(({tool:I,icon:_,label:O})=>o.jsx("button",{onClick:()=>Wt(I),onMouseDown:B=>B.stopPropagation(),className:`p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button transition-all ${y===I&&I!=="clearAll"?"bg-theme-accent text-theme-paper":"bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper"}`,title:O,children:_},I)),Z.length>0&&o.jsx("button",{onClick:q,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Undo",children:""})]}),o.jsxs("div",{className:"flex-1 border-[length:var(--border-width)] border-theme-border rounded-button overflow-hidden bg-white mx-1 mb-1 relative",children:[o.jsx("canvas",{ref:m,onMouseDown:mt,onMouseMove:Zt,onMouseUp:kt,onMouseLeave:kt,onTouchStart:mt,onTouchMove:Zt,onTouchEnd:kt,className:"touch-none cursor-crosshair",style:{display:"block"}}),o.jsxs("div",{className:"absolute bottom-2 right-2 flex gap-1 items-end",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-0.5",children:[o.jsx("div",{}),o.jsx("button",{onClick:te,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Pan Up",children:""}),o.jsx("div",{}),o.jsx("button",{onClick:X,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Pan Left",children:""}),o.jsx("button",{onClick:Jt,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Reset View",children:""}),o.jsx("button",{onClick:H,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Pan Right",children:""}),o.jsx("div",{}),o.jsx("button",{onClick:me,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Pan Down",children:""}),o.jsx("div",{})]}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("button",{onClick:ye,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Zoom In",children:"+"}),o.jsx("button",{onClick:ft,onMouseDown:I=>I.stopPropagation(),className:"p-1 text-xs border-[length:var(--border-width)] border-theme-border rounded-button bg-theme-paper/90 text-theme-ink hover:bg-theme-accent hover:text-theme-paper",title:"Zoom Out",children:""})]})]})]})]})}function $i({widget:e,height:t}){const n=G(T=>T.updateWidgetData),{label:r,rollTableItems:s=[{text:"",weight:1}],showRollTableItems:a=!0}=e.data,[l,c]=E.useState(null),[i,d]=E.useState(!1),h="text-xs",g="text-xs py-0.5",x="py-1 px-2 text-xs",b="gap-1",y=16,j=32,C=l?28:0,p=Math.max(40,t-y-j-C-8*3-0*2),v=s.length>0?s:[{text:"",weight:1}],N=(T,k,D)=>{const A=[...v];A[T]={...A[T],text:D},n(e.id,{rollTableItems:A})},m=()=>{const T=v.filter(k=>k.text.trim()&&k.weight>0);if(T.length===0){c("No valid items to roll!");return}d(!0),setTimeout(()=>{const k=T.reduce((Z,oe)=>Z+oe.weight,0),D=Math.random()*k;let A=0,V=T[0];for(const Z of T)if(A+=Z.weight,D<A){V=Z;break}c(V.text),d(!1)},300)},w=()=>v.reduce((T,k)=>T+(k.weight||0),0),S=T=>{const k=w();return k===0?0:Math.round(T/k*100)};return o.jsxs("div",{className:`flex flex-col ${b} w-full h-full`,children:[r&&o.jsx("div",{className:`font-bold ${h} text-theme-ink font-heading flex-shrink-0`,children:r}),o.jsx("button",{onClick:m,onMouseDown:T=>T.stopPropagation(),className:`${x} border-[length:var(--border-width)] border-theme-border font-bold transition-all rounded-button flex-shrink-0 ${i?"bg-theme-muted animate-pulse text-theme-paper":"bg-theme-paper text-theme-ink hover:bg-theme-accent hover:text-theme-paper"}`,disabled:i,children:" Roll Table"}),l&&o.jsx("div",{className:"text-center bg-theme-accent/10 border border-theme-accent/30 rounded-button py-1 px-2 flex-shrink-0",children:o.jsx("span",{className:"font-bold text-sm text-theme-ink font-heading",children:l})}),a&&o.jsx("div",{className:"space-y-1 overflow-y-auto flex-1",style:{maxHeight:`${p}px`},onWheel:T=>{const k=T.currentTarget;k.scrollHeight>k.clientHeight&&T.stopPropagation()},children:v.map((T,k)=>o.jsxs("div",{className:"flex items-center gap-1 group",children:[o.jsx("input",{className:`flex-1 border-b border-theme-border/50 focus:border-theme-border focus:outline-none ${g} min-w-0 bg-transparent text-theme-ink font-body`,value:T.text,onChange:D=>N(k,"text",D.target.value),placeholder:"Item text...",onMouseDown:D=>D.stopPropagation()}),o.jsxs("span",{className:"text-[10px] text-theme-muted w-8 text-right",title:"Probability",children:[S(T.weight),"%"]})]},k))})]})}function d0({widget:e,updateData:t}){const{label:n,numberItems:r=[]}=e.data,[s,a]=E.useState(""),l=h=>{h.preventDefault(),s.trim()&&(t({numberItems:[...r,{name:s.trim(),value:0}]}),a(""))},c=h=>{const g=[...r];g.splice(h,1),t({numberItems:g})},i=(h,g)=>{const x=[...r];x[h]={...x[h],name:g},t({numberItems:x})},d=(h,g)=>{const x=[...r];x[h]={...x[h],value:g},t({numberItems:x})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:h=>t({label:h.target.value}),placeholder:"Trackers"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Items"}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.map((h,g)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:h.name,onChange:x=>i(g,x.target.value),placeholder:"Name"}),o.jsx("input",{type:"number",className:"w-20 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center",value:h.value,onChange:x=>d(g,parseInt(x.target.value)||0)}),o.jsx("button",{onClick:()=>c(g),className:"text-red-500 hover:text-red-700 px-2",children:""})]},g))}),o.jsxs("form",{onSubmit:l,className:"flex gap-2 mt-2",children:[o.jsx("input",{type:"text",value:s,onChange:h=>a(h.target.value),placeholder:"Add new item...",className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"}),o.jsx("button",{type:"submit",className:"px-3 py-1 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]})]})]})}function h0({widget:e,updateData:t}){const{label:n,displayNumbers:r=[],displayLayout:s="horizontal"}=e.data,[a,l]=E.useState(""),c=g=>{g.preventDefault(),a.trim()&&(t({displayNumbers:[...r,{label:a.trim(),value:0}]}),l(""))},i=g=>{const x=[...r];x.splice(g,1),t({displayNumbers:x})},d=(g,x)=>{const b=[...r];b[g]={...b[g],label:x},t({displayNumbers:b})},h=(g,x)=>{const b=[...r];b[g]={...b[g],value:x},t({displayNumbers:b})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:g=>t({label:g.target.value}),placeholder:"Stats"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Layout"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"displayLayout",value:"horizontal",checked:s==="horizontal",onChange:g=>t({displayLayout:g.target.value}),className:"w-4 h-4 text-theme-accent border-theme-border focus:ring-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Horizontal"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"displayLayout",value:"vertical",checked:s==="vertical",onChange:g=>t({displayLayout:g.target.value}),className:"w-4 h-4 text-theme-accent border-theme-border focus:ring-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Vertical"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Numbers"}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.map((g,x)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:g.label,onChange:b=>d(x,b.target.value),placeholder:"Label"}),o.jsx("input",{type:"number",className:"w-20 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center",value:g.value,onChange:b=>h(x,parseInt(b.target.value)||0)}),o.jsx("button",{onClick:()=>i(x),className:"text-red-500 hover:text-red-700 px-2",children:""})]},x))}),o.jsxs("form",{onSubmit:c,className:"flex gap-2 mt-2",children:[o.jsx("input",{type:"text",value:a,onChange:g=>l(g.target.value),placeholder:"Add new number...",className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"}),o.jsx("button",{type:"submit",className:"px-3 py-1 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]})]})]})}function f0({widget:e,updateData:t}){const{label:n,formItems:r=[]}=e.data,[s,a]=E.useState(""),l=g=>{g.preventDefault(),s.trim()&&(t({formItems:[...r,{name:s.trim(),value:""}]}),a(""))},c=g=>{const x=[...r];x.splice(g,1),t({formItems:x})},i=(g,x)=>{const b=[...r];b[g]={...b[g],name:x},t({formItems:b})},d=(g,x)=>{const b=[...r];b[g]={...b[g],value:x},t({formItems:b})},h=e.data.labelWidth??33;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:g=>t({label:g.target.value}),placeholder:"Form Fields"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:["Label Width: ",h,"%"]}),o.jsx("input",{type:"range",min:"10",max:"70",value:h,onChange:g=>t({labelWidth:parseInt(g.target.value)}),className:"w-full accent-theme-accent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Items"}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.map((g,x)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:g.name,onChange:b=>i(x,b.target.value),placeholder:"Name"}),o.jsx("input",{type:"text",className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:g.value,onChange:b=>d(x,b.target.value),placeholder:"Value"}),o.jsx("button",{onClick:()=>c(x),className:"text-red-500 hover:text-red-700 px-2",children:""})]},x))}),o.jsxs("form",{onSubmit:l,className:"flex gap-2 mt-2",children:[o.jsx("input",{type:"text",value:s,onChange:g=>a(g.target.value),placeholder:"Add new field...",className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"}),o.jsx("button",{type:"submit",className:"px-3 py-1 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]})]})]})}function m0({widget:e,updateData:t}){const{label:n,itemCount:r=5}=e.data;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:s=>t({label:s.target.value}),placeholder:"List Title"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Number of Item Slots"}),o.jsx("input",{type:"number",min:"1",max:"50",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:r,onChange:s=>t({itemCount:s.target.value===""?"":parseInt(s.target.value)||""}),onBlur:s=>t({itemCount:Math.max(1,Math.min(50,parseInt(s.target.value)||1))})}),o.jsx("p",{className:"text-xs text-theme-muted mt-1",children:"Items can be filled in during play mode"})]})]})}function p0({widget:e,updateData:t}){const{label:n}=e.data;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:r=>t({label:r.target.value}),placeholder:"Title"})]}),o.jsx("p",{className:"text-xs text-theme-muted",children:"Use the resize handle on the widget in edit mode to adjust the size."})]})}function x0({widget:e,updateData:t}){const{label:n,checkboxItems:r=[]}=e.data,[s,a]=E.useState(""),l=i=>{i.preventDefault(),s.trim()&&(t({checkboxItems:[...r,{name:s.trim(),checked:!1}]}),a(""))},c=i=>{const d=[...r];d.splice(i,1),t({checkboxItems:d})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:i=>t({label:i.target.value}),placeholder:"Checklist Title"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Checkbox Items"}),o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:r.map((i,d)=>o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"flex-1 text-theme-ink",children:i.name}),o.jsx("button",{onClick:()=>c(d),className:"text-red-500 hover:text-red-700 px-2",children:""})]},d))}),o.jsxs("form",{onSubmit:l,className:"flex gap-2 mt-2",children:[o.jsx("input",{type:"text",value:s,onChange:i=>a(i.target.value),placeholder:"Add new item...",className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"}),o.jsx("button",{type:"submit",className:"px-3 py-1 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]})]})]})}function g0({widget:e,updateData:t}){const{label:n,maxValue:r=100,currentValue:s=0,showPercentage:a=!0,showValues:l=!0}=e.data;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:c=>t({label:c.target.value}),placeholder:"Progress"})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Current Value"}),o.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:s,onChange:c=>{const i=c.target.value===""?"":parseInt(c.target.value)||0;t({currentValue:i})},onBlur:c=>{const i=parseInt(c.target.value)||0;t({currentValue:Math.max(0,Math.min(r,i))})},min:0})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Maximum Value"}),o.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:r,onChange:c=>{t({maxValue:c.target.value===""?"":parseInt(c.target.value)||""})},onBlur:c=>{const i=parseInt(c.target.value)||1;t({maxValue:Math.max(1,i)})},min:1})]})]}),o.jsxs("div",{className:"border border-theme-border rounded-button p-3",children:[o.jsx("h4",{className:"font-medium text-theme-ink mb-3",children:"Display Options"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[o.jsx("input",{type:"checkbox",checked:l,onChange:c=>t({showValues:c.target.checked}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Show Values (e.g., 50 / 100)"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:a,onChange:c=>t({showPercentage:c.target.checked}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Show Percentage"})]})]})]})}function b0({widget:e,updateData:t}){const{label:n,maxValue:r=10}=e.data;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:s=>t({label:s.target.value}),placeholder:"Health"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Maximum Value"}),o.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:r,onChange:s=>{t({maxValue:s.target.value===""?"":parseInt(s.target.value)||""})},onBlur:s=>{const a=parseInt(s.target.value)||1;t({maxValue:Math.max(1,a)})},min:1})]})]})}function v0({widget:e,updateData:t}){const{label:n,diceGroups:r=[{count:1,faces:20}],modifier:s=0}=e.data,[a,l]=E.useState({open:!1,groupIndex:-1,faces:[],diceName:""}),[c,i]=E.useState(""),d=G(m=>m.characters),h=G(m=>m.activeCharacterId),g=E.useMemo(()=>{const m=d.find(S=>S.id===h);if(!m)return[];const w=[];for(const S of m.sheets)for(const T of S.widgets)if(T.type==="DICE_ROLLER"&&T.data.diceGroups)for(const k of T.data.diceGroups)k.customFaces&&k.customFaces.length>0&&k.customDiceName&&(w.some(D=>D.name===k.customDiceName)||w.push({name:k.customDiceName,faces:k.customFaces}));return w},[d,h]),x=m=>{const w=g.find(S=>S.name===m);w&&l(S=>({...S,diceName:w.name,faces:[...w.faces]}))},b=(m,w,S)=>{const T=[...r];T[m]={...T[m],[w]:S},t({diceGroups:T})},y=m=>{const w=r[m].customFaces||[],S=r[m].customDiceName||"";l({open:!0,groupIndex:m,faces:[...w],diceName:S}),i("")},j=()=>{l({open:!1,groupIndex:-1,faces:[],diceName:""}),i("")},C=()=>{if(a.groupIndex>=0){const m=[...r];if(a.faces.length>0)m[a.groupIndex]={...m[a.groupIndex],customFaces:a.faces,customDiceName:a.diceName.trim()||void 0,faces:a.faces.length};else{const{customFaces:w,customDiceName:S,...T}=m[a.groupIndex];m[a.groupIndex]=T}t({diceGroups:m})}j()},f=()=>{c.trim()&&(l(m=>({...m,faces:[...m.faces,c.trim()]})),i(""))},u=m=>{l(w=>({...w,faces:w.faces.filter((S,T)=>T!==m)}))},p=m=>{const w=[...r],{customFaces:S,customDiceName:T,...k}=w[m];w[m]={...k,faces:6},t({diceGroups:w})},v=()=>{t({diceGroups:[...r,{count:1,faces:6}]})},N=m=>{if(r.length>1){const w=r.filter((S,T)=>T!==m);t({diceGroups:w})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:m=>t({label:m.target.value}),placeholder:"Roll Name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Dice Groups"}),o.jsx("div",{className:"space-y-2",children:r.map((m,w)=>{var S,T,k,D,A;return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",min:"1",value:m.count,onChange:V=>b(w,"count",V.target.value===""?"":parseInt(V.target.value)||""),onBlur:V=>b(w,"count",Math.max(1,parseInt(V.target.value)||1)),className:"w-16 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center"}),o.jsx("span",{className:"text-theme-ink",children:"d"}),o.jsx("input",{type:"number",min:"1",value:m.faces,onChange:V=>b(w,"faces",V.target.value===""?"":parseInt(V.target.value)||""),onBlur:V=>b(w,"faces",Math.max(1,parseInt(V.target.value)||1)),className:"w-16 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center",disabled:!!((S=m.customFaces)!=null&&S.length),title:(T=m.customFaces)!=null&&T.length?"Faces set by custom faces":""}),o.jsx("button",{onClick:()=>y(w),className:`px-2 py-1 border border-theme-border rounded-button text-xs hover:bg-theme-accent hover:text-theme-paper ${(k=m.customFaces)!=null&&k.length?"bg-theme-accent text-theme-paper":"bg-theme-paper text-theme-ink"}`,title:"Set custom faces",children:"Custom Faces"}),(D=m.customFaces)!=null&&D.length?o.jsx("button",{onClick:()=>p(w),className:"text-orange-500 hover:text-orange-700 px-1 text-xs",title:"Clear custom faces",children:""}):null,r.length>1&&o.jsx("button",{onClick:()=>N(w),className:"text-red-500 hover:text-red-700 px-2",children:""})]}),(A=m.customFaces)!=null&&A.length?o.jsxs("div",{className:"text-xs text-theme-muted ml-2 flex flex-wrap gap-1",children:[m.customDiceName&&o.jsxs("span",{className:"font-medium text-theme-ink",children:[m.customDiceName,":"]}),o.jsx("span",{className:"italic",children:"Faces:"}),m.customFaces.map((V,Z)=>o.jsx("span",{className:"bg-theme-border/30 px-1 rounded",children:V},Z))]}):null]},w)})}),o.jsx("button",{onClick:v,className:"mt-2 px-3 py-1 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:"+ Add Dice"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Modifier"}),o.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:s,onChange:m=>t({modifier:parseInt(m.target.value)||0})})]}),a.open&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:j,children:o.jsxs("div",{className:"bg-theme-paper border-2 border-theme-border rounded-lg p-4 w-96 max-h-[80vh] overflow-y-auto shadow-xl",onClick:m=>m.stopPropagation(),children:[o.jsx("h3",{className:"text-lg font-bold text-theme-ink mb-4",children:"Custom Dice Faces"}),g.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Copy from existing dice"}),o.jsxs("select",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:"",onChange:m=>{m.target.value&&x(m.target.value)},children:[o.jsx("option",{value:"",children:"Select a custom dice to copy..."}),g.map(m=>o.jsxs("option",{value:m.name,children:[m.name," (",m.faces.length," faces)"]},m.name))]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Dice Name (optional)"}),o.jsx("input",{type:"text",value:a.diceName,onChange:m=>l(w=>({...w,diceName:m.target.value})),placeholder:"e.g., Fate Die, Doom Die, Attack Die",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"})]}),o.jsxs("p",{className:"text-sm text-theme-muted mb-4",children:["Add any values for dice faces: numbers, emojis, symbols, or text.",o.jsx("br",{}),o.jsx("span",{className:"font-medium",children:"Tip:"})," Use ",o.jsx("code",{className:"bg-theme-border/30 px-1 rounded",children:","})," to put multiple values on one face (e.g., ",o.jsx("code",{className:"bg-theme-border/30 px-1 rounded",children:",poison"})," or ",o.jsx("code",{className:"bg-theme-border/30 px-1 rounded",children:"2,"}),")"]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("input",{type:"text",value:c,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&f(),placeholder:"e.g., , poison, 5, or ,poison",className:"flex-1 px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"}),o.jsx("button",{onClick:f,className:"px-3 py-2 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:["Current Faces (",a.faces.length,")"]}),a.faces.length===0?o.jsx("p",{className:"text-sm text-theme-muted italic",children:"No custom faces added yet"}):o.jsx("div",{className:"flex flex-wrap gap-2",children:a.faces.map((m,w)=>o.jsxs("div",{className:"flex items-center gap-1 bg-theme-border/30 px-2 py-1 rounded-button group",children:[o.jsx("span",{className:"text-theme-ink",children:m}),o.jsx("button",{onClick:()=>u(w),className:"text-red-500 hover:text-red-700 text-xs opacity-60 group-hover:opacity-100",children:""})]},w))})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Quick Add (click to append to input)"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:["","","","","","","","miss","hit","crit","poison","bleed","stun","1","2","3"].map(m=>o.jsx("button",{onClick:()=>i(w=>w?`${w},${m}`:m),className:"px-2 py-1 border border-theme-border rounded-button text-xs hover:bg-theme-accent hover:text-theme-paper",children:m},m))})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t border-theme-border",children:[o.jsx("button",{onClick:j,className:"px-4 py-2 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-muted hover:text-theme-paper",children:"Cancel"}),o.jsx("button",{onClick:C,className:"px-4 py-2 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Save"})]})]})})]})}function y0({widget:e,updateData:t}){const{label:n,availableDice:r=[4,6,8,10,12,20]}=e.data,[s,a]=E.useState(""),l=[4,6,8,10,12,20,100],c=h=>{const g=r;g.includes(h)?t({availableDice:g.filter(x=>x!==h)}):t({availableDice:[...g,h].sort((x,b)=>x-b)})},i=h=>{h.preventDefault();const g=parseInt(s);g&&g>0&&!r.includes(g)&&(t({availableDice:[...r,g].sort((x,b)=>x-b)}),a(""))},d=h=>{t({availableDice:r.filter(g=>g!==h)})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:h=>t({label:h.target.value}),placeholder:"Dice Tray"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Quick Add Common Dice"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>o.jsxs("button",{onClick:()=>c(h),className:`px-3 py-2 border border-theme-border rounded-button text-sm font-bold transition-all ${r.includes(h)?"bg-theme-accent text-theme-paper":"bg-theme-paper text-theme-ink hover:bg-theme-muted hover:text-theme-paper"}`,children:["d",h]},h))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Add Custom Dice"}),o.jsxs("form",{onSubmit:i,className:"flex gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-theme-ink",children:"d"}),o.jsx("input",{type:"number",min:"1",value:s,onChange:h=>a(h.target.value),placeholder:"faces",className:"w-20 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"})]}),o.jsx("button",{type:"submit",className:"px-3 py-1 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Current Dice Types"}),r.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:r.map(h=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-theme-accent text-theme-paper rounded-button text-sm",children:[o.jsxs("span",{children:["d",h]}),o.jsx("button",{onClick:()=>d(h),className:"hover:text-red-300 ml-1",children:""})]},h))}):o.jsx("p",{className:"text-xs text-theme-muted",children:"No dice types selected"})]})]})}function w0({widget:e,updateData:t}){const{label:n,spellLevels:r=[{level:1,max:4,used:0}]}=e.data,s=()=>{const i=r.map(h=>h.level),d=Math.min(9,Math.max(...i,0)+1);d<=9&&!i.includes(d)&&t({spellLevels:[...r,{level:d,max:2,used:0}]})},a=i=>{const d=[...r];d.splice(i,1),t({spellLevels:d})},l=(i,d)=>{const h=[...r];if(typeof d=="string")h[i]={...h[i],max:d};else{const g=Math.max(1,Math.min(10,d));h[i]={...h[i],max:g,used:Math.min(h[i].used,g)}}t({spellLevels:h})},c=(i,d)=>{const h=[...r];typeof d=="string"?h[i]={...h[i],level:d}:h[i]={...h[i],level:Math.max(1,Math.min(9,d))},t({spellLevels:h})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:i=>t({label:i.target.value}),placeholder:"Spell Slots"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Spell Levels"}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:r.map((i,d)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-theme-ink text-sm",children:"Level"}),o.jsx("input",{type:"number",value:i.level,onChange:h=>c(d,h.target.value===""?"":parseInt(h.target.value)||""),onBlur:h=>c(d,Math.max(1,Math.min(9,parseInt(h.target.value)||1))),className:"w-12 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center",min:1,max:9}),o.jsx("span",{className:"text-theme-ink text-sm",children:"Max Slots"}),o.jsx("input",{type:"number",value:i.max,onChange:h=>l(d,h.target.value===""?"":parseInt(h.target.value)||""),onBlur:h=>l(d,Math.max(1,Math.min(10,parseInt(h.target.value)||1))),className:"w-12 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center",min:1,max:10}),o.jsx("button",{onClick:()=>a(d),className:"text-red-500 hover:text-red-700 px-2",children:""})]},d))}),r.length<9&&o.jsx("button",{onClick:s,className:"mt-2 px-3 py-1 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:"+ Add Level"})]})]})}function k0({widget:e,updateData:t}){const{label:n,imageUrl:r=""}=e.data,s=l=>{var i;const c=(i=l.target.files)==null?void 0:i[0];if(c){const d=new FileReader;d.onload=h=>{var x;const g=(x=h.target)==null?void 0:x.result;t({imageUrl:g})},d.readAsDataURL(c)}},a=()=>{t({imageUrl:""})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:l=>t({label:l.target.value}),placeholder:"Portrait"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Image"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("label",{className:"flex-1 px-3 py-2 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90 cursor-pointer text-center",children:["Upload Image",o.jsx("input",{type:"file",accept:"image/*",onChange:s,className:"hidden"})]}),r&&o.jsx("button",{onClick:a,className:"px-3 py-2 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-red-500 hover:text-white hover:border-red-500",children:"Clear"})]}),r&&o.jsx("div",{className:"mt-2 border border-theme-border rounded-button overflow-hidden",children:o.jsx("img",{src:r,alt:"Preview",className:"w-full h-32 object-cover"})})]})]})}function j0({widget:e,updateData:t}){const{label:n,maxPool:r=5,poolStyle:s="dots",showPoolCount:a=!0,poolResources:l=[]}=e.data,c=l.length>0,i=()=>{const y={name:`Resource ${l.length+1}`,max:5,current:5,style:"dots"};t({poolResources:[...l,y]})},d=y=>{const j=[...l];j.splice(y,1),t({poolResources:j})},h=(y,j,C)=>{const f=[...l];f[y]={...f[y],[j]:C},j==="max"&&f[y].current>C&&(f[y].current=C),t({poolResources:f})},g=()=>{t({poolResources:[{name:n||"Resource 1",max:r,current:r,style:s}]})},x=()=>{if(l.length>0){const y=l[0];t({poolResources:[],maxPool:y.max,currentPool:y.current,poolStyle:y.style})}else t({poolResources:[]})},b=o.jsxs(o.Fragment,{children:[o.jsxs("optgroup",{label:"Basic",children:[o.jsx("option",{value:"dots",children:" Dots"}),o.jsx("option",{value:"boxes",children:" Boxes"}),o.jsx("option",{value:"stars",children:" Stars"}),o.jsx("option",{value:"diamonds",children:" Diamonds"}),o.jsx("option",{value:"crosses",children:" Crosses"}),o.jsx("option",{value:"checkmarks",children:" Checkmarks"})]}),o.jsxs("optgroup",{label:"Themed",children:[o.jsx("option",{value:"hearts",children:" Hearts"}),o.jsx("option",{value:"flames",children:" Flames"}),o.jsx("option",{value:"skulls",children:" Skulls"}),o.jsx("option",{value:"shields",children:" Shields"}),o.jsx("option",{value:"swords",children:" Swords"}),o.jsx("option",{value:"lightning",children:" Lightning"}),o.jsx("option",{value:"moons",children:" Moons"}),o.jsx("option",{value:"suns",children:" Suns"}),o.jsx("option",{value:"coins",children:" Coins"}),o.jsx("option",{value:"gems",children:" Gems"})]})]});return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:y=>t({label:y.target.value}),placeholder:"Resource Pool"})]}),c?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map((y,j)=>o.jsxs("div",{className:"border border-theme-border rounded-button p-3 space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("input",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm focus:outline-none focus:border-theme-accent",value:y.name,onChange:C=>h(j,"name",C.target.value),placeholder:"Resource name"}),o.jsx("button",{onClick:()=>d(j),className:"ml-2 text-red-500 hover:text-red-700 px-2",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs text-theme-muted mb-1",children:"Max"}),o.jsx("input",{type:"number",min:"1",max:"100",className:"w-full px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm focus:outline-none focus:border-theme-accent",value:y.max,onChange:C=>h(j,"max",parseInt(C.target.value)||1),onBlur:C=>h(j,"max",Math.max(1,Math.min(100,parseInt(C.target.value)||1)))})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"block text-xs text-theme-muted mb-1",children:"Style"}),o.jsx("select",{value:y.style,onChange:C=>h(j,"style",C.target.value),className:"w-full px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm focus:outline-none focus:border-theme-accent",children:b})]})]})]},j))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:i,className:"flex-1 px-3 py-2 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"+ Add Resource"}),o.jsx("button",{onClick:x,className:"px-3 py-2 border border-theme-border rounded-button text-sm text-theme-muted hover:bg-theme-border hover:text-theme-ink transition-colors",children:"Single Mode"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Maximum Pool"}),o.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:r,onChange:y=>{t({maxPool:y.target.value===""?"":parseInt(y.target.value)||""})},onBlur:y=>{const j=Math.max(1,Math.min(1e3,parseInt(y.target.value)||1));t({maxPool:j})},min:1,max:1e3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Style"}),o.jsx("select",{value:s,onChange:y=>t({poolStyle:y.target.value}),className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",children:b})]}),o.jsx("button",{onClick:g,className:"w-full px-3 py-2 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"+ Add Multiple Resources"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:a,onChange:y=>t({showPoolCount:y.target.checked}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Show Counter (e.g., 3 / 5)"})]})]})}function N0({widget:e,updateData:t}){const{label:n,toggleItems:r=[]}=e.data,[s,a]=E.useState(""),l=["Blinded","Charmed","Frightened","Poisoned","Stunned","Prone","Invisible","Paralyzed","Unconscious","Exhausted","Afraid","Angry","Confused","Wounded","Dazed"],c=x=>{x.trim()&&!r.some(b=>b.name.toLowerCase()===x.trim().toLowerCase())&&t({toggleItems:[...r,{name:x.trim(),active:!1}]}),a("")},i=x=>{x.preventDefault(),c(s)},d=x=>{const b=[...r];b.splice(x,1),t({toggleItems:b})},h=r.map(x=>x.name.toLowerCase()),g=l.filter(x=>!h.includes(x.toLowerCase()));return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:x=>t({label:x.target.value}),placeholder:"Conditions"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Conditions"}),o.jsx("div",{className:"flex flex-wrap gap-1 max-h-32 overflow-y-auto",children:r.map((x,b)=>o.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-theme-background rounded-button text-sm",children:[o.jsx("span",{className:"text-theme-ink",children:x.name}),o.jsx("button",{onClick:()=>d(b),className:"text-red-500 hover:text-red-700",children:""})]},b))}),o.jsxs("form",{onSubmit:i,className:"flex gap-2 mt-2",children:[o.jsx("input",{type:"text",value:s,onChange:x=>a(x.target.value),placeholder:"Add condition...",className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm"}),o.jsx("button",{type:"submit",className:"px-3 py-1 bg-theme-accent text-theme-paper rounded-button text-sm hover:opacity-90",children:"Add"})]}),g.length>0&&o.jsxs("div",{className:"mt-2",children:[o.jsx("span",{className:"text-xs text-theme-muted",children:"Quick add:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:g.slice(0,8).map(x=>o.jsx("button",{onClick:()=>c(x),className:"px-2 py-0.5 text-xs border border-theme-border rounded-button text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:x},x))})]})]})]})}function S0({widget:e,updateData:t}){const{label:n,roundMode:r=!1}=e.data;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:s=>t({label:s.target.value}),placeholder:"Time Tracker"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:s=>t({roundMode:s.target.checked}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm font-medium text-theme-ink",children:"Round Mode"})]}),o.jsx("p",{className:"text-xs text-theme-muted mt-1 ml-6",children:"In round mode, time is tracked in rounds instead of real-world time units."})]}),o.jsxs("div",{className:"text-sm text-theme-muted",children:[o.jsx("p",{children:"Use this widget to track timed effects in your game."}),o.jsxs("ul",{className:"list-disc ml-4 mt-2 space-y-1",children:[o.jsx("li",{children:"Add effects with their remaining duration"}),o.jsx("li",{children:r?'Use "Pass Round" to advance all timers by 1 round':'Use the "Pass Time" controls to advance all timers at once'}),o.jsx("li",{children:"Expired effects will be highlighted"})]})]})]})}function C0({widget:e,updateData:t}){const{label:n,columns:r=["Item","Qty","Weight"],rows:s=[]}=e.data,[a,l]=E.useState(null),[c,i]=E.useState(null),d=jl.useRef(null),h=(v,N)=>{const m=[...r];m[v]=N,t({columns:m})},g=()=>{const v=s.map(N=>({...N,cells:[...N.cells,""]}));t({columns:[...r,"New"],rows:v})},x=v=>{if(r.length<=1)return;const N=[...r];N.splice(v,1);const m=s.map(w=>({...w,cells:w.cells.filter((S,T)=>T!==v)}));t({columns:N,rows:m})},b=(v,N)=>{d.current=N,l(N),v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",N.toString());const m=v.currentTarget;m&&v.dataTransfer.setDragImage(m,0,0)},y=(v,N)=>{v.preventDefault(),v.stopPropagation(),d.current!==null&&d.current!==N&&i(N)},j=()=>{i(null)},C=(v,N)=>{v.preventDefault(),v.stopPropagation();const m=d.current;if(m!==null&&m!==N){const w=[...r],S=s.map(D=>({...D,cells:[...D.cells]})),[T]=w.splice(m,1),k=m<N?N-1:N;w.splice(k,0,T),S.forEach(D=>{const[A]=D.cells.splice(m,1);D.cells.splice(k,0,A)}),t({columns:w,rows:S})}d.current=null,l(null),i(null)},f=()=>{d.current=null,l(null),i(null)},u=()=>{const v={cells:r.map(()=>"")};t({rows:[...s,v]})},p=v=>{if(s.length<=1)return;const N=[...s];N.splice(v,1),t({rows:N})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:v=>t({label:v.target.value}),placeholder:"Inventory"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Columns"}),o.jsx("div",{className:"space-y-2",onDragOver:v=>v.preventDefault(),children:r.map((v,N)=>o.jsxs("div",{className:`flex items-center gap-2 ${a===N?"opacity-50":""} ${c===N&&a!==N?"border-t-2 border-theme-accent":""}`,draggable:!0,onDragStart:m=>b(m,N),onDragOver:m=>{m.preventDefault(),m.stopPropagation(),y(m,N)},onDragLeave:j,onDrop:m=>{m.preventDefault(),m.stopPropagation(),C(m,N)},onDragEnd:f,children:[o.jsx("div",{className:"cursor-grab active:cursor-grabbing text-theme-muted hover:text-theme-ink px-1 touch-none",title:"Drag to reorder",children:""}),o.jsx("input",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:v,onChange:m=>h(N,m.target.value),placeholder:"Column name",draggable:!1,onDragOver:m=>m.stopPropagation()}),r.length>1&&o.jsx("button",{onClick:()=>x(N),className:"text-red-500 hover:text-red-700 px-2",children:""})]},N))}),o.jsx("button",{onClick:g,className:"mt-2 px-3 py-1 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:"+ Add Column"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:["Rows (",s.length,")"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:u,className:"px-3 py-1 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:"+ Add Row"}),s.length>1&&o.jsx("button",{onClick:()=>p(s.length-1),className:"px-3 py-1 border border-theme-border rounded-button text-sm text-red-500 hover:bg-red-500 hover:text-white",children:"- Remove Row"})]}),o.jsx("p",{className:"text-xs text-theme-muted mt-1",children:"Row contents can be edited in play mode"})]})]})}function T0({widget:e,updateData:t}){const{buttonText:n="Rest",healToFull:r=!1,healRandomDice:s=[],healFlatAmount:a=0,clearConditions:l=!1,resetSpellSlots:c=!1,passTime:i=!1,passTimeAmount:d=0,passTimeUnit:h="hours"}=e.data,g=(j,C,f)=>{const u=[...s];u[j]={...u[j],[C]:f},t({healRandomDice:u})},x=()=>{t({healRandomDice:[...s,{count:1,faces:8}]})},b=j=>{const C=s.filter((f,u)=>u!==j);t({healRandomDice:C})},y=j=>{t(j?{healToFull:!0,healRandomDice:[],healFlatAmount:0}:{healToFull:!1})};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Button Text"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n,onChange:j=>t({buttonText:j.target.value}),placeholder:"Rest"})]}),o.jsxs("div",{className:"border border-theme-border rounded-button p-3",children:[o.jsx("h4",{className:"font-medium text-theme-ink mb-3",children:"Healing Options"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-3",children:[o.jsx("input",{type:"checkbox",checked:r,onChange:j=>y(j.target.checked),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Heal to Full"})]}),!r&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Random Heal Dice"}),o.jsx("div",{className:"space-y-2",children:s.map((j,C)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",min:"1",value:j.count,onChange:f=>g(C,"count",f.target.value===""?"":parseInt(f.target.value)||""),onBlur:f=>g(C,"count",Math.max(1,parseInt(f.target.value)||1)),className:"w-16 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center"}),o.jsx("span",{className:"text-theme-ink",children:"d"}),o.jsx("input",{type:"number",min:"1",value:j.faces,onChange:f=>g(C,"faces",f.target.value===""?"":parseInt(f.target.value)||""),onBlur:f=>g(C,"faces",Math.max(1,parseInt(f.target.value)||1)),className:"w-16 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center"}),o.jsx("button",{onClick:()=>b(C),className:"text-red-500 hover:text-red-700 px-2",children:""})]},C))}),o.jsx("button",{onClick:x,className:"mt-2 px-3 py-1 border border-theme-border rounded-button text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper",children:"+ Add Dice"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Flat Heal Amount"}),o.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:a??0,onChange:j=>t({healFlatAmount:parseInt(j.target.value)||0})}),o.jsx("p",{className:"text-xs text-theme-muted mt-1",children:"Added to dice result if dice are configured"})]})]})]}),o.jsxs("div",{className:"border border-theme-border rounded-button p-3",children:[o.jsx("h4",{className:"font-medium text-theme-ink mb-3",children:"Other Actions"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[o.jsx("input",{type:"checkbox",checked:l,onChange:j=>t({clearConditions:j.target.checked}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Clear All Conditions"})]}),o.jsx("p",{className:"text-xs text-theme-muted ml-6 mb-3",children:"Turns off all active conditions in Condition widgets"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:c,onChange:j=>t({resetSpellSlots:j.target.checked}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Reset Spell Slots"})]}),o.jsx("p",{className:"text-xs text-theme-muted ml-6 mb-3",children:"Restores all used spell slots in Spell Slot widgets"}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:i,onChange:j=>t({passTime:j.target.checked,passTimeAmount:0,passTimeUnit:"hours"}),className:"w-4 h-4 accent-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Pass Time"})]}),o.jsx("p",{className:"text-xs text-theme-muted ml-6 mb-2",children:"Advances time for all Time Tracker widgets"}),i&&o.jsxs("div",{className:"ml-6 mt-2",children:[o.jsx("label",{className:"block text-xs text-theme-muted mb-1",children:"Flat Time Amount (leave 0 to prompt when clicked)"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",min:"0",className:"w-20 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center",value:d??0,onChange:j=>t({passTimeAmount:parseInt(j.target.value)||0})}),o.jsxs("select",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm",value:h,onChange:j=>t({passTimeUnit:j.target.value}),children:[o.jsx("option",{value:"seconds",children:"Seconds"}),o.jsx("option",{value:"minutes",children:"Minutes"}),o.jsx("option",{value:"hours",children:"Hours"}),o.jsx("option",{value:"days",children:"Days"}),o.jsx("option",{value:"months",children:"Months"}),o.jsx("option",{value:"years",children:"Years"})]})]})]})]})]})}function E0({widget:e,updateData:t}){const{label:n,strokeColor:r="#333333",strokeWidth:s=2,gridEnabled:a=!0,gridSize:l=20,corridorWidth:c=10}=e.data;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:i=>t({label:i.target.value}),placeholder:"Dungeon Map"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Stroke Color"}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("input",{type:"color",value:r,onChange:i=>t({strokeColor:i.target.value}),className:"w-10 h-10 border border-theme-border rounded-button cursor-pointer"}),o.jsx("input",{className:"flex-1 px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:r,onChange:i=>t({strokeColor:i.target.value}),placeholder:"#333333"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Stroke Width"}),o.jsx("input",{type:"range",min:"1",max:"10",value:s,onChange:i=>t({strokeWidth:parseInt(i.target.value)}),className:"w-full"}),o.jsxs("div",{className:"text-xs text-theme-muted text-center",children:[s,"px"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Corridor Width"}),o.jsx("input",{type:"range",min:"5",max:"50",value:c,onChange:i=>t({corridorWidth:parseInt(i.target.value)}),className:"w-full"}),o.jsxs("div",{className:"text-xs text-theme-muted text-center",children:[c,"px"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",id:"gridEnabled",checked:a,onChange:i=>t({gridEnabled:i.target.checked}),className:"w-4 h-4"}),o.jsx("label",{htmlFor:"gridEnabled",className:"text-sm font-medium text-theme-ink",children:"Show Grid"})]}),a&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Grid Size"}),o.jsx("input",{type:"range",min:"10",max:"50",value:l,onChange:i=>t({gridSize:parseInt(i.target.value)}),className:"w-full"}),o.jsxs("div",{className:"text-xs text-theme-muted text-center",children:[l,"px"]})]})]})}function M0({widget:e,updateData:t}){const{label:n,rollTableItems:r=[{text:"",weight:1}],showRollTableItems:s=!0}=e.data,a=(h,g,x)=>{const b=[...r];if(g==="text")b[h]={...b[h],text:x};else{const y=Math.max(0,Number(x)||0);b[h]={...b[h],weight:y}}t({rollTableItems:b})},l=()=>{const h=[...r,{text:"",weight:1}];t({rollTableItems:h})},c=h=>{if(r.length<=1)return;const g=r.filter((x,b)=>b!==h);t({rollTableItems:g})},i=()=>r.reduce((h,g)=>h+(g.weight||0),0),d=h=>{const g=i();return g===0?0:Math.round(h/g*100)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-1",children:"Widget Label"}),o.jsx("input",{className:"w-full px-3 py-2 border border-theme-border rounded-button bg-theme-paper text-theme-ink focus:outline-none focus:border-theme-accent",value:n||"",onChange:h=>t({label:h.target.value}),placeholder:"Roll Table Title"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:s,onChange:h=>t({showRollTableItems:h.target.checked}),className:"w-4 h-4 rounded border-theme-border text-theme-accent focus:ring-theme-accent"}),o.jsx("span",{className:"text-sm text-theme-ink",children:"Show items in widget"})]}),o.jsx("p",{className:"text-xs text-theme-muted mt-1 mb-4",children:"When unchecked, only the roll button and result will be visible"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-theme-ink mb-2",children:"Table Items"}),o.jsx("p",{className:"text-xs text-theme-muted mb-2",children:"Add items with weights. Higher weights = higher probability. All weights are normalized when rolling."}),o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map((h,g)=>o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-theme-background rounded-button",children:[o.jsxs("span",{className:"text-xs text-theme-muted w-6",children:[g+1,"."]}),o.jsx("input",{className:"flex-1 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm focus:outline-none focus:border-theme-accent",value:h.text,onChange:x=>a(g,"text",x.target.value),placeholder:"Item text..."}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-xs text-theme-muted",children:"Weight:"}),o.jsx("input",{type:"number",min:"0",step:"1",className:"w-16 px-2 py-1 border border-theme-border rounded-button bg-theme-paper text-theme-ink text-sm text-center focus:outline-none focus:border-theme-accent",value:h.weight,onChange:x=>a(g,"weight",x.target.value)})]}),o.jsxs("span",{className:"text-xs text-theme-muted w-10 text-right",children:[d(h.weight),"%"]}),o.jsx("button",{onClick:()=>c(g),disabled:r.length<=1,className:"text-red-500 hover:text-red-700 disabled:opacity-30 disabled:cursor-not-allowed px-1",children:""})]},g))}),o.jsx("button",{onClick:l,className:"mt-2 w-full px-3 py-2 text-sm border border-dashed border-theme-border rounded-button text-theme-muted hover:text-theme-ink hover:border-theme-accent transition-colors",children:"+ Add Item"})]}),o.jsxs("div",{className:"text-xs text-theme-muted bg-theme-background p-2 rounded-button",children:[o.jsx("strong",{children:"How it works:"})," When you roll, each item's probability is calculated as (item weight / total weight). For example, if you have items with weights 1, 2, and 3, they have ~17%, ~33%, and ~50% chance respectively."]})]})}function I0(e){return{NUMBER:"Number Tracker",NUMBER_DISPLAY:"Number Display",LIST:"List",TEXT:"Text",CHECKBOX:"Checkbox",HEALTH_BAR:"Health Bar",DICE_ROLLER:"Dice Roller",DICE_TRAY:"Dice Tray",SPELL_SLOT:"Spell Slots",IMAGE:"Image",POOL:"Resource Pool",TOGGLE_GROUP:"Conditions",TABLE:"Table",TIME_TRACKER:"Time Tracker",FORM:"Form",REST_BUTTON:"Rest Button",PROGRESS_BAR:"Progress Bar",MAP_SKETCHER:"Map Sketcher",ROLL_TABLE:"Roll Table"}[e]||"Widget"}function P0({widget:e,onClose:t}){const n=G(y=>y.updateWidgetData),r=G(y=>y.updateWidgetSize),[s,a]=E.useState({...e.data}),[l,c]=E.useState(e.w||200),i=y=>{const j={...s,...y};a(j),n(e.id,y)},d=y=>{c(y),r(e.id,y,e.h||0)},h={...e,data:s,w:l},g=()=>{const y={widget:h,updateData:i,updateWidth:d};switch(e.type){case"NUMBER":return o.jsx(d0,{...y});case"NUMBER_DISPLAY":return o.jsx(h0,{...y});case"LIST":return o.jsx(m0,{...y});case"TEXT":return o.jsx(p0,{...y});case"CHECKBOX":return o.jsx(x0,{...y});case"HEALTH_BAR":return o.jsx(b0,{...y});case"DICE_ROLLER":return o.jsx(v0,{...y});case"DICE_TRAY":return o.jsx(y0,{...y});case"SPELL_SLOT":return o.jsx(w0,{...y});case"IMAGE":return o.jsx(k0,{...y});case"POOL":return o.jsx(j0,{...y});case"TOGGLE_GROUP":return o.jsx(N0,{...y});case"TABLE":return o.jsx(C0,{...y});case"TIME_TRACKER":return o.jsx(S0,{...y});case"FORM":return o.jsx(f0,{...y});case"REST_BUTTON":return o.jsx(T0,{...y});case"PROGRESS_BAR":return o.jsx(g0,{...y});case"MAP_SKETCHER":return o.jsx(E0,{...y});case"ROLL_TABLE":return o.jsx(M0,{...y});default:return null}},x=()=>{const y=l||e.w||200,j=e.h||200;return{width:y,height:j}},b=()=>{const{width:y,height:j}=x(),C={widget:h,mode:"play",width:y,height:j};switch(e.type){case"NUMBER":return o.jsx(vi,{...C});case"NUMBER_DISPLAY":return o.jsx(yi,{...C});case"LIST":return o.jsx(wi,{...C});case"TEXT":return o.jsx(ki,{...C});case"CHECKBOX":return o.jsx(ji,{...C});case"HEALTH_BAR":return o.jsx(Ni,{...C});case"DICE_ROLLER":return o.jsx(Si,{...C});case"DICE_TRAY":return o.jsx(Ci,{...C});case"SPELL_SLOT":return o.jsx(Ti,{...C});case"IMAGE":return o.jsx(Ei,{...C});case"POOL":return o.jsx(Mi,{...C});case"TOGGLE_GROUP":return o.jsx(Ii,{...C});case"TABLE":return o.jsx(Pi,{...C});case"TIME_TRACKER":return o.jsx(Ri,{...C});case"FORM":return o.jsx(Di,{...C});case"REST_BUTTON":return o.jsx(Li,{...C});case"PROGRESS_BAR":return o.jsx(_i,{...C});case"MAP_SKETCHER":return o.jsx(Oi,{...C});case"ROLL_TABLE":return o.jsx($i,{...C});default:return null}};return E.useEffect(()=>{const y=j=>{j.key==="Escape"&&t()};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[t]),Fn.createPortal(o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:y=>{y.target===y.currentTarget&&t()},onMouseDown:y=>y.stopPropagation(),onMouseUp:y=>y.stopPropagation(),onMouseMove:y=>y.stopPropagation(),onWheel:y=>y.stopPropagation(),onTouchStart:y=>y.stopPropagation(),onTouchMove:y=>y.stopPropagation(),onTouchEnd:y=>y.stopPropagation(),onDragOver:y=>y.preventDefault(),children:o.jsxs("div",{className:"bg-theme-paper border-[length:var(--border-width)] border-theme-border rounded-theme shadow-theme w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-theme-border",children:[o.jsxs("h2",{className:"text-lg font-bold text-theme-ink font-heading",children:["Edit ",I0(e.type)]}),o.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center text-theme-muted hover:text-theme-ink hover:bg-theme-background rounded-button transition-colors",children:""})]}),o.jsx("div",{className:"flex-1 overflow-auto p-4",children:o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-sm font-medium text-theme-muted mb-3",children:"Settings"}),g()]}),o.jsxs("div",{className:"flex-shrink-0",children:[o.jsx("h3",{className:"text-sm font-medium text-theme-muted mb-3",children:"Preview"}),o.jsx("div",{className:"bg-theme-paper border-[length:var(--border-width)] border-theme-border rounded-theme p-2 shadow-theme",style:{width:`${x().width+16}px`,height:`${x().height+16}px`},children:b()})]})]})}),o.jsx("div",{className:"px-4 py-3 border-t border-theme-border flex justify-end",children:o.jsx("button",{onClick:t,className:"px-4 py-2 bg-theme-accent text-theme-paper rounded-button hover:opacity-90 font-medium",children:"Done"})})]})}),document.body)}const Ce=10,Un=10,R0={NUMBER:{width:140,height:60},NUMBER_DISPLAY:{width:120,height:80},LIST:{width:140,height:80},TEXT:{width:120,height:60},CHECKBOX:{width:140,height:60},HEALTH_BAR:{width:160,height:80},DICE_ROLLER:{width:160,height:120},DICE_TRAY:{width:180,height:180},SPELL_SLOT:{width:160,height:80},IMAGE:{width:100,height:100},POOL:{width:120,height:80},TOGGLE_GROUP:{width:140,height:60},TABLE:{width:180,height:80},TIME_TRACKER:{width:180,height:140},FORM:{width:160,height:60},REST_BUTTON:{width:120,height:80},PROGRESS_BAR:{width:160,height:80},MAP_SKETCHER:{width:250,height:250},ROLL_TABLE:{width:140,height:60}};function D0({widget:e,scale:t}){var Ve;const n=G(P=>P.updateWidgetPosition),r=G(P=>P.updateWidgetSize),s=G(P=>P.moveWidgetGroup),a=G(P=>P.removeWidget),l=G(P=>P.cloneWidget),c=G(P=>P.detachWidgets),i=G(P=>P.mode),d=G(P=>P.setEditingWidgetId),h=G(P=>P.selectedWidgetId),g=G(P=>P.setSelectedWidgetId),x=ks(P=>P.addTemplate),b=G(P=>P.activeCharacterId),j=G(P=>P.characters).find(P=>P.id===b),C=j!=null&&j.theme?wn(j.theme):void 0,f=j!=null&&j.theme?zs(j.theme):void 0,u=(C==null?void 0:C.cardTexture)||(f==null?void 0:f.cardTexture)||"none",p=vt(u),v=E.useRef(null),N=E.useRef(null),m=E.useRef(null),[w,S]=E.useState(!1),[T,k]=E.useState(!1),[D,A]=E.useState(!1),[V,Z]=E.useState(!1),[oe,ee]=E.useState(""),[F,M]=E.useState(!1),[R,W]=E.useState(null),Q=E.useRef({x:0,y:0}),[X,H]=E.useState(!1),te=E.useRef({mouseX:0,mouseY:0,width:0,height:0}),me=h===e.id,ye=R0[e.type]||{width:120,height:60};E.useEffect(()=>{const P=ie=>{m.current&&!m.current.contains(ie.target)&&(k(!1),A(!1),Z(!1),ee(""))};if(T)return document.addEventListener("mousedown",P),document.addEventListener("touchstart",P),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("touchstart",P)}},[T]),E.useEffect(()=>{if(e.h&&e.h>0){W(e.h);return}if(v.current){const P=new ResizeObserver(ie=>{for(const Re of ie){const ae=Re.target.scrollHeight,De=Math.ceil(ae/Un)*Un;W(De)}});return P.observe(v.current),()=>P.disconnect()}},[e.data,e.h]);const ft=P=>{P.touches.length>=2||i==="edit"&&(me||(P.preventDefault(),P.stopPropagation(),g(e.id)))},Jt=P=>{i==="edit"&&!we&&(P.preventDefault(),P.stopPropagation(),g(e.id))},we=F||me,ke=()=>{S(!0),d(e.id)},Se=()=>{S(!1),d(null)},mt=P=>Math.round(P/Un)*Un,kt=(()=>{if(e.w)return e.w;if(e.type==="TABLE"){const ie=(e.data.columns||["Item","Qty","Weight"]).length,De=Math.max(200,ie*80+40);return mt(De)}return 200})(),Wt=E.useCallback(P=>{P.preventDefault(),P.stopPropagation(),e.groupId&&c(e.id,e.id);const ie="touches"in P?P.touches[0].clientX:P.clientX,Re="touches"in P?P.touches[0].clientY:P.clientY,ae=e.w||200,De=e.h||120;te.current={mouseX:ie,mouseY:Re,width:ae,height:De},H(!0)},[e.w,e.h,e.groupId,e.id,c]),U=E.useCallback(P=>{if(!X)return;const ie="touches"in P?P.touches[0].clientX:P.clientX,Re="touches"in P?P.touches[0].clientY:P.clientY,ae=(ie-te.current.mouseX)/t,De=(Re-te.current.mouseY)/t,je=mt(Math.max(ye.width,te.current.width+ae)),ot=mt(Math.max(ye.height,te.current.height+De));r(e.id,je,ot)},[X,t,ye,e.id,r]),$=E.useCallback(()=>{H(!1)},[]);E.useEffect(()=>{if(X)return window.addEventListener("mousemove",U),window.addEventListener("mouseup",$),window.addEventListener("touchmove",U),window.addEventListener("touchend",$),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",$),window.removeEventListener("touchmove",U),window.removeEventListener("touchend",$)}},[X,U,$]);const q=(P,ie)=>{Q.current={x:ie.x,y:ie.y}},I=(P,ie)=>{if(e.groupId){const Re=ie.x-Q.current.x,ae=ie.y-Q.current.y;document.querySelectorAll(`[data-group-id="${e.groupId}"]`).forEach(je=>{const ot=je.getAttribute("data-widget-id");if(ot&&ot!==e.id){const qt=G.getState().getWidgetsInGroup(e.groupId).find(L=>L.id===ot);qt&&(je.style.transform=`translate(${qt.x+Re}px, ${qt.y+ae}px)`)}})}},_=(P,ie)=>{const Re=mt(ie.x),ae=mt(ie.y);if(e.groupId){const De=Re-e.x,je=ae-e.y;(De!==0||je!==0)&&s(e.id,De,je)}else n(e.id,Re,ae)},O=e.h&&e.h>0?e.h:R,B=j?((Ve=j.sheets.find(P=>P.id===j.activeSheetId))==null?void 0:Ve.widgets)||[]:[],Y=E.useMemo(()=>{const P={topLeft:!0,topRight:!0,bottomLeft:!0,bottomRight:!0};if(!e.attachedTo||e.attachedTo.length===0)return P;const ie=e.w||200,Re=O||120,ae={left:e.x,right:e.x+ie,top:e.y,bottom:e.y+Re};for(const De of e.attachedTo){const je=B.find(se=>se.id===De);if(!je)continue;const ot=document.querySelector(`[data-widget-id="${De}"]`),Nr=je.w||(ot?ot.offsetWidth:200),qt=je.h||(ot?ot.offsetHeight:120),L={left:je.x,right:je.x+Nr,top:je.y,bottom:je.y+qt};Math.abs(L.right-ae.left)<=Ce&&(L.top<=ae.top+Ce&&L.bottom>=ae.top-Ce&&(P.topLeft=!1),L.top<=ae.bottom+Ce&&L.bottom>=ae.bottom-Ce&&(P.bottomLeft=!1)),Math.abs(L.left-ae.right)<=Ce&&(L.top<=ae.top+Ce&&L.bottom>=ae.top-Ce&&(P.topRight=!1),L.top<=ae.bottom+Ce&&L.bottom>=ae.bottom-Ce&&(P.bottomRight=!1)),Math.abs(L.bottom-ae.top)<=Ce&&(L.left<=ae.left+Ce&&L.right>=ae.left-Ce&&(P.topLeft=!1),L.left<=ae.right+Ce&&L.right>=ae.right-Ce&&(P.topRight=!1)),Math.abs(L.top-ae.bottom)<=Ce&&(L.left<=ae.left+Ce&&L.right>=ae.left-Ce&&(P.bottomLeft=!1),L.left<=ae.right+Ce&&L.right>=ae.right-Ce&&(P.bottomRight=!1))}return P},[e.attachedTo,e.x,e.y,e.w,O,B]),J=E.useMemo(()=>{const P="var(--border-radius)",ie="0px";return{borderTopLeftRadius:Y.topLeft?P:ie,borderTopRightRadius:Y.topRight?P:ie,borderBottomLeftRadius:Y.bottomLeft?P:ie,borderBottomRightRadius:Y.bottomRight?P:ie}},[Y]),ne=()=>{const P={widget:e,mode:"play",width:kt,height:O||120};switch(e.type){case"NUMBER":return o.jsx(vi,{...P});case"NUMBER_DISPLAY":return o.jsx(yi,{...P});case"LIST":return o.jsx(wi,{...P});case"TEXT":return o.jsx(ki,{...P});case"CHECKBOX":return o.jsx(ji,{...P});case"HEALTH_BAR":return o.jsx(Ni,{...P});case"DICE_ROLLER":return o.jsx(Si,{...P});case"DICE_TRAY":return o.jsx(Ci,{...P});case"SPELL_SLOT":return o.jsx(Ti,{...P});case"IMAGE":return o.jsx(Ei,{...P});case"POOL":return o.jsx(Mi,{...P});case"TOGGLE_GROUP":return o.jsx(Ii,{...P});case"TABLE":return o.jsx(Pi,{...P});case"TIME_TRACKER":return o.jsx(Ri,{...P});case"FORM":return o.jsx(Di,{...P});case"REST_BUTTON":return o.jsx(Li,{...P});case"PROGRESS_BAR":return o.jsx(_i,{...P});case"MAP_SKETCHER":return o.jsx(Oi,{...P});case"ROLL_TABLE":return o.jsx($i,{...P});default:return null}};return o.jsxs(o.Fragment,{children:[o.jsx(qg,{nodeRef:v,position:{x:e.x,y:e.y},onStart:q,onDrag:I,onStop:_,scale:t,grid:[Un,Un],handle:".drag-handle",disabled:i==="play",children:o.jsxs("div",{ref:v,"data-widget-id":e.id,"data-group-id":e.groupId||"",className:`react-draggable absolute bg-theme-paper border-[length:var(--border-width)] border-theme-border p-1 cursor-default group ${X?"select-none":""}`,style:{width:`${kt}px`,minWidth:`${ye.width}px`,height:O?`${O}px`:"auto",minHeight:O?`${O}px`:R?`${R}px`:"auto",zIndex:T?200:we&&i==="edit"?100:void 0,...J},onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),onTouchStart:ft,onClick:Jt,children:[p&&o.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 overflow-hidden",style:{backgroundColor:"var(--color-paper)",...J},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[u]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:"var(--card-texture-opacity)",mixBlendMode:"overlay"}})}),i==="edit"&&o.jsx("div",{className:"drag-handle absolute -top-2 left-8 right-8 h-8 bg-transparent cursor-move hover:opacity-70 active:opacity-50 flex justify-center items-center touch-none rounded-t-theme z-[60]",children:we&&o.jsx("div",{className:"flex gap-1",children:o.jsx("div",{className:"w-8 h-1 bg-theme-muted/50 rounded-full"})})}),i==="edit"&&we&&o.jsxs("div",{className:"absolute -top-3 -right-3 z-[200]",ref:m,children:[o.jsx("button",{className:"w-8 h-8 bg-theme-accent text-theme-paper rounded-full flex items-center justify-center transition-opacity hover:bg-theme-accent/80 text-lg",onClick:P=>{P.stopPropagation(),k(!T),T&&(A(!1),Z(!1),ee(""))},onMouseDown:P=>P.stopPropagation(),onTouchStart:P=>P.stopPropagation(),title:"Widget options",children:""}),T&&o.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-theme-paper border-[length:var(--border-width)] border-theme-border rounded-theme shadow-theme min-w-[140px] overflow-hidden z-[200]",children:[o.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors",onClick:P=>{P.stopPropagation(),k(!1),ke()},children:"Edit"}),o.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors",onClick:P=>{P.stopPropagation(),k(!1),l(e.id)},children:"Clone"}),V?o.jsxs("div",{className:"px-2 py-2",children:[o.jsx("input",{type:"text",value:oe,onChange:P=>ee(P.target.value),placeholder:"Template name...",className:"w-full px-2 py-1 text-sm border border-theme-border rounded bg-theme-paper text-theme-ink mb-2",autoFocus:!0,onClick:P=>P.stopPropagation(),onKeyDown:P=>{P.stopPropagation(),P.key==="Enter"&&oe.trim()?(x(e,oe.trim()),k(!1),Z(!1),ee("")):P.key==="Escape"&&(Z(!1),ee(""))}}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{className:"flex-1 px-2 py-1 text-xs bg-theme-accent text-theme-paper rounded hover:bg-theme-accent/80 transition-colors",onClick:P=>{P.stopPropagation(),oe.trim()&&(x(e,oe.trim()),k(!1),Z(!1),ee(""))},children:"Save"}),o.jsx("button",{className:"flex-1 px-2 py-1 text-xs text-theme-muted hover:bg-theme-border/50 rounded transition-colors",onClick:P=>{P.stopPropagation(),Z(!1),ee("")},children:"Cancel"})]})]}):o.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors",onClick:P=>{P.stopPropagation(),ee(e.data.label||""),Z(!0)},children:"Create Template"}),o.jsx("div",{className:"border-t border-theme-border"}),D?o.jsxs("div",{className:"flex",children:[o.jsx("button",{className:"flex-1 px-3 py-2 text-sm text-red-500 hover:bg-red-500 hover:text-white transition-colors font-bold",onClick:P=>{P.stopPropagation(),k(!1),A(!1),a(e.id)},children:"Confirm"}),o.jsx("button",{className:"flex-1 px-3 py-2 text-sm text-theme-muted hover:bg-theme-accent hover:text-theme-paper transition-colors",onClick:P=>{P.stopPropagation(),A(!1)},children:"Cancel"})]}):o.jsx("button",{className:"w-full px-3 py-2 text-left text-sm text-red-500 hover:bg-red-500 hover:text-white transition-colors",onClick:P=>{P.stopPropagation(),A(!0)},children:"Delete"})]})]}),i==="edit"&&me&&o.jsx("div",{className:"absolute inset-0 z-40 bg-theme-accent/10",style:J,onTouchStart:P=>P.stopPropagation()}),i==="edit"&&we&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 cursor-se-resize z-50 flex items-center justify-center",onMouseDown:Wt,onTouchStart:Wt,title:"Drag to resize",children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",className:"text-theme-muted hover:text-theme-ink transition-colors",children:o.jsx("path",{d:"M10 2L2 10M10 6L6 10M10 10L10 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),o.jsx("div",{ref:N,className:"h-full overflow-hidden relative z-10 pt-1 pl-1",children:ne()})]})}),w&&o.jsx(P0,{widget:e,onClose:Se})]})}function L0({widget:e,index:t,totalWidgets:n,isDragging:r,draggedIndex:s,dropTargetIndex:a,onDragStart:l,onDragOver:c,onDragEnd:i}){const d=E.useRef(null),h=G(M=>M.activeCharacterId),x=G(M=>M.characters).find(M=>M.id===h),b=x!=null&&x.theme?wn(x.theme):void 0,y=x!=null&&x.theme?zs(x.theme):void 0,j=(b==null?void 0:b.cardTexture)||(y==null?void 0:y.cardTexture)||"none",C=vt(j),[f,u]=E.useState(null),[p,v]=E.useState(!1),[N,m]=E.useState(()=>{try{return localStorage.getItem(`ucs:vertical-collapsed:${e.id}`)==="true"}catch{return!1}});E.useEffect(()=>{try{localStorage.setItem(`ucs:vertical-collapsed:${e.id}`,String(N))}catch{}},[N,e.id]),E.useEffect(()=>{const M=R=>{m(R.detail)};return window.addEventListener("vertical-collapse-all",M),()=>{window.removeEventListener("vertical-collapse-all",M)}},[]);const w={CHECKBOX:"Checkbox",TOGGLE_GROUP:"Conditions",DICE_ROLLER:"Dice Roller",DICE_TRAY:"Dice Tray",FORM:"Form",HEALTH_BAR:"Health Bar",IMAGE:"Image",LIST:"List",MAP_SKETCHER:"Map Sketcher",NUMBER_DISPLAY:"Number Display",NUMBER:"Number Tracker",POOL:"Resource Pool",PROGRESS_BAR:"Progress Bar",REST_BUTTON:"Rest Button",SPELL_SLOT:"Spell Slots",TABLE:"Table",TEXT:"Text Area",TIME_TRACKER:"Time Tracker",ROLL_TABLE:"Roll Table"},S=()=>e.data.label||w[e.type]||e.type,T=r&&s!==null&&a===t&&s>t,k=r&&s!==null&&a===t&&s<t,D=M=>{M.target.closest(".vertical-drag-handle")&&(v(!0),u(M.touches[0].clientY),l(t))},A=M=>{if(!p||f===null)return;const R=M.touches[0],W=document.elementsFromPoint(R.clientX,R.clientY);for(const Q of W){const X=Q.closest("[data-vertical-index]");if(X){const H=parseInt(X.getAttribute("data-vertical-index")||"0",10);H!==t&&c(H);break}}},V=()=>{p&&(v(!1),u(null),i())},Z=M=>{if(!M.target.closest(".vertical-drag-handle")){M.preventDefault();return}M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("text/plain",t.toString()),l(t)},oe=M=>{M.preventDefault(),M.dataTransfer.dropEffect="move",c(t)},ee=()=>{i()},F=()=>{const M={widget:e,mode:"play",width:320,height:1e4};switch(e.type){case"NUMBER":return o.jsx(vi,{...M});case"NUMBER_DISPLAY":return o.jsx(yi,{...M});case"LIST":return o.jsx(wi,{...M});case"TEXT":return o.jsx(ki,{...M});case"CHECKBOX":return o.jsx(ji,{...M});case"HEALTH_BAR":return o.jsx(Ni,{...M});case"DICE_ROLLER":return o.jsx(Si,{...M});case"DICE_TRAY":return o.jsx(Ci,{...M});case"SPELL_SLOT":return o.jsx(Ti,{...M});case"IMAGE":return o.jsx(Ei,{...M});case"POOL":return o.jsx(Mi,{...M});case"TOGGLE_GROUP":return o.jsx(Ii,{...M});case"TABLE":return o.jsx(Pi,{...M});case"TIME_TRACKER":return o.jsx(Ri,{...M});case"FORM":return o.jsx(Di,{...M});case"REST_BUTTON":return o.jsx(Li,{...M});case"PROGRESS_BAR":return o.jsx(_i,{...M});case"MAP_SKETCHER":return o.jsx(Oi,{...M,height:300});case"ROLL_TABLE":return o.jsx($i,{...M});default:return null}};return o.jsxs("div",{ref:d,"data-vertical-index":t,className:`vertical-widget relative transition-all duration-200 ${r&&s===t?"opacity-50 scale-95":""}`,onDragOver:oe,onDragEnd:ee,onTouchStart:D,onTouchMove:A,onTouchEnd:V,children:[T&&o.jsx("div",{className:"absolute -top-2 left-0 right-0 h-1 bg-theme-accent rounded-full z-50"}),o.jsxs("div",{className:"bg-theme-paper border-[length:var(--border-width)] border-theme-border rounded-theme overflow-visible relative",children:[C&&o.jsx("div",{className:"absolute inset-0 pointer-events-none rounded-theme z-0 overflow-hidden",style:{backgroundColor:"var(--color-paper)"},children:o.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${Vt[j]})`,backgroundSize:"cover",filter:"grayscale(100%)",opacity:"var(--card-texture-opacity)",mixBlendMode:"overlay"}})}),o.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 relative z-20",children:[o.jsx("div",{className:"vertical-drag-handle cursor-grab active:cursor-grabbing flex items-center gap-2 touch-none select-none",draggable:!0,onDragStart:Z,children:o.jsxs("svg",{width:"10",height:"16",viewBox:"0 0 10 16",className:"text-theme-muted flex-shrink-0",fill:"currentColor",children:[o.jsx("circle",{cx:"2",cy:"2",r:"1.5"}),o.jsx("circle",{cx:"8",cy:"2",r:"1.5"}),o.jsx("circle",{cx:"2",cy:"8",r:"1.5"}),o.jsx("circle",{cx:"8",cy:"8",r:"1.5"}),o.jsx("circle",{cx:"2",cy:"14",r:"1.5"}),o.jsx("circle",{cx:"8",cy:"14",r:"1.5"})]})}),N&&o.jsx("span",{className:"text-xs font-bold text-theme-ink font-heading truncate flex-1 ml-2",children:S()}),!N&&o.jsx("div",{className:"flex-1"}),o.jsx("button",{onClick:()=>m(!N),className:"w-6 h-6 flex items-center justify-center text-theme-muted hover:text-theme-ink transition-colors",children:o.jsx("span",{className:`transform transition-transform ${N?"":"rotate-180"}`,children:""})})]}),!N&&o.jsx("div",{className:"relative px-3 pb-2",children:F()})]}),k&&o.jsx("div",{className:"absolute -bottom-2 left-0 right-0 h-1 bg-theme-accent rounded-full z-50"}),t<n-1&&o.jsx("div",{className:"h-px bg-theme-border/30 my-1"})]})}const Ao=10,Wo=20;function _0({widgets:e,scale:t}){const n=G(f=>f.attachWidgets),r=G(f=>f.detachWidgets),s=G(f=>f.selectedWidgetId),[a,l]=E.useState(0),[c,i]=E.useState(!1),[d,h]=E.useState(null),g=s||d,x=e.map(f=>`${f.id}:${f.x}:${f.y}:${f.groupId||""}`).join("|");E.useEffect(()=>{const f=()=>{const p=document.querySelector(".react-draggable-dragging");i(!!p)},u=new MutationObserver(f);return u.observe(document.body,{subtree:!0,attributes:!0,attributeFilter:["class"]}),()=>u.disconnect()},[]),E.useEffect(()=>{const f=p=>{const v=p.target;if(v.closest("[data-attach-widget-ids]"))return;const m=v.closest("[data-widget-id]");h(m?m.getAttribute("data-widget-id"):null)},u=p=>{const v=p.target;if(v.closest("[data-attach-widget-ids]"))return;const m=v.closest("[data-widget-id]");h(m?m.getAttribute("data-widget-id"):null)};return document.addEventListener("mouseover",f),document.addEventListener("touchstart",u),()=>{document.removeEventListener("mouseover",f),document.removeEventListener("touchstart",u)}},[]),E.useEffect(()=>{const f=setTimeout(()=>{l(u=>u+1)},100);return()=>clearTimeout(f)},[x,t]);const b=E.useMemo(()=>{const f=[];return e.forEach(u=>{const p=document.querySelector(`[data-widget-id="${u.id}"]`);if(p){const v=p.getBoundingClientRect();f.push({id:u.id,groupId:u.groupId,attachedTo:u.attachedTo,left:u.x,right:u.x+v.width/t,top:u.y,bottom:u.y+v.height/t})}}),f},[e,t,a]),y=E.useMemo(()=>{var u,p;const f=[];for(let v=0;v<b.length;v++)for(let N=v+1;N<b.length;N++){const m=b[v],w=b[N],S=!!((u=m.attachedTo)!=null&&u.includes(w.id)||(p=w.attachedTo)!=null&&p.includes(m.id));if(Math.abs(m.right-w.left)<=Ao){const T=Math.max(m.top,w.top),k=Math.min(m.bottom,w.bottom);k-T>=Wo&&f.push({widget1Id:m.id,widget2Id:w.id,x:m.right,y:(T+k)/2,orientation:"vertical",isAttached:S})}if(Math.abs(m.left-w.right)<=Ao){const T=Math.max(m.top,w.top),k=Math.min(m.bottom,w.bottom);k-T>=Wo&&f.push({widget1Id:m.id,widget2Id:w.id,x:m.left,y:(T+k)/2,orientation:"vertical",isAttached:S})}if(Math.abs(m.bottom-w.top)<=Ao){const T=Math.max(m.left,w.left),k=Math.min(m.right,w.right);k-T>=Wo&&f.push({widget1Id:m.id,widget2Id:w.id,x:(T+k)/2,y:m.bottom,orientation:"horizontal",isAttached:S})}if(Math.abs(m.top-w.bottom)<=Ao){const T=Math.max(m.left,w.left),k=Math.min(m.right,w.right);k-T>=Wo&&f.push({widget1Id:m.id,widget2Id:w.id,x:(T+k)/2,y:m.top,orientation:"horizontal",isAttached:S})}}return f},[b]),j=f=>{if(f.isAttached){const u=g===f.widget1Id?f.widget1Id:g===f.widget2Id?f.widget2Id:f.widget1Id;r(u,f.widget2Id)}else{const u=b.find(w=>w.id===f.widget1Id),p=b.find(w=>w.id===f.widget2Id);if(!u||!p){n(f.widget1Id,f.widget2Id);return}let v,N;if(p.groupId&&!u.groupId)v=u.id,N=p.groupId;else if(u.groupId&&!p.groupId)v=p.id,N=u.groupId;else if(u.groupId&&p.groupId&&u.groupId!==p.groupId){n(f.widget1Id,f.widget2Id);return}else{n(f.widget1Id,f.widget2Id);return}const m=y.filter(w=>{if(w.isAttached)return!1;const S=b.find(k=>k.id===w.widget1Id),T=b.find(k=>k.id===w.widget2Id);return!S||!T?!1:w.widget1Id===v&&T.groupId===N||w.widget2Id===v&&S.groupId===N});for(const w of m)n(w.widget1Id,w.widget2Id)}};if(c)return null;const C=g?y.filter(f=>f.widget1Id===g||f.widget2Id===g):[];return o.jsx(o.Fragment,{children:C.map((f,u)=>o.jsx("button",{"data-attach-widget-ids":`${f.widget1Id},${f.widget2Id}`,className:`absolute w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold transition-all transform -translate-x-1/2 -translate-y-1/2 hover:scale-125 ${f.isAttached?"bg-green-500 hover:bg-red-500 text-white":"bg-blue-500 hover:bg-green-500 text-white"}`,style:{left:`${f.x}px`,top:`${f.y}px`,zIndex:100},onClick:()=>j(f),onMouseDown:p=>p.stopPropagation(),onTouchStart:p=>p.stopPropagation(),title:f.isAttached?"Click to detach widgets":"Click to attach widgets",children:f.isAttached?"":""},`${f.widget1Id}-${f.widget2Id}-${u}`))})}function O0({widgets:e,scale:t}){const[n,r]=E.useState([]),[s,a]=E.useState(!1),l=e.map(c=>`${c.id}:${c.x}:${c.y}`).join("|");return E.useEffect(()=>{const c=()=>{const d=document.querySelector(".react-draggable-dragging");a(!!d)},i=new MutationObserver(c);return i.observe(document.body,{subtree:!0,attributes:!0,attributeFilter:["class"]}),()=>i.disconnect()},[]),E.useEffect(()=>{const c=setTimeout(()=>{const i=[];e.forEach(d=>{const h=document.querySelector(`[data-widget-id="${d.id}"]`);if(h){const g=h.getBoundingClientRect();i.push({id:d.id,x:d.x,y:d.y,width:g.width/t,height:g.height/t})}}),r(i)},50);return()=>clearTimeout(c)},[e,t,l]),s?null:o.jsx("div",{className:"pointer-events-none",children:n.map(c=>o.jsx("div",{className:"absolute shadow-theme rounded-theme",style:{left:`${c.x}px`,top:`${c.y}px`,width:`${c.width}px`,height:`${c.height}px`}},`shadow-${c.id}`))})}function $0(e){const t=e.sheets.find(n=>n.id===e.activeSheetId);return(t==null?void 0:t.widgets)||[]}function A0(){var ot,Nr,qt;const e=G(L=>L.activeCharacterId),t=G(L=>L.characters),n=G(L=>L.addWidget),r=G(L=>L.mode),s=G(L=>L.setMode),a=G(L=>L.selectCharacter),l=G(L=>L.updateCharacterName),c=G(L=>L.editingWidgetId),i=G(L=>L.reorderWidget),d=G(L=>L.createSheet),h=G(L=>L.selectSheet),g=G(L=>L.deleteSheet),x=G(L=>L.renameSheet),b=G(L=>L.undo),y=G(L=>L.redo),j=En(L=>e?L.canUndo(e):!1),C=En(L=>e?L.canRedo(e):!1),f=t.find(L=>L.id===e),u=f?$0(f):[],[p,v]=E.useState(!0),[N,m]=E.useState(!0),[w,S]=E.useState(!1),[T,k]=E.useState(""),[D,A]=E.useState(null),[V,Z]=E.useState(""),[oe,ee]=E.useState(!1),[F,M]=E.useState(null),[R,W]=E.useState(!1),[Q,X]=E.useState(!1),[H,te]=E.useState(null),[me,ye]=E.useState(null),[ft,Jt]=E.useState(!1),we=E.useRef(null),{pan:ke,scale:Se,isPanning:mt,setPan:Zt,setScale:kt,handleMouseDown:Wt,handleMouseMove:U,handleMouseUp:$,handleWheel:q}=sg({editingWidgetId:c,mode:r}),I=E.useRef(Se),_=E.useRef(ke);E.useEffect(()=>{I.current=Se},[Se]),E.useEffect(()=>{_.current=ke},[ke]);const O=E.useCallback(()=>I.current,[]),B=E.useCallback(()=>_.current,[]),{isTouchPanning:Y}=ag({mode:r,onPanChange:Zt,onScaleChange:kt,onPinchingChange:Jt,getScale:O,getPan:B}),{handleAutoStack:J}=lg({widgets:u,scale:Se}),{handleFitAllWidgets:ne}=ig({widgets:u,scale:Se,setScale:kt,setPan:Zt});E.useEffect(()=>{const L=se=>{se.target instanceof HTMLInputElement||se.target instanceof HTMLTextAreaElement||(se.ctrlKey&&se.key==="z"&&!se.shiftKey&&(se.preventDefault(),b()),(se.ctrlKey&&se.key==="y"||se.ctrlKey&&se.shiftKey&&se.key==="z"||se.ctrlKey&&se.shiftKey&&se.key==="Z")&&(se.preventDefault(),y()))};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[b,y]),E.useEffect(()=>{if(e&&u.length>0){const L=setTimeout(()=>{ne()},100);return()=>clearTimeout(L)}},[e]),E.useEffect(()=>{if(f){const L=f.theme||"default",se=wn(L);se?pl(se):yr(L)}return()=>{yr("default")}},[f==null?void 0:f.theme,f==null?void 0:f.id]);const Ve=L=>{L.preventDefault(),L.dataTransfer.dropEffect="copy"},P=L=>{L.preventDefault();const se=L.dataTransfer.getData("widgetType");if(se){const gf=(L.clientX-ke.x)/Se,bf=(L.clientY-ke.y)/Se,Ai=10,Wi=wf=>Math.round(wf/Ai)*Ai,vf=Wi(gf),yf=Wi(bf);n(se,vf,yf)}},ie=L=>{te(L),ye(L)},Re=L=>{ye(L)},ae=()=>{if(H!==null&&me!==null&&H!==me){const L=u[H];L&&i(L.id,me)}te(null),ye(null)};if(!f)return null;const[De,je]=E.useState(!1);return r==="vertical"?o.jsxs("div",{className:"w-full h-screen overflow-hidden relative bg-theme-background flex flex-col",children:[o.jsxs("div",{className:"bg-theme-paper border-b-[length:var(--border-width)] border-theme-border px-2 py-2 flex items-center gap-2 z-30 shrink-0",children:[o.jsx("button",{onClick:()=>je(!De),className:"sm:hidden w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink",children:""}),o.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[o.jsx("button",{onClick:()=>a(null),className:"h-8 px-3 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-red-500 text-xs font-body hover:bg-red-500 hover:text-white transition-colors",children:"Exit"}),o.jsx("button",{onClick:()=>s("edit"),className:"h-8 px-3 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"Edit Mode"}),o.jsx("button",{onClick:()=>s("play"),className:"h-8 px-3 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"Grid View"}),o.jsx("button",{onClick:b,disabled:!j,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${j?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M3 7v6h6"}),o.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),o.jsx("button",{onClick:y,disabled:!C,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${C?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M21 7v6h-6"}),o.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]})})]}),o.jsx("h1",{className:"font-bold text-sm text-theme-ink font-heading truncate flex-1 min-w-0",children:f.name}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>ee(!oe),className:"h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-theme px-2 flex items-center gap-1 text-xs",children:[o.jsx("span",{className:"text-theme-ink truncate max-w-[60px]",children:((ot=f.sheets.find(L=>L.id===f.activeSheetId))==null?void 0:ot.name)||"Sheet"}),o.jsx("span",{className:"text-theme-muted",children:""})]}),oe&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>ee(!1)}),o.jsx("div",{className:"absolute top-full right-0 mt-1 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme overflow-hidden z-50 min-w-[120px]",children:f.sheets.map(L=>o.jsx("button",{onClick:()=>{h(L.id),ee(!1)},className:`w-full px-3 py-2 text-xs text-left font-body transition-colors ${L.id===f.activeSheetId?"bg-theme-accent text-theme-paper":"text-theme-ink hover:bg-theme-accent/20"}`,children:L.name},L.id))})]})]}),o.jsx("button",{onClick:()=>{u.forEach(L=>{localStorage.setItem(`ucs:vertical-collapsed:${L.id}`,"false")}),window.dispatchEvent(new CustomEvent("vertical-collapse-all",{detail:!1}))},className:"w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs",title:"Expand All",children:""}),o.jsx("button",{onClick:()=>{u.forEach(L=>{localStorage.setItem(`ucs:vertical-collapsed:${L.id}`,"true")}),window.dispatchEvent(new CustomEvent("vertical-collapse-all",{detail:!0}))},className:"w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs",title:"Collapse All",children:""}),o.jsxs("div",{className:"sm:hidden flex items-center gap-1",children:[o.jsx("button",{onClick:b,disabled:!j,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${j?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Undo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M3 7v6h6"}),o.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),o.jsx("button",{onClick:y,disabled:!C,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${C?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Redo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M21 7v6h-6"}),o.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]})})]})]}),De&&o.jsxs("div",{className:"sm:hidden",children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>je(!1)}),o.jsxs("div",{className:"absolute top-12 left-2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme overflow-hidden z-50 flex flex-col",children:[o.jsx("button",{onClick:()=>{s("play"),je(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:"Grid View"}),o.jsx("button",{onClick:()=>{s("edit"),je(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:"Edit Mode"}),o.jsx("button",{onClick:()=>{a(null),je(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-red-500 hover:bg-red-500 hover:text-white transition-colors border-t border-theme-border/50 whitespace-nowrap",children:"Exit to Menu"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsxs("div",{className:"max-w-md mx-auto px-3 py-4 pb-24",children:[u.map((L,se)=>o.jsx(L0,{widget:L,index:se,totalWidgets:u.length,isDragging:H!==null,draggedIndex:H,dropTargetIndex:me,onDragStart:ie,onDragOver:Re,onDragEnd:ae},L.id)),u.length===0&&o.jsxs("div",{className:"text-center text-theme-muted py-12",children:[o.jsx("p",{className:"font-body",children:"No widgets on this sheet"}),o.jsx("p",{className:"text-sm mt-2",children:"Switch to Edit mode to add widgets"})]})]})})]}):o.jsxs("div",{ref:we,className:"w-full h-screen overflow-hidden relative bg-theme-background",children:[r==="edit"&&o.jsx(ug,{collapsed:p,onToggle:()=>v(!p)}),r==="edit"&&o.jsx(hg,{collapsed:N,onToggle:()=>m(!N)}),o.jsx("div",{className:`absolute inset-0 ${mt||Y.current?"cursor-grabbing":"cursor-default"} ${ft?"pinch-active":""}`,onMouseDown:Wt,onMouseMove:U,onMouseUp:$,onWheel:q,onDragOver:Ve,onDrop:P,children:o.jsxs("div",{className:"absolute top-0 left-0 w-full h-full origin-top-left",style:{transform:`translate(${ke.x}px, ${ke.y}px) scale(${Se})`},children:[r!=="play"&&o.jsx("div",{className:"absolute -top-[50000px] -left-[50000px] w-[100000px] h-[100000px] pattern-grid opacity-20 pointer-events-none"}),o.jsx(O0,{widgets:u,scale:Se}),u.map(L=>o.jsx(D0,{widget:L,scale:Se},L.id)),r==="edit"&&o.jsx(_0,{widgets:u,scale:Se})]})}),o.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-theme-paper border-b-[length:var(--border-width)] border-theme-border px-2 py-2 flex items-center gap-2 z-30",children:[o.jsx("button",{onClick:()=>W(!R),className:"sm:hidden w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink shrink-0",children:""}),o.jsxs("div",{className:"hidden sm:flex items-center gap-1 shrink-0",children:[o.jsx("button",{onClick:()=>a(null),className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-red-500 text-xs font-body hover:bg-red-500 hover:text-white hover:border-red-700 transition-colors",children:"Exit"}),o.jsx("button",{onClick:()=>s(r==="play"?"edit":"play"),className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:r==="play"?"Edit Mode":"Play Mode"}),r==="play"&&o.jsx("button",{onClick:()=>s("vertical"),className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"Vertical View"}),r==="edit"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>v(!p),className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:p?"Add Widget":"Hide Widgets"}),o.jsx("button",{onClick:()=>m(!N),className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"Change Theme"}),o.jsx("button",{onClick:()=>X(!0),className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-theme-ink text-xs font-body hover:bg-theme-accent hover:text-theme-paper transition-colors",children:"Auto Stack"})]}),o.jsx("button",{onClick:b,disabled:!j,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${j?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M3 7v6h6"}),o.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),o.jsx("button",{onClick:y,disabled:!C,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${C?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M21 7v6h-6"}),o.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]})})]}),o.jsx("div",{className:"flex-1 min-w-0",children:w?o.jsx("input",{type:"text",value:T,onChange:L=>k(L.target.value),onBlur:()=>{T.trim()&&l(f.id,T.trim()),S(!1)},onKeyDown:L=>{L.key==="Enter"?(T.trim()&&l(f.id,T.trim()),S(!1)):L.key==="Escape"&&S(!1)},autoFocus:!0,className:"font-bold text-sm bg-transparent border-b-[length:var(--border-width)] border-theme-border outline-none w-full text-theme-ink font-heading"}):o.jsx("h1",{className:`font-bold text-sm text-theme-ink font-heading truncate ${r==="edit"?"cursor-pointer":""}`,onClick:()=>{r==="edit"&&(k(f.name),S(!0))},children:f.name})}),o.jsx("div",{className:"relative shrink-0",children:o.jsxs("button",{onClick:()=>ee(!oe),className:"h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-theme px-3 flex items-center gap-1 text-xs font-body",children:[o.jsx("span",{className:"text-theme-ink truncate max-w-[60px]",children:((Nr=f.sheets.find(L=>L.id===f.activeSheetId))==null?void 0:Nr.name)||"Sheet"}),o.jsx("span",{className:"text-theme-muted",children:""})]})}),o.jsx("button",{onClick:ne,className:"px-3 h-8 bg-theme-background border-[length:var(--border-width)] border-theme-border text-xs font-body flex items-center justify-center rounded-button text-theme-ink shrink-0",children:"Fit"}),o.jsxs("div",{className:"flex items-center gap-1 shrink-0 sm:hidden",children:[o.jsx("button",{onClick:b,disabled:!j,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${j?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Undo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M3 7v6h6"}),o.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),o.jsx("button",{onClick:y,disabled:!C,className:`w-8 h-8 flex items-center justify-center bg-theme-background border-[length:var(--border-width)] border-theme-border rounded-button text-xs font-body transition-colors ${C?"text-theme-ink hover:bg-theme-accent hover:text-theme-paper":"text-theme-muted opacity-50 cursor-not-allowed"}`,title:"Redo",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M21 7v6h-6"}),o.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]})})]})]}),R&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"sm:hidden fixed inset-0 z-40",onClick:()=>W(!1)}),o.jsxs("div",{className:"sm:hidden absolute top-12 left-2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme overflow-hidden z-50 flex flex-col",children:[o.jsx("button",{onClick:()=>{s(r==="play"?"edit":"play"),W(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:r==="play"?"Edit Mode":"Play Mode"}),r==="play"&&o.jsx("button",{onClick:()=>{s("vertical"),W(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:"Vertical View"}),r==="edit"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>{v(!p),W(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:p?"Add Widget":"Hide Toolbox"}),o.jsx("button",{onClick:()=>{m(!N),W(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:N?"Change Theme":"Hide Themes"}),o.jsx("button",{onClick:()=>{X(!0),W(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-theme-ink hover:bg-theme-accent hover:text-theme-paper transition-colors whitespace-nowrap",children:"Auto Stack"})]}),o.jsx("button",{onClick:()=>{a(null),W(!1)},className:"px-4 py-2.5 text-sm text-left font-body text-red-500 hover:bg-red-500 hover:text-white transition-colors border-t border-theme-border/50 whitespace-nowrap",children:"Exit to Menu"})]})]}),oe&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>ee(!1)}),o.jsxs("div",{className:"absolute top-12 right-2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme overflow-hidden z-50 min-w-[150px]",children:[f.sheets.map(L=>o.jsx("div",{className:"group relative",children:D===L.id?o.jsx("input",{type:"text",value:V,onChange:se=>Z(se.target.value),onBlur:()=>{V.trim()&&x(L.id,V.trim()),A(null)},onKeyDown:se=>{se.key==="Enter"?(V.trim()&&x(L.id,V.trim()),A(null)):se.key==="Escape"&&A(null)},autoFocus:!0,onClick:se=>se.stopPropagation(),className:"w-full px-3 py-2 text-xs bg-transparent border-b border-theme-border outline-none text-theme-ink font-body"}):o.jsxs("button",{onClick:()=>{h(L.id),ee(!1)},className:`w-full px-3 py-2 text-xs text-left font-body transition-colors flex items-center justify-between ${L.id===f.activeSheetId?"bg-theme-accent text-theme-paper":"text-theme-ink hover:bg-theme-accent/20"}`,children:[o.jsx("span",{children:L.name}),r==="edit"&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{onClick:se=>{se.stopPropagation(),Z(L.name),A(L.id)},className:`w-5 h-5 rounded-full text-xs flex items-center justify-center ${L.id===f.activeSheetId?"bg-theme-paper/30 text-theme-paper hover:bg-theme-paper/50":"bg-theme-accent/20 text-theme-ink hover:bg-theme-accent/40"}`,children:""}),f.sheets.length>1&&o.jsx("span",{onClick:se=>{se.stopPropagation(),M(L.id)},className:"w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center hover:bg-red-600",children:""})]})]})},L.id)),r==="edit"&&o.jsx("button",{onClick:()=>{d(`Sheet ${f.sheets.length+1}`),ee(!1)},className:"w-full px-3 py-2 text-xs text-theme-muted hover:text-theme-ink hover:bg-theme-accent/20 text-left font-body border-t border-theme-border/50 transition-colors",children:"+ Add New Sheet"})]})]}),F&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>M(null)}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme p-4 z-50 min-w-[250px]",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold mb-2",children:"Delete Sheet?"}),o.jsxs("p",{className:"text-sm text-theme-muted font-body mb-4",children:['Are you sure you want to delete "',(qt=f.sheets.find(L=>L.id===F))==null?void 0:qt.name,'"? This will delete all widgets on this sheet.']}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>M(null),className:"px-3 py-1.5 text-sm font-body text-theme-ink hover:bg-theme-accent/20 rounded-button transition-colors",children:"Cancel"}),o.jsx("button",{onClick:()=>{g(F),M(null),ee(!1)},className:"px-3 py-1.5 text-sm font-body bg-red-500 text-white hover:bg-red-600 rounded-button transition-colors",children:"Delete"})]})]})]}),Q&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>X(!1)}),o.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-theme-paper border-[length:var(--border-width)] border-theme-border shadow-theme rounded-theme p-4 z-50 min-w-[250px]",children:[o.jsx("h3",{className:"font-heading text-theme-ink font-bold mb-2",children:"Auto Stack?"}),o.jsx("p",{className:"text-sm text-theme-muted font-body mb-4",children:"This will automatically rearrange all widgets on this sheet. Your current layout will be replaced."}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>X(!1),className:"px-3 py-1.5 text-sm font-body text-theme-ink hover:bg-theme-accent/20 rounded-button transition-colors",children:"Cancel"}),o.jsx("button",{onClick:()=>{J(),X(!1)},className:"px-3 py-1.5 text-sm font-body bg-theme-accent text-theme-paper hover:bg-theme-accent-hover rounded-button transition-colors",children:"Auto Stack"})]})]})]})]})}function W0(){const e=G(t=>t.activeCharacterId);return o.jsx("div",{className:"h-full bg-gray-100 text-ink font-mono overflow-hidden",children:e?o.jsx(A0,{}):o.jsx(og,{})})}yr("default");ka.createRoot(document.getElementById("root")).render(o.jsx(jl.StrictMode,{children:o.jsx(W0,{})}));
